(this["webpackJsonpreact-rtl-reader"]=this["webpackJsonpreact-rtl-reader"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(7),o=n.n(r),i=(n(92),n(93),n(138)),l=n(22),s=n(3),m=n(133),d=n(143),u=n(135),f=n(103),g=n(137),h=n(33),p=n(73),E=n.n(p),b=n(140),v=n(55),N=function(e){var t=e.txt;return c.a.createElement(b.a,{textAlign:"center"},c.a.createElement(v.a,{variant:"h6",gutterBottom:!0},t))},j={MENU:"\u09b8\u09c2\u099a\u09bf\u09aa\u09a4\u09cd\u09b0",ABOUT:"\u09b8\u09ae\u09cd\u09aa\u09b0\u09cd\u0995\u09c7",READ:"\u09aa\u09dc\u09c1\u09a8",SETTINGS:"\u09b8\u09c7\u099f\u09bf\u0982\u09b8"},O=Object(m.a)({menu:{listStyle:"none",textAlign:"center",marginTop:15,"& li":{margintTop:10,borderBottom:"1px dotted #ccc"},"& li a":{color:"inherit",textDecoration:"none",display:"block",padding:"5px 15px"}}}),y=function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],o=n[1],i=O();return Object(a.useEffect)((function(){fetch("/test/data/menu.json").then((function(e){return e.json()})).then((function(e){o(e)})).catch((function(e){return console.log(e)}))}),[]),c.a.createElement(b.a,{my:3},c.a.createElement(N,{txt:j.MENU}),c.a.createElement(b.a,null,c.a.createElement("ul",{className:i.menu},r.map((function(e,t){return c.a.createElement("li",{key:t},c.a.createElement("a",{href:"#/read/".concat(e.id,"/").concat(encodeURIComponent(e.name))},e.name))})))))},S=function(e){return c.a.createElement("div",null,"About")},x=n(71),w=n.n(x),T=n(70),I=n.n(T),k=window.innerHeight-80,C=!1,A=Object(m.a)({storyTitle:{fontSize:18,textAlign:"center",borderBottom:"1px solid #ccc",marginTop:10},body:{height:k,display:"flex",textAlign:"justify",zIndex:9,opacity:.8},pageCount:{textAlign:"center",fontSize:14,opacity:.7,position:"fixed",left:0,right:0,bottom:0},loadPercent:{background:"#000",color:"#fff",fontWeight:500},directionIco:{display:"flex",position:"fixed",top:0,bottom:0,fontSize:30,opacity:.3,width:20,alignItems:"center",justifyContent:"center"},leftIco:{left:0,background:"linear-gradient(to right, #999, transparent)"},rightIco:{right:0,background:"linear-gradient(to left, #999, transparent)"},scrollView:{overflow:"auto",bottom:20,textAlign:"justify"}}),M=Object(h.b)((function(e){return{settings:e.settings}}))((function(e){var t=e.settings,n=Object(a.useState)(""),r=Object(l.a)(n,2),o=r[0],i=r[1],m=Object(a.useState)([]),d=Object(l.a)(m,2),u=d[0],f=d[1],g=Object(a.useState)(0),h=Object(l.a)(g,2),p=h[0],E=h[1],v=Object(a.useState)(!0),N=Object(l.a)(v,2),j=N[0],O=N[1],y=Object(a.useState)(0),S=Object(l.a)(y,2),x=S[0],T=S[1],M=e.match.params,z=M.id,P=M.name;P=decodeURIComponent(P);var B=A();Object(a.useEffect)((function(){return C=!1,fetch("/test/data/stories/"+z).then((function(e){return e.text()})).then((function(e){"PAGE"===t.readerPref?(e=e.replace(/\n/g,"\n "),G(e)):i(e)})).catch((function(e){return console.log(e)})),function(){return C=!0}}),[]);var G=function(e){O(!0);var n=e.split(" "),a=[];document.getElementById("hiddenhelper").style.fontSize=t.fontSize+"px",function e(t){if(C)return;if(t>n.length)return console.log((new Date).getTime()),f(a),void O(!1);var c=R(n.slice(t)),r=n.slice(t,t+c).join(" ");r.trim()&&a.push(r);t+=c;var o=Math.floor(t/n.length*100);p+1===a.length&&(console.log((new Date).getTime()),f([].concat(a)));T(o),setTimeout((function(){e(t)}),0)}(0)},R=function(e){var t="",n=Math.floor(window.innerHeight/10),a=k,c=document.getElementById("hiddenhelper");do{n+=1,t=e.slice(0,n).join(" "),c.innerText=t}while(n<e.length&&c.offsetHeight<a);return n-1};return c.a.createElement(b.a,null,c.a.createElement("div",{className:B.storyTitle},P),c.a.createElement("div",{className:"PAGE"===t.readerPref?"":"hidden"},c.a.createElement(b.a,{className:Object(s.a)(B.body,"readerpage"),style:{fontSize:t.fontSize}},u[p]),c.a.createElement("div",{className:Object(s.a)(B.pageCount,j&&"hidden","night-contrast")},p+1," of ",u.length),c.a.createElement("div",{className:Object(s.a)(!j&&"hidden",B.pageCount,B.loadPercent,"night-contrast")},c.a.createElement("span",null,"loading (",x,"%)")),c.a.createElement("span",{className:Object(s.a)(j&&"hidden")},c.a.createElement("span",{onClick:function(){return E(p-1)},className:Object(s.a)(B.directionIco,"page-dir-ico left",B.leftIco,0===p&&"hidden")},c.a.createElement(I.a,null)),c.a.createElement("span",{onClick:function(){return E(p+1)},className:Object(s.a)(B.directionIco,"page-dir-ico right",B.rightIco,p===u.length-1&&"hidden")},c.a.createElement(w.a,null)))),c.a.createElement("div",{className:"SCROLL"===t.readerPref?"":"hidden"},c.a.createElement("div",{className:Object(s.a)("readerpage",B.scrollView)},o)))})),z=n(51),P=n(72),B=n(144),G=n(139),R=n(136),D=Object(m.a)({item:{display:"flex",alignItems:"center",padding:"15px 5px 5px 5px",borderBottom:"1px solid #ccc","& .name":{flexGrow:1,fontSize:18}}}),U=Object(h.b)((function(e){return{settings:e.settings}}),(function(e){return{saveSettings:function(t){return e({type:"SETTINGS_SAVE",payload:t})}}}))((function(e){var t=e.settings,n=e.saveSettings;Object(a.useEffect)((function(){r(t.isNightMode)}),[t.isNightMode]);var r=function(e){var t=document.body.className.split(" ");e?t.includes("nightmode")||t.push("nightmode"):t.includes("nightmode")&&t.splice(t.indexOf("nightmode"),1),document.body.className=t.join(" ").trim()},o=function(e){var a=e.target.name,c=e.target.value;"isNightMode"===a&&(c=!t.isNightMode,r(c)),n(Object(P.a)({},t,Object(z.a)({},a,c)))},i=D();return c.a.createElement(b.a,{my:3},c.a.createElement(N,{txt:j.SETTINGS}),c.a.createElement(b.a,null,c.a.createElement("div",{className:i.item},c.a.createElement("div",{className:"name"},"Night Mode"),c.a.createElement("div",{className:"cntrl"},"Off",c.a.createElement(B.a,{checked:t.isNightMode,onChange:o,name:"isNightMode",color:"default",inputProps:{"aria-label":"secondary checkbox"}}),"On")),c.a.createElement("div",{className:i.item},c.a.createElement("div",{className:"name"},"Font Size"),c.a.createElement("div",{className:"cntrl"},c.a.createElement(G.a,{name:"fontSize",value:t.fontSize,onChange:o},c.a.createElement(R.a,{value:14},"14"),c.a.createElement(R.a,{value:16},"16"),c.a.createElement(R.a,{value:18},"18")))),c.a.createElement("div",{className:i.item},c.a.createElement("div",{className:"name"},"Reader View Preference"),c.a.createElement("div",{className:"cntrl"},c.a.createElement(G.a,{name:"readerPref",value:t.readerPref,onChange:o},c.a.createElement(R.a,{value:"SCROLL"},"Scroll"),c.a.createElement(R.a,{value:"PAGE"},"Page"))))))})),L=[{path:"/menu",component:y,displayName:j.MENU},{path:"/about",component:S,displayName:j.ABOUT},{path:"/read/:id/:name",component:M},{path:"/settings",component:U,displayName:j.SETTINGS}],V=n(54),W=Object(m.a)({list:{width:250,"& a":{color:"inherit",textDecoration:"none"}},item:{borderBottom:"1px solid #ccc"},toggler:{position:"fixed",top:12,left:12,zIndex:99}}),H=function(e){var t=W(),n=Object(a.useState)(!1),r=Object(l.a)(n,2),o=r[0],i=r[1],s=function(){return i(!1)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{onClick:function(){return i(!0)},className:t.toggler}),c.a.createElement(d.a,{open:o,onClose:s},c.a.createElement("div",{className:t.list,role:"presentation",onClick:s,onKeyDown:s},c.a.createElement(u.a,null,L.filter((function(e){return e.displayName})).map((function(e){return c.a.createElement(V.b,{to:e.path,key:e.path},c.a.createElement(f.a,{button:!0,className:t.item},c.a.createElement(g.a,{primary:e.displayName})))}))))))},F=n(25),J=n(75),_={isNightMode:!1,fontSize:16,readerPref:"SCROLL"},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETTINGS_SAVE":return t.payload;default:return e}},$=Object(F.combineReducers)({settings:K}),q=n(76),Q=n(30),X=Object(F.createStore)($,Object(q.composeWithDevTools)(Object(F.applyMiddleware)(J.a)));var Y=function(){return c.a.createElement(h.a,{store:X},c.a.createElement(V.a,null,c.a.createElement(H,null),c.a.createElement(i.a,{maxWidth:"sm"},c.a.createElement(Q.c,null,L.map((function(e){return c.a.createElement(Q.a,Object.assign({key:e.path},e))}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,t,n){e.exports=n(100)},92:function(e,t,n){},93:function(e,t,n){}},[[87,1,2]]]);
//# sourceMappingURL=main.4560e5a1.chunk.js.map