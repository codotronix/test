(this["webpackJsonpreact-rtl-reader"]=this["webpackJsonpreact-rtl-reader"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(7),o=n.n(r),i=(n(92),n(93),n(138)),l=n(25),s=n(3),m=n(133),d=n(143),u=n(135),f=n(103),g=n(137),h=n(23),p=n(73),E=n.n(p),b=n(140),v=n(55),y=function(e){var t=e.txt;return c.a.createElement(b.a,{textAlign:"center"},c.a.createElement(v.a,{variant:"h6",gutterBottom:!0},t))},N={MENU:"\u09b8\u09c2\u099a\u09bf\u09aa\u09a4\u09cd\u09b0",ABOUT:"\u09b8\u09ae\u09cd\u09aa\u09b0\u09cd\u0995\u09c7",READ:"\u09aa\u09dc\u09c1\u09a8",SETTINGS:"\u09b8\u09c7\u099f\u09bf\u0982\u09b8"},j=Object(m.a)({menu:{listStyle:"none",textAlign:"center",marginTop:15,"& li":{margintTop:10,borderBottom:"1px dotted #ccc"},"& li a":{color:"inherit",textDecoration:"none",display:"block",padding:"5px 15px"}}}),O=function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],o=n[1],i=j();return Object(a.useEffect)((function(){fetch("/test/data/menu.json").then((function(e){return e.json()})).then((function(e){o(e)})).catch((function(e){return console.log(e)}))}),[]),c.a.createElement(b.a,{my:3},c.a.createElement(y,{txt:N.MENU}),c.a.createElement(b.a,null,c.a.createElement("ul",{className:i.menu},r.map((function(e,t){return c.a.createElement("li",{key:t},c.a.createElement("a",{href:"#/read/".concat(e.id,"/").concat(encodeURIComponent(e.name))},e.name))})))))},S=function(e){return c.a.createElement("div",null,"About")},x=n(71),T=n.n(x),w=n(70),I=n.n(w),k=window.innerHeight-80,C=!1,M=Object(m.a)({storyTitle:{fontSize:18,textAlign:"center",borderBottom:"1px solid #ccc",marginTop:10},body:{height:k,display:"flex",textAlign:"justify",zIndex:9,opacity:.8},pageCount:{textAlign:"center",fontSize:14,opacity:.7,position:"fixed",left:0,right:0,bottom:0},loadPercent:{background:"#000",color:"#fff",fontWeight:500},directionIco:{display:"flex",position:"fixed",top:0,bottom:0,fontSize:30,opacity:.3,width:20,alignItems:"center",justifyContent:"center"},leftIco:{left:0,background:"linear-gradient(to right, #ddd, transparent)"},rightIco:{right:0,background:"linear-gradient(to left, #ddd, transparent)"}}),z=Object(h.b)((function(e){return{settings:e.settings}}))((function(e){var t=e.settings,n=Object(a.useState)([]),r=Object(l.a)(n,2),o=r[0],i=r[1],m=Object(a.useState)(0),d=Object(l.a)(m,2),u=d[0],f=d[1],g=Object(a.useState)(!0),h=Object(l.a)(g,2),p=h[0],E=h[1],v=Object(a.useState)(0),y=Object(l.a)(v,2),N=y[0],j=y[1],O=e.match.params,S=O.id,x=O.name;x=decodeURIComponent(x);var w=M();Object(a.useEffect)((function(){return C=!1,fetch("/test/data/stories/"+S).then((function(e){return e.text()})).then((function(e){e=e.replace(/\n/g,"\n "),z(e)})).catch((function(e){return console.log(e)})),function(){return C=!0}}),[]);var z=function(e){E(!0);var n=e.split(" "),a=[];document.getElementById("hiddenhelper").style.fontSize=t.fontSize+"px",function e(t){if(C)return;if(t>n.length)return console.log((new Date).getTime()),i(a),void E(!1);var c=A(n.slice(t)),r=n.slice(t,t+c).join(" ");r.trim()&&a.push(r);t+=c;var o=Math.floor(t/n.length*100);u+1===a.length&&(console.log((new Date).getTime()),i([].concat(a)));j(o),setTimeout((function(){e(t)}),0)}(0)},A=function(e){var t="",n=Math.floor(window.innerHeight/10),a=k,c=document.getElementById("hiddenhelper");do{n+=1,t=e.slice(0,n).join(" "),c.innerText=t}while(n<e.length&&c.offsetHeight<a);return n-1};return c.a.createElement(b.a,null,c.a.createElement("div",{className:w.storyTitle},x),c.a.createElement(b.a,{className:Object(s.a)(w.body,"readerpage"),style:{fontSize:t.fontSize}},o[u]),c.a.createElement("div",{className:Object(s.a)(w.pageCount,p&&"hidden","night-contrast")},u+1," of ",o.length),c.a.createElement("div",{className:Object(s.a)(!p&&"hidden",w.pageCount,w.loadPercent,"night-contrast")},c.a.createElement("span",null,"loading (",N,"%)")),c.a.createElement("span",{className:Object(s.a)(p&&"hidden")},c.a.createElement("span",{onClick:function(){return f(u-1)},className:Object(s.a)(w.directionIco,w.leftIco,0===u&&"hidden")},c.a.createElement(I.a,null)),c.a.createElement("span",{onClick:function(){return f(u+1)},className:Object(s.a)(w.directionIco,w.rightIco,u===o.length-1&&"hidden")},c.a.createElement(T.a,null))))})),A=n(51),B=n(72),P=n(144),G=n(139),D=n(136),U=Object(m.a)({item:{display:"flex",alignItems:"center",padding:"15px 5px 5px 5px",borderBottom:"1px solid #ccc","& .name":{flexGrow:1,fontSize:18}}}),R=Object(h.b)((function(e){return{settings:e.settings}}),(function(e){return{saveSettings:function(t){return e({type:"SETTINGS_SAVE",payload:t})}}}))((function(e){var t=e.settings,n=e.saveSettings,a=function(e){var a=e.target.name,c=e.target.value;"isNightMode"===a&&((c=!t.isNightMode)?(document.body.style.backgroundColor="#000",document.body.style.color="#fff"):(document.body.style.backgroundColor="#fff",document.body.style.color="#000")),n(Object(B.a)({},t,Object(A.a)({},a,c)))},r=U();return c.a.createElement(b.a,{my:3},c.a.createElement(y,{txt:N.SETTINGS}),c.a.createElement(b.a,null,c.a.createElement("div",{className:r.item},c.a.createElement("div",{className:"name"},"Night Mode"),c.a.createElement("div",{className:"cntrl"},"Off",c.a.createElement(P.a,{checked:t.isNightMode,onChange:a,name:"isNightMode",color:"default",inputProps:{"aria-label":"secondary checkbox"}}),"On")),c.a.createElement("div",{className:r.item},c.a.createElement("div",{className:"name"},"Font Size"),c.a.createElement("div",{className:"cntrl"},c.a.createElement(G.a,{name:"fontSize",value:t.fontSize,onChange:a},c.a.createElement(D.a,{value:14},"14"),c.a.createElement(D.a,{value:16},"16"),c.a.createElement(D.a,{value:18},"18")))),c.a.createElement("div",{className:r.item},c.a.createElement("div",{className:"name"},"Reader Preference"),c.a.createElement("div",{className:"cntrl"},c.a.createElement(G.a,{name:"readerPref",value:t.readerPref,onChange:a},c.a.createElement(D.a,{value:"SCROLL"},"Scroll"),c.a.createElement(D.a,{value:"PAGE"},"Page"))))))})),W=[{path:"/menu",component:O,displayName:N.MENU},{path:"/about",component:S,displayName:N.ABOUT},{path:"/read/:id/:name",component:z},{path:"/settings",component:R,displayName:N.SETTINGS}],H=n(54),F=Object(m.a)({list:{width:250,"& a":{color:"inherit",textDecoration:"none"}},item:{borderBottom:"1px solid #ccc"},toggler:{position:"fixed",top:12,left:12,zIndex:99}}),J=function(e){var t=F(),n=Object(a.useState)(!1),r=Object(l.a)(n,2),o=r[0],i=r[1],s=function(){return i(!1)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{onClick:function(){return i(!0)},className:t.toggler}),c.a.createElement(d.a,{open:o,onClose:s},c.a.createElement("div",{className:t.list,role:"presentation",onClick:s,onKeyDown:s},c.a.createElement(u.a,null,W.filter((function(e){return e.displayName})).map((function(e){return c.a.createElement(H.b,{to:e.path,key:e.path},c.a.createElement(f.a,{button:!0,className:t.item},c.a.createElement(g.a,{primary:e.displayName})))}))))))},L=Object(h.b)((function(e){return{isNightMode:e.settings.isNightMode}}))((function(e){var t=e.children,n=e.isNightMode;return c.a.createElement("div",{className:n?"nightmode":""},t)})),V=n(26),_=n(75),K={isNightMode:!1,fontSize:16,readerPref:"PAGE"},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETTINGS_SAVE":return t.payload;default:return e}},q=Object(V.combineReducers)({settings:$}),Q=n(76),X=n(31),Y=Object(V.createStore)(q,Object(Q.composeWithDevTools)(Object(V.applyMiddleware)(_.a)));var Z=function(){return c.a.createElement(h.a,{store:Y},c.a.createElement(H.a,null,c.a.createElement(L,null,c.a.createElement(J,null),c.a.createElement(i.a,{maxWidth:"sm"},c.a.createElement(X.c,null,W.map((function(e){return c.a.createElement(X.a,Object.assign({key:e.path},e))})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,t,n){e.exports=n(100)},92:function(e,t,n){},93:function(e,t,n){}},[[87,1,2]]]);
//# sourceMappingURL=main.93219d27.chunk.js.map