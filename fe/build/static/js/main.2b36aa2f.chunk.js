(this.webpackJsonpreactale=this.webpackJsonpreactale||[]).push([[0],{105:function(e,a,t){e.exports={logoContainer:"style_logoContainer__2gHHN",logoImg:"style_logoImg__uKyb1"}},173:function(e,a,t){e.exports=t(209)},206:function(e,a){},207:function(e,a){},208:function(e,a){},209:function(e,a,t){"use strict";t.r(a);var n,r,l=t(0),i=t.n(l),o=t(18),c=t.n(o),s=t(279),u=t(276),m=t(89),d=t(22),f=t(126),p=t(9),E=t(38),b=t(128),h=t(109),g=t(129),y=t(4);!function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e.EXPORT="EXPORT"}(n||(n={})),function(e){e[e.EDIT=0]="EDIT",e[e.PREVIEW=1]="PREVIEW"}(r||(r={}));var v={firstname:"",lastname:"",username:"",pswd:"",aboutme:"",email:"",imgUrl:"",gender:"",dob:"",lang1:"",lang2:"",lang3:"",country:"",facebookID:"",twitterID:"",history:[],prefs:{defaultSave:n.EXPORT}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_UPDATE":var t=a.payload.user;return Object(y.a)(Object(y.a)({},e),t);case"USER_PREFS_UPDATE":var n=a.payload;return Object(y.a)(Object(y.a)({},e),{},{prefs:Object(y.a)(Object(y.a)({},e.prefs),n)});case"USER_RESET":return Object(y.a)({},v);default:return e}},w={isSidebarOpen:!1,isLoginModalOpen:!1,loginActiveTab:0,isReactoModalOpen:!1,notifications:{}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UI_SIDEBAR_OPEN":return Object(y.a)(Object(y.a)({},e),{},{isSidebarOpen:!0});case"UI_SIDEBAR_CLOSE":return Object(y.a)(Object(y.a)({},e),{},{isSidebarOpen:!1});case"UI_LOGIN_MODAL_OPEN":return Object(y.a)(Object(y.a)({},e),{},{isLoginModalOpen:!0});case"UI_LOGIN_MODAL_CLOSE":return Object(y.a)(Object(y.a)({},e),{},{isLoginModalOpen:!1});case"UI_REACTO_MODAL_OPEN":return Object(y.a)(Object(y.a)({},e),{},{isReactoModalOpen:!0});case"UI_REACTO_MODAL_CLOSE":return Object(y.a)(Object(y.a)({},e),{},{isReactoModalOpen:!1});case"UI_LOGIN_SET_ACT_TAB":var t=a.payload.tabIndex;return!isNaN(t)&&t<3&&t>-1?Object(y.a)(Object(y.a)({},e),{},{loginActiveTab:t}):e;default:return e}},C=t(54),x=t(50),j=t(16),T=function(e){return{id:(e=e||{}).id,title:e.title||"",text:e.text||"",choices:e.choices||[]}},N=function(e){return{id:(e=e||{}).id,text:e.text||"",next:e.next||null}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null,isPublished:!1,start:null,info:{name:"",description:"",genre:"Other",lang:"English",tags:"",authorEmail:"",originalAuthor:"",storyUrl:"",desiredUrl:"",imgUrl:""},idCounter:0,storylets:{},choices:{},reactos:{vars:{}},storyboard:[]},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"TALE_CREATE":var t="R"+(new Date).getTime()+Math.random().toString().replace(".",""),n=T({id:"ST000"}),r=Object(y.a)(Object(y.a)({},e),{},{id:t,start:"ST000",storylets:Object(j.a)({},"ST000",n),storyboard:[{stID:"ST000"}]});return r;case"TALE_SET_AS_WIP":return Object(y.a)(Object(y.a)({},a.payload),{},{storyboard:[{stID:"ST000"}]});case"STORYBOARD_INITIALIZE":return Object(y.a)(Object(y.a)({},e),{},{storyboard:[{stID:"ST000"}]});case"TALE_UPDATE_REACTO_VARS":return Object(y.a)(Object(y.a)({},e),{},{reactos:Object(y.a)(Object(y.a)({},e.reactos),{},{vars:a.payload})});case"TALE_UPDATE_INFO":return Object(y.a)(Object(y.a)({},e),{},{info:a.payload});case"TALE_PUBLISH":return Object(y.a)(Object(y.a)({},e),{},{isPublished:!0});case"TALE_UNPUBLISH":return Object(y.a)(Object(y.a)({},e),{},{isPublished:!1});case"TALE_STATE_CLEANUP":return{id:null,isPublished:!1,start:null,info:{name:"",description:"",genre:"Other",lang:"English",tags:"",authorEmail:"",originalAuthor:"",storyUrl:"",desiredUrl:"",imgUrl:""},idCounter:0,storylets:{},choices:{},reactos:{vars:{}},storyboard:[]};case"STORYLET_DELETE":var l=function(){var t,n=a.payload,r=e.storylets[n],l=Object(y.a)({},e.storylets),i=Object(y.a)({},e.choices),o=Object(x.a)(r.choices);try{for(o.s();!(t=o.n()).done;){var c=t.value;delete i[c]}}catch(u){o.e(u)}finally{o.f()}for(var s in l)s!==n&&(l[s].choices=l[s].choices.filter((function(e){return i[e].next!==n||(delete i[e],!1)})));return delete l[n],{v:Object(y.a)(Object(y.a)({},e),{},{storylets:l,choices:i})}}();if("object"===typeof l)return l.v;case"STORYLET_UPDATE_FIELD":var i=a.payload,o=i.stID,c=i.fieldName,s=i.value,u=Object(y.a)({},e.storylets[o]);return u[c]=s,Object(y.a)(Object(y.a)({},e),{},{storylets:Object(y.a)(Object(y.a)({},e.storylets),{},Object(j.a)({},o,u))});case"STORYLET_UPDATE_ALL_TEXT":var m=a.payload,d=m.stID,f=m.title,p=m.text,E=Object(y.a)(Object(y.a)({},e.storylets[d]),{},{title:f,text:p});return Object(y.a)(Object(y.a)({},e),{},{storylets:Object(y.a)(Object(y.a)({},e.storylets),{},Object(j.a)({},d,E))});case"STORYBOARD_ADD_SINGLE":return Object(y.a)(Object(y.a)({},e),{},{storyboard:[].concat(Object(C.a)(e.storyboard),[{stID:a.payload.stID}])});case"STORYBOARD_INSERT_AT":var b=a.payload,h=b.sbI,g=b.nextStID,v=b.isRemoveOnly,O=Object(C.a)(e.storyboard);return O=O.slice(0,h+1),v||O.push({stID:g}),Object(y.a)(Object(y.a)({},e),{},{storyboard:O});case"STORYBOARD_SELECT_CHOICE":var w=a.payload,S=w.sbI,I=w.cID,k=Object(C.a)(e.storyboard);return k[S]=Object(y.a)(Object(y.a)({},k[S]),{},{selectedCID:I}),Object(y.a)(Object(y.a)({},e),{},{storyboard:k});case"CHOICE_CREATE":var L,A=a.payload,R=A.fromStID,_=A.toStID,D=A.text,P=Object(y.a)({},e.storylets[R]),U=e.idCounter;_=_||"S"+(++U).toString().padStart(3,"0");var W=e.storylets[_]?Object(y.a)({},e.storylets[_]):T({id:_}),M="C"+(++U).toString().padStart(3,"0"),z=N({id:M,next:_,text:D=D||"Choice - "+M});return P.choices=[].concat(Object(C.a)(P.choices),[M]),Object(y.a)(Object(y.a)({},e),{},{idCounter:U,choices:Object(y.a)(Object(y.a)({},e.choices),{},Object(j.a)({},M,z)),storylets:Object(y.a)(Object(y.a)({},e.storylets),{},(L={},Object(j.a)(L,_,W),Object(j.a)(L,R,P),L))});case"CHOICE_UPDATE_TEXT":var B=a.payload,F=B.cID,H=B.value,V=Object(y.a)({},e.choices[F]);return V.text=H,Object(y.a)(Object(y.a)({},e),{},{choices:Object(y.a)(Object(y.a)({},e.choices),{},Object(j.a)({},F,V))});case"CHOICE_DELETE":var G,Y=a.payload,K=Object(y.a)({},e.choices);for(var q in e.storylets)if(e.storylets[q].choices.indexOf(Y)>-1){G=Object(y.a)({},e.storylets[q]);break}return G.choices=Object(C.a)(G.choices),G.choices.splice(G.choices.indexOf(Y),1),delete K[Y],Object(y.a)(Object(y.a)({},e),{},{storylets:Object(y.a)(Object(y.a)({},e.storylets),{},Object(j.a)({},G.id,G)),choices:K});case"ADD_CID_TO_STID":var J=a.payload,X=J.stID,Z=J.cID,$=Object(y.a)({},e.storylets[X]);return $.choices=[].concat(Object(C.a)($.choices),[Z]),Object(y.a)(Object(y.a)({},e),{},{storylets:Object(y.a)(Object(y.a)({},e.storylets),{},Object(j.a)({},X,$))});default:return e}},k={myTales:[]},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ONLINE_DATA_SAVE_MY_TALES":return Object(y.a)(Object(y.a)({},e),{},{myTales:a.payload});case"ONLINE_DATA_CLEAR_TALES":return{myTales:[]};default:return e}},A=Object(E.combineReducers)({ui:S,user:O,wipTale:I,od:L}),R=t(130),_={key:"rtlroot",storage:t.n(R).a},D=Object(h.a)(_,A),P=Object(E.createStore)(D,Object(g.composeWithDevTools)(Object(E.applyMiddleware)(b.a))),U=Object(h.b)(P),W=t(154),M=Object(W.a)({palette:{primary:{light:"#dd3333",main:"#d50000",dark:"#950000",contrastText:"#fff"},secondary:{light:"#ff6333",main:"#ff3d00",dark:"#b22a00",contrastText:"#fff"}},typography:{fontFamily:['"Exo"',"sans-serif"].join(",")},props:{MuiButton:{size:"small"}}}),z=t(246),B=t(248),F=t(250),H=t(157),V=t(131),G=t.n(V),Y=t(105),K=t.n(Y);console.log("NODE_ENV = ","production");var q="production",J={production:"",development:"http://localhost:9090"},X={production:"",development:"",c:".json"},Z="HYBRIDNODE",$="/r/assets/img/bg/small/storytelling-4203628_640.jpg",Q=("".concat(J[q],"/rtale/api/getappver").concat(X[q]),"".concat(J[q],"/rtale/api/v2/getloggedinuser").concat(X[q])),ee="".concat(J[q],"/rtale/api/v2/getstory").concat(X[q]),ae="".concat(J[q],"/rtale/api/v2/getmystory").concat(X[q]),te="".concat(J[q],"/rtale/api/v2/deletemytale").concat(X[q]),ne="".concat(J[q],"/rtale/api/v2/getmystories").concat(X[q]),re=("".concat(J[q],"/rtale/api/v2/uploadstorybanner").concat(X[q]),"".concat(J[q],"/rtale/api/v2/createstory").concat(X[q])),le=("".concat(J[q],"/rtale/api/v2/createstory").concat(X[q]),"".concat(J[q],"/rtale/api/v2/signin").concat(X[q])),ie="".concat(J[q],"/rtale/api/v2/signup").concat(X[q]),oe="".concat(J[q],"/rtale/api/v2/verifyemail").concat(X[q]),ce=("".concat(J[q],"/rtale/api/v2/signout").concat(X[q]),"".concat(J[q],"/rtale/api/v2/getallstories").concat(X[q])),se="".concat(J[q],"/rtale/api/v2/publish").concat(X[q]),ue="".concat(J[q],"/rtale/api/v2/resendotp").concat(X[q]),me="".concat(J[q],"/rtale/api/v2/updatenewpswd").concat(X[q]),de="".concat(J[q],"/rtale/api/v2/updateusername").concat(X[q]),fe="".concat(J[q],"/rtale/api/v2/updatemyprofile").concat(X[q]),pe="".concat(J[q],"/rtale/api/v2/updatemypreferences").concat(X[q]),Ee="".concat(J[q],"/rtale/api/v2/uploadstorybanner").concat(X[q]),be="".concat(J[q],"/rtale/api/v2/execlinkatale").concat(X[q]),he=t(80),ge=t.n(he),ye=JSON.parse(window.sessionStorage.getItem("RTLSESSION")||"{}"),ve=function(){return window.sessionStorage.setItem("RTLSESSION",JSON.stringify(ye))},Oe=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic (CAR)","Chad","Chile","China","Colombia","Comoros","Congo, Democratic Republic of the","Congo, Republic of the","Costa Rica","Cote d'Ivoire","Croatia","Cuba","Cyprus","Czechia","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini (formerly Swaziland)","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar (formerly Burma)","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia (formerly Macedonia)","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates (UAE)","United Kingdom (UK)","United States of America (USA)","Uruguay","Uzbekistan","Vanuatu","Vatican City (Holy See)","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],we=["Algerian Arabic","Amharic","Assamese","Bengali","Bhojpuri","Burmese","Cebuano","Chhattisgarhi","Chittagonian","Czech","Deccan","Dutch","Eastern Punjabi","Egyptian Arabic","English","French","Gan","German","Greek","Gujarati","Hakka","Hausa","Hejazi Arabic","Hindi","Hungarian","Igbo","Indonesian","Iranian Persian","Italian","Japanese","Javanese","Jinyu","Kannada","Kazakh","Khmer","Kinyarwanda","Korean","Magahi","Maithili","Malay","Malayalam","Mandarin","Marathi","Mesopotamian Arabic","Min Bei Chinese","Min Dong Chinese","Min Nan","Moroccan Arabic","Nepali","Nigerian Fulfulde","North Levantine Arabic","Northern Kurdish","Northern Pashto","Northern Uzbek","Odia","Polish","Portuguese","Romanian","Rundi","Russian","Sanaani Spoken Arabic","Saraiki","Sa\u02bdidi Arabic","Sindhi","Sinhala","Somali","South Azerbaijani","South Levantine Arabic","Southern Pashto","Spanish","Sudanese Arabic","Sunda","Sylheti","Tagalog","Tamil","Ta\u02bdizzi-Adeni Arabic","Telugu","Thai","Tunisian Arabic","Turkish","Ukrainian","Urdu","Uyghur","Vietnamese","Western Punjabi","Wu","Xiang Chinese","Yoruba","Yue","Zulu","Other"],Se=["Absurdist","Action","Adventure","Comedy","Crime","Drama","Fantasy","Historical","Historical fiction","Horror","Magical realism","Mystery","Paranoid fiction","Philosophical","Political","Romance","Saga","Satire","Science fiction","Social","Speculative","Surreal","Thriller","Urban","Western","Whimsical","Other"],Ce=["b","i","u","c","s","br","hr"],xe="Reactale - Readers Act, Tales React - World's First Dynamic Story Reading / Writing Platform",je=(window.localStorage.getItem("rtltok"),function(){return(e="SESSION_AUTH_DATA",ye[e]||{}).tok;var e}),Te=function(e,a){return ge.a.post(e,a,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+je()}})},Ne=function(e,a){return ge.a.get(e,{params:a,headers:{Authorization:"Bearer "+je()}})},Ie=function(e,a){return a.forEach((function(a){return e+="/"+a})),Ne(e)},ke=(window.notify,Object(z.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},toolbar:{padding:"0 10px"},greet:{width:63,fontSize:13,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",marginLeft:7},profileLink:{color:"#fff",textDecoration:"none"}}}))),Le=Object(p.b)((function(e){return{user:e.user}}),(function(e){return{openSidebar:function(){return e({type:"UI_SIDEBAR_OPEN"})},updateUser:function(a){return e({type:"USER_UPDATE",payload:{user:a}})}}}))((function(e){var a=ke(),t=e.openSidebar,n=e.user,r=e.updateUser;return Object(l.useEffect)((function(){window.showLoader(),n.email||Ne(Q).then((function(e){var a=e.data,t=a.status,n=(a.msg,a.user);200===t&&r(n)})).catch((function(e){})).finally((function(){return window.hideLoader()}))}),[]),i.a.createElement("div",{className:"flex-grow-1"},i.a.createElement(B.a,{position:"static"},i.a.createElement(F.a,{className:a.toolbar},i.a.createElement(H.a,{edge:"start",onClick:t,className:a.menuButton,color:"inherit","aria-label":"menu"},i.a.createElement(G.a,null)),i.a.createElement("div",{className:K.a.logoContainer},i.a.createElement("img",{src:"/r/assets/img/logo/Reactale-logo-50h-white-bg.png",alt:"Reactale Logo",className:K.a.logoImg})),i.a.createElement("div",{className:a.greet},!n.firstname&&i.a.createElement("span",{title:"Welcome Guest"},"Welcome Guest!"),n.firstname&&i.a.createElement("a",{href:"#/profile",className:a.profileLink},i.a.createElement("span",{title:"Welcome "+n.firstname},"Welcome ",n.firstname,"!"))))))})),Ae=t(7),Re=t(258),_e=t(212),De=t(259),Pe=t(260),Ue=t(261),We=t(100),Me=window.notify,ze=function(e,a,t){if(!e)throw new Error("fromStID is mandatory while creating a new choice");return function(n,r){n({type:"CHOICE_CREATE",payload:{fromStID:e,toStID:a,text:t}})}},Be=function(e,a){return function(t,n){t({type:"CHOICE_UPDATE_TEXT",payload:{cID:e,value:a}})}},Fe=function(e){return function(a){e.idCounter=e.idCounter||100,a({type:"TALE_SET_AS_WIP",payload:e})}},He=t(280),Ve=t(255),Ge=t(211),Ye=t(286),Ke=t(256),qe=t(283),Je=t(257),Xe=t(2),Ze=t(251),$e=t(253),Qe=t(254),ea=t(132),aa=t.n(ea),ta=Object(z.a)((function(e){return{titleBar:{margin:0,backgroundColor:e.palette.primary.main,color:"#fff",padding:"".concat(e.spacing(.5),"px ").concat(e.spacing(1),"px"),fontSize:e.typography.pxToRem(20),minWidth:300},modalBody:{padding:"".concat(e.spacing(2),"px")},closeIco:{position:"absolute",top:3,right:2,boxSizing:"content-box",padding:"5px 7px",color:"#fff",cursor:"pointer"}}})),na=function(e){var a=ta(),t=e.isOpen,n=e.handleClose,r=e.title,l=e.children,o=e.className;return i.a.createElement("div",{className:Object(Xe.a)(o)},i.a.createElement(Ze.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-".concat(r)},i.a.createElement($e.a,{className:a.titleBar},i.a.createElement(aa.a,{className:a.closeIco,onClick:n}),r),i.a.createElement(Qe.a,{className:a.modalBody},l)))},ra=function(){return JSON.parse(window.localStorage.getItem("allReactales"))||{}},la=function(e){return ra()[e]},ia=function(e){var a=ra();return delete a[e],function(e){window.localStorage.setItem("allReactales",JSON.stringify(e))}(a),a},oa=window.notify,ca=Object(z.a)((function(e){return{titleBar:{margin:0,backgroundColor:e.palette.primary.main,color:"#fff",padding:"".concat(e.spacing(.5),"px ").concat(e.spacing(1),"px"),fontSize:e.typography.pxToRem(20),minWidth:300},modalBody:{padding:"".concat(e.spacing(2),"px")},closeIco:{position:"absolute",top:3,right:2,boxSizing:"content-box",padding:"5px 7px",color:"#fff",cursor:"pointer"}}})),sa=function(e){ca();var a=e.isOpen,t=e.handleClose,n=e.logOut,r=Object(l.useState)("-"),o=Object(Ae.a)(r,2),c=o[0],s=o[1];Object(l.useEffect)((function(){s("-")}),[a]);return i.a.createElement(na,{isOpen:a,handleClose:t,title:"Please Confirm"},i.a.createElement("p",null,"Are you sure you want to logout ?"),i.a.createElement("p",null,i.a.createElement("b",null,"Warning:")," Since Offline Saved Tales are saved in common memory location, they can be seen/deleted by anyone using Reactale in this device (Safer options are saving online or export/import)."),i.a.createElement(He.a,{my:3},i.a.createElement(Ve.a,{component:"fieldset"},i.a.createElement(Ge.a,{component:"legend"},"So, do you want to delete offline tales ?"),i.a.createElement(Ye.a,{"aria-label":"gender",name:"gender1",value:c,onChange:function(e){s(e.target.value)}},i.a.createElement(Ke.a,{value:"Y",control:i.a.createElement(qe.a,null),label:"Yes, delete offline tales"}),i.a.createElement(Ke.a,{value:"N",control:i.a.createElement(qe.a,null),label:"No, don't delete offline tales"}),i.a.createElement(Ke.a,{value:"-",control:i.a.createElement(qe.a,null),label:"Choose either of above 2 options"})))),i.a.createElement(He.a,{mt:2,className:"text-right"},i.a.createElement(Je.a,{variant:"outlined",color:"primary",onClick:t},"Cancel"),i.a.createElement(Je.a,{variant:"contained",color:"primary",onClick:function(e){"Y"!==c&&"N"!==c?oa("Select whether to keep or delete offline tales"):("Y"===c&&(window.localStorage.setItem("allReactales","{}"),oa("Offline tales deleted successfully")),n(),t())},className:"ml-5"},"Log out")))},ua=Object(z.a)((function(e){return{list:{width:250},fullList:{width:"auto"},listItem:{borderBottom:"1px solid "+e.palette.primary.main,"& .ico":{fontSize:20,color:e.palette.primary.main,marginRight:10}},icoInList:{minWidth:30},ico:{fontSize:30},faIco:{fontSize:27,color:e.palette.primary.main}}})),ma=[{name:"Home",url:"/",iconClass:"fas fa-home ico"},{name:"Gallery",url:"/gallery",iconClass:"fas fa-book-reader ico"},{name:"Search",url:"/search",iconClass:"fas fa-search ico"},{name:"Create Tale",url:"/create-tale",iconClass:"fas fa-plus-square ico"},{name:"My Tales",url:"/my-tales",iconClass:"fas fa-briefcase ico"},{name:"My Profile",url:"/my-profile",iconClass:"fas fa-user ico"},{name:"Notifications",url:"/notifications",iconClass:"fas fa-bell ico"}],da=Object(p.b)((function(e){return{isSidebarOpen:e.ui.isSidebarOpen,user:e.user}}),(function(e){return{closeSidebar:function(){return e({type:"UI_SIDEBAR_CLOSE"})},openLoginModal:function(){return e({type:"UI_LOGIN_MODAL_OPEN"})},resetWIPTale:function(){return e((function(e,a){e({type:"TALE_STATE_CLEANUP"})}))},resetUser:function(){return e({type:"USER_RESET"})},resetFetchedTales:function(){return e({type:"ONLINE_DATA_CLEAR_TALES"})}}}))((function(e){var a=ua(),t=Object(l.useState)(!1),n=Object(Ae.a)(t,2),r=n[0],o=n[1],c=e.openLoginModal,s=e.user,u=e.resetWIPTale,f=e.resetUser,p=e.resetFetchedTales,E=e.purgePersistedData,b=Object(d.g)(),h=function(e){o(!0)};return i.a.createElement("div",null,i.a.createElement(Ue.a,{open:e.isSidebarOpen,onClose:e.closeSidebar},i.a.createElement("div",{className:a.list,role:"presentation",onClick:e.closeSidebar,onKeyDown:e.closeSidebar},i.a.createElement(Re.a,null,ma.map((function(e,t){return i.a.createElement(m.b,{key:e.name,to:e.url,className:"anchor-default-none",onClick:function(a){return function(e,a){["/","/gallery","/search"].includes(a)?(e.preventDefault(),e.stopPropagation(),window.location.href=window.location.origin+a):"/create-tale"===a&&u()}(a,e.url)}},i.a.createElement(_e.a,{button:!0,className:a.listItem},i.a.createElement("i",{className:e.iconClass}),i.a.createElement(De.a,{primary:e.name})))})),!s.email&&i.a.createElement(_e.a,{button:!0,className:a.listItem,onClick:c},i.a.createElement("i",{className:"fas fa-sign-in-alt ico"}),i.a.createElement(De.a,{primary:"Login"})),s.email&&i.a.createElement(_e.a,{button:!0,className:a.listItem,onClick:h},i.a.createElement(Pe.a,{className:a.icoInList},i.a.createElement("i",{className:"fas fa-sign-in-alt ico"})),i.a.createElement(De.a,{primary:"Logout"}))))),i.a.createElement(sa,{isOpen:r,handleClose:function(){return o(!1)},logOut:function(e){try{ye={},ve(),f(),p(),E(),b.push("/"),window.notify("You are successfully signed out.")}catch(a){window.notify("Some error occured while trying to sign out.")}}}))})),fa=t(262),pa=t(43),Ea=t(133),ba=t.n(Ea),ha=t(134),ga=t.n(ha),ya=t(135),va=t.n(ya),Oa=t(136),wa=t.n(Oa),Sa=Object(z.a)((function(e){return{root:{backgroundColor:e.palette.primary.dark,color:"#fff",padding:"".concat(e.spacing(5),"px ").concat(e.spacing(4),"px")},links:{"& a":{textDecoration:"none",color:"#fff !important"}},iconLinks:{display:"flex","& svg":{fontSize:27,marginRight:e.spacing(1)}}}})),Ca=function(e){var a=Sa();return i.a.createElement(He.a,{className:a.root},i.a.createElement(fa.a,{container:!0,spacing:3},i.a.createElement(fa.a,{item:!0,xs:12,md:8},i.a.createElement("p",{className:"mt-0"},"Reactale is what happens when literature embraces technology and comes to life. When a reader reads a Reactale (a.k.a Reactive Tale), the Reactale also reads back its reader and then reacts by magically altering itself depending on the reader's actions / decisions / sorroundings and other learnings that are made available to it about its reader."),i.a.createElement("p",null,"REACTALE marks the birth of a NEW ERA of story telling, in search of a new way, a very REACTIVE one, where no longer will an immersive tale ONLY ENGAGE its readers, but it will INTERACT, and most importantly, it will REACT...")),i.a.createElement(fa.a,{item:!0,xs:12,md:4},i.a.createElement(He.a,null,i.a.createElement(pa.a,{variant:"h5",gutterBottom:!0},"Connect"),i.a.createElement("ul",{className:Object(Xe.a)(a.links,a.iconLinks)},i.a.createElement("li",null,i.a.createElement("a",{href:"https://www.facebook.com/reactale"},i.a.createElement(ba.a,null))),i.a.createElement("li",null,i.a.createElement("a",{href:"https://twitter.com/ReactiveTales"},i.a.createElement(ga.a,null))),i.a.createElement("li",null,i.a.createElement("a",{href:"mailto:hello@reactale.com"},i.a.createElement(va.a,null))),i.a.createElement("li",{title:"Android app coming soon"},i.a.createElement("a",null,i.a.createElement(wa.a,null))))),i.a.createElement(He.a,{mt:2},i.a.createElement(pa.a,{variant:"h5",gutterBottom:!0},"Links"),i.a.createElement("ul",{className:a.links},i.a.createElement("li",null,i.a.createElement("a",{href:"https://reacto.reactale.com/"},"Reacto")),i.a.createElement("li",null,i.a.createElement("a",{href:"https://reactale.com/rtale/privacy-policy"},"Privacy Policy")),i.a.createElement("li",null,i.a.createElement("a",{href:"https://reactale.com/rtale/terms-and-conditions"},"Terms and Conditions")))))))},xa=function(e){var a=e.children;return i.a.createElement("div",null,a)},ja=t(30),Ta=t.n(ja),Na=t(49),Ia=window.notify,ka=[],La=function(){var e=Object(Na.a)(Ta.a.mark((function e(){var a,t,n,r,l;return Ta.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ka.length>0)){e.next=2;break}return e.abrupt("return",ka);case 2:return e.prev=2,e.next=5,Ne(ce);case 5:a=e.sent,t=a.data,n=t.status,r=t.tales,l=t.msg,200===n?ka=r:Ia(l),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:return e.prev=12,e.abrupt("return",ka);case 15:case"end":return e.stop()}}),e,null,[[2,10,12,15]])})));return function(){return e.apply(this,arguments)}}(),Aa=t(263),Ra=Object(z.a)((function(e){return{root:{padding:"8px 16px",height:"100%",display:"flex",flexDirection:"column",maxWidth:500,margin:"10px auto",borderTop:"5px solid ".concat(e.palette.primary.main),"& .fillmid":{flexGrow:1,marginBottom:10}}}})),_a=function(e){var a=Ra();return i.a.createElement(Aa.a,{className:a.root},e.children)},Da=t(264),Pa=t(287),Ua=t(265),Wa=t(266),Ma=t(267),za=t(101),Ba=t(137),Fa=t.n(Ba),Ha=t(60),Va=t.n(Ha),Ga=t(138),Ya=t.n(Ga),Ka=t(90),qa=t.n(Ka),Ja=Object(z.a)((function(e){return{card:{maxWidth:255,minWidth:245,margin:"0 auto"},media:{height:0,paddingTop:"56.25%"},desc:{height:95,overflow:"hidden"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:za.a[500]},btnLeft:{justifyContent:"flex-start",flexGrow:1,"& svg":{color:e.palette.primary.dark}}}})),Xa=function(e){var a=Ja(),t=e.info,n=e.expandable,r=e.handleEdit,l=e.handleDelete,o=e.handleReadTale,c=e.pageID,s=i.a.useState(!1),u=Object(Ae.a)(s,2),m=u[0],d=u[1];return i.a.createElement(Aa.a,{className:a.card},i.a.createElement(Da.a,{avatar:i.a.createElement(Pa.a,{"aria-label":"recipe",className:a.avatar},"S"),title:t.name,subheader:i.a.createElement("span",null,i.a.createElement("span",null,t.genre),t.authorDisplayName&&i.a.createElement("span",null," | "+t.authorDisplayName))}),i.a.createElement(Ua.a,{className:a.media,onClick:o,image:t.imgUrl?"/ups/banners/".concat(t.imgUrl):$,title:"Story Image"}),i.a.createElement(Wa.a,null,i.a.createElement(pa.a,{variant:"body2",className:a.desc,color:"textSecondary",component:"p"},t.description)),i.a.createElement(Ma.a,{disableSpacing:!0},i.a.createElement("div",{className:a.btnLeft},"HOME"!==c&&i.a.createElement(H.a,{"aria-label":"delete",onClick:l},i.a.createElement(qa.a,null))),i.a.createElement(H.a,{"aria-label":"add to favorites"},i.a.createElement(Fa.a,null)),"HOME"!==c&&i.a.createElement(H.a,{"aria-label":"edit",onClick:r},i.a.createElement(Ya.a,null)),n&&i.a.createElement(H.a,{className:Object(Xe.a)(a.expand,Object(j.a)({},a.expandOpen,m)),onClick:function(){d(!m)},"aria-expanded":m,"aria-label":"show more"},i.a.createElement(Va.a,null))))},Za=window,$a=Za.showLoader,Qa=Za.hideLoader,et=Object(p.b)((function(e){return{user:e.user}}),(function(e){return{openLoginModal:function(){return e({type:"UI_LOGIN_MODAL_OPEN"})}}}))((function(e){var a=Object(l.useState)({}),t=Object(Ae.a)(a,2),n=t[0],r=t[1],o=e.history,c=e.location,s=e.openLoginModal,u=e.user;Object(l.useEffect)((function(){document.title="Home | "+xe}),[]),Object(l.useEffect)((function(){if($a(),La().then((function(e){var a=e.reduce((function(e,a){return e[a.info.genre]=e[a.info.genre]||[],e[a.info.genre].push(a),e}),{});r(a)})).catch((function(e){return console.log(e)})).finally((function(){return Qa()})),"true"===new URLSearchParams(c.search).get("openLogin")){console.log("show login modal");var e=c.search.replace("openLogin=true","");o.push("".concat(c.pathname).concat(e)),setTimeout((function(){u&&u.email||s()}),300)}}),[o,c,s,u]);return i.a.createElement(He.a,{pb:5,className:"home-page"},Object.keys(n).length<=0&&i.a.createElement("h2",{className:"mt-25"},"Oops! looks like an issue. We could not fetch any tales at the moment. :("),i.a.createElement(He.a,null,Object.keys(n).map((function(e,a){return i.a.createElement(He.a,{key:e,mt:0===a?0:4},i.a.createElement("h1",{className:"category mb-5"},i.a.createElement("span",{className:"name"},e)),i.a.createElement("div",{className:"talecards-holder"},n[e].map((function(e){return i.a.createElement(He.a,{key:e.info.storyUrl,mr:2},i.a.createElement(Xa,{info:e.info,expandable:!1,pageID:"HOME",handleReadTale:function(){return function(e){if("APP"===Z)o.push("/preview/".concat(e));else{var a=window.location.origin+"/read/"+e;window.location.href=a}}(e.info.storyUrl)}}))}))))}))))})),at=t(103),tt=t(282),nt=t(272),rt=[{token:"((r.dt.year))",desc:"Shows current year e.g. 2019, 2022 etc",test:"Current year is ((r.dt.year))"},{token:"((r.dt.month))",desc:"Shows current month e.g. February, November etc",test:"Current month is ((r.dt.month))"},{token:"((r.dt.day))",desc:"Shows current day e.g. Sunday, Friday etc",test:"Today is ((r.dt.day))"},{token:"((r.dt.date))",desc:"Shows today's date e.g. 9, 21 etc",test:"Today is ((r.dt.date))th day of ((r.dt.month))"},{token:"((r.dt.hour))",desc:"Shows current hour in 12 hours format e.g. 7, 11 etc",test:"Current time is ((r.dt.hour)):((r.dt.min)):((r.dt.sec))"},{token:"((r.dt.hour24))",desc:"Shows current hour in 24 hours format e.g. 19, 22 etc",test:"Current time in 24 hour format is ((r.dt.hour24)):((r.dt.min)):((r.dt.sec))"},{token:"((r.dt.min))",desc:"Shows current min e.g. 32, 55 etc",test:"It is currently ((r.dt.min)) minutes past ((r.dt.hour))"},{token:"((r.dt.sec))",desc:"Shows current sec e.g. 3, 19 etc",test:"Current time is ((r.dt.hour):((r.dt.min):((r.dt.sec))"},{token:"((r.cfg.langSwitch.L))",desc:"Changes the Reactos language. L=en, beng or any language code, e.g ((r.cfg.langSwitch.beng)) for Bengali etc",test:"In Bengali today is ((r.cfg.langSwitch.beng))((r.dt.day))\n        in English today is ((r.cfg.langSwitch.en))((r.dt.day))"},{token:"((r.var.k1=v1))",desc:"To set any custom variable (e.g reader's name / hobby / choice-selection etc) to be used later",test:"Set the variables and then Get the variables. \n        ((r.var.name=Barry Allen))((r.var.superheroName=The Flash))((r.var.tagLine=The Fastest man alive)) \n        \n        Hello ((r.var.name)), I know you are ((r.var.tagLine))! \n        You are ((r.var.superheroName))..."},{token:"((r.var.name1))",desc:"To get any previously SET value",test:"Set the variables and then Get the variables. \n        ((r.var.name=Tony Stark))((r.var.superheroName=Iron Man))((r.var.tagLine=genius billionaire playboy philanthropist)) \n        \n        Hello ((r.var.name)), I know you are a ((r.var.tagLine))! You are ((r.var.superheroName))..."},{token:"((r.if. n1 = n2))",desc:"n1, n2 can be numbers or reactos. Equality operator can be anyone of =, !=, >, !>, <, !<. If the condition is true then the following reacto or body text inside double curly braces i.e. {{ ... }} will be executed, else not",test:"   ((r.if. 5 > 9)) {{ This line should not be shown }}\n            ((r.if. 9 < r.dt.year ))\n            {{ Yes, ((r.dt.year)) is always Greater than 9. ((r.var.secret_message = Reacto is Awesome )) }}\n            ((r.if. 2 = 2)) \n            {{ Number comparison successful }}\n            ((r.if. r.var.secret_message = Reacto is Awesome)) \n            {{ Text comparison successful }}\n        "},{token:"((r.calc. n1 + n2))",desc:"n1, n2 can be numbers or reactos. Maths operator can be anyone of the basic four, i.e. + , - , * and / ",test:"   4 + 5 = ((r.calc. 4 + 5))\n            5 - 3 = ((r.calc. 5 - 3))\n            3 * 2 = ((r.calc. 3 * 2))\n            20 / 5 = ((r.calc. 20 / 5))\n        "}],lt=t(139),it=t.n(lt),ot=t(91),ct=t.n(ot),st=window.notify,ut=Object(z.a)((function(e){return{root:{position:"relative"},cats:{border:"1px solid ".concat(e.palette.primary.main),display:"inline-block",fontSize:15,margin:3,padding:"5px 10px",borderRadius:2,lineHeight:"15px",cursor:"default","&.selected":{background:e.palette.primary.main,color:"#fff"}},indieReacto:{boxShadow:"0px 1px 3px 1px #a9a9a9",padding:15,margin:"20px 0","& .desc":{color:"rgba(0, 0, 0, .6)"},"& .reacto":{fontSize:16,fontWeight:700,fontFamily:'"Courier New", Courier, monospace',display:"flex",alignItems:"center","& .token":{color:"rgba(0, 0, 0, .8)",marginRight:5}}},invisible:{position:"absolute",left:-1e3}}})),mt=function(e){var a=ut(),t=e.tryOut,n=Object(l.useState)([]),r=Object(Ae.a)(n,2),o=r[0],c=r[1],s=Object(l.useState)({}),u=Object(Ae.a)(s,2),m=u[0],d=u[1],f=Object(l.useState)("All"),p=Object(Ae.a)(f,2),E=p[0],b=p[1],h=Object(l.createRef)();Object(l.useEffect)((function(){var e,a=["All"],t={All:[]},n=Object(x.a)(rt);try{for(n.s();!(e=n.n()).done;){var r=e.value,l=r.token.substr(4);l=l.substring(0,l.indexOf(".")),a.indexOf(l)<0&&a.push(l),t[l]=t[l]||[],t[l].push(r),t.All.push(r)}}catch(i){n.e(i)}finally{n.f()}c(a),d(t)}),[]);return i.a.createElement(He.a,{px:1,className:a.root},i.a.createElement("input",{type:"text",ref:h,className:a.invisible}),i.a.createElement(He.a,{mt:2},o.length>0&&o.map((function(e){return i.a.createElement("span",{key:e,onClick:function(){return b(e)},className:Object(Xe.a)(a.cats,E===e&&"selected")},e)}))),i.a.createElement("p",null,'Showing "',"".concat(E),'" Reactos'),i.a.createElement(He.a,null,m[E]&&m[E].map((function(e){return i.a.createElement("div",{className:a.indieReacto,key:e.token},i.a.createElement("div",{className:"reacto"},i.a.createElement("span",{className:"token"},e.token)),i.a.createElement("hr",null),i.a.createElement("div",{className:"desc"},e.desc),i.a.createElement("div",{className:"text-right mt-15"},i.a.createElement(Je.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return a=e.token,console.log(a),console.log(h),h.current.value=a,h.current.select(),h.current.setSelectionRange(0,99999),document.execCommand("copy"),void st("Reacto copied to clipboard");var a},startIcon:i.a.createElement(it.a,null)},"Copy"),i.a.createElement(Je.a,{variant:"outlined",color:"primary",size:"small",className:"ml-5",onClick:function(){return t(e.test.replace(/ +/g," "))},endIcon:i.a.createElement(ct.a,null)},"Try")))}))))},dt=t(288),ft=Object(z.a)((function(e){return{textField:{fontFamily:'"Courier New", Courier, monospace'},interpretedTxt:{whiteSpace:"pre-wrap"}}})),pt=function(e){var a=ft(),t=e.rTxt,n=Object(l.useState)(""),r=Object(Ae.a)(n,2),o=r[0],c=r[1],s=Object(l.useState)(""),u=Object(Ae.a)(s,2),m=u[0],d=u[1];Object(l.useEffect)((function(){c(t)}),[t]);return i.a.createElement(He.a,null,i.a.createElement("p",null,'Paste any text containing reactos and click "Interpret"'),i.a.createElement(He.a,null,i.a.createElement(dt.a,{label:"Reactive Text",multiline:!0,rows:"6",variant:"outlined",fullWidth:!0,className:a.textField,value:o,onChange:function(e){return c(e.target.value)}}),i.a.createElement(fa.a,{container:!0,spacing:1},i.a.createElement(fa.a,{item:!0,xs:!0},i.a.createElement(Je.a,{variant:"contained",color:"primary",className:"mt-15",fullWidth:!0,size:"small",onClick:function(){c(""),d("")}},"Clear")),i.a.createElement(fa.a,{item:!0,xs:!0},i.a.createElement(Je.a,{variant:"contained",color:"primary",className:"mt-15",fullWidth:!0,size:"small",onClick:function(){d(window.rto.process(o))}},"Convert"))),i.a.createElement(He.a,{py:3},m&&i.a.createElement("div",null,i.a.createElement("b",null,i.a.createElement("u",null,"Interpreted Text"))),i.a.createElement("div",{className:a.interpretedTxt},m||"Converted text will appear here ..."))))},Et=t(284),bt=Object(z.a)((function(e){return{root:{position:"relative",padding:"5px 5px 5px 18px"},ico:{position:"absolute",left:-2,top:7,color:e.palette.primary.main,fontSize:16}}})),ht=function(e){var a=bt(),t=e.text,n=e.children;return i.a.createElement("li",{className:a.root},i.a.createElement(ct.a,{className:a.ico}),t||n)},gt=t(140),yt=t.n(gt),vt=Object(z.a)((function(e){return{title:{background:e.palette.primary.main,color:"#fff",padding:"5px 10px",position:"relative","& .ocico":{position:"absolute",right:15,top:4}},body:{border:"5px double ".concat(e.palette.primary.main),borderTop:"none",borderRadius:4,borderTopLeftRadius:0,borderTopRightRadius:0,padding:15}}})),Ot=function(e){var a=vt(),t=e.isOpen,n=e.title,r=e.children,o=e.className,c=Object(l.useState)(!!t),s=Object(Ae.a)(c,2),u=s[0],m=s[1];return i.a.createElement(He.a,{className:o},i.a.createElement("div",{className:a.title,onClick:function(){return m(!u)}},i.a.createElement("span",{className:"ocico"},u&&i.a.createElement(yt.a,null),!u&&i.a.createElement(Va.a,null)),n),i.a.createElement("div",{className:Object(Xe.a)(a.body,!u&&"hidden")},r))},wt=window.notify,St=Object(z.a)((function(e){return{liOfRVars:{borderBottom:"1px dotted ".concat(e.palette.primary.main),padding:"5px 10px",overflow:"hidden",textOverflow:"ellipsis",paddingRight:60,fontFamily:'"Courier New", Courier, monospace'}}})),Ct=Object(p.b)((function(e){return{rVars:e.wipTale.reactos?e.wipTale.reactos.vars:{}}}),(function(e){return{updateReactoVars:function(a){return e({type:"TALE_UPDATE_REACTO_VARS",payload:a})}}}))((function(e){var a=St(),t=e.rVars,n=e.updateReactoVars,r={name:"",val:"",userCustomizable:!1,helptext:""},o=Object(l.useState)(Object(y.a)({},r)),c=Object(Ae.a)(o,2),s=c[0],u=c[1],m=function(e){var a=e.target.name,t=e.target.value;("name"!==a||/^[A-Za-z0-9]{0,}$/g.test(t))&&u(Object(y.a)(Object(y.a)({},s),{},Object(j.a)({},a,t)))};return i.a.createElement(He.a,null,i.a.createElement("p",null,"Let's create some user customizable (or may be not!) reactos ..."),i.a.createElement(He.a,null,i.a.createElement(Ot,{title:"Create Reactos"},i.a.createElement("div",null,"Add a Reacto Variable"),i.a.createElement(dt.a,{label:"Name of the Variable",variant:"outlined",name:"name",fullWidth:!0,required:!0,size:"small",helperText:"Use only alphabets and numbers, no space",className:"mt-25",value:s.name,onChange:m}),i.a.createElement(dt.a,{label:"Value of the Variable",multiline:!0,name:"val",rows:"6",variant:"outlined",helperText:"Incase of customizable reacto this will be used as default/fallback value",required:!0,fullWidth:!0,className:"mt-25",value:s.val,onChange:m}),i.a.createElement(Ke.a,{control:i.a.createElement(Et.a,{checked:s.userCustomizable,onChange:function(e){u(Object(y.a)(Object(y.a)({},s),{},{userCustomizable:e.target.checked}))},name:"userCustomizable"}),label:"Reader customizable"}),i.a.createElement(dt.a,{label:"Hint for reader",multiline:!0,name:"helptext",rows:"2",variant:"outlined",required:!0,fullWidth:!0,helperText:"Give some hint to the reader, e.g. Enter a name for the main character",className:Object(Xe.a)("mt-25",!s.userCustomizable&&"hidden"),value:s.helptext,onChange:m}),i.a.createElement(fa.a,{container:!0,spacing:1},i.a.createElement(fa.a,{item:!0,xs:!0},i.a.createElement(Je.a,{variant:"outlined",color:"primary",className:"mt-15",fullWidth:!0,size:"small",onClick:function(){return u(Object(y.a)({},r))}},"Reset")),i.a.createElement(fa.a,{item:!0,xs:!0},i.a.createElement(Je.a,{variant:"outlined",color:"primary",className:"mt-15",fullWidth:!0,size:"small",onClick:function(){s.name&&s.val?(n(Object(y.a)(Object(y.a)({},t),{},Object(j.a)({},s.name,s))),u(Object(y.a)({},r)),wt("Reacto variable ".concat(s.name," added successfully ..."))):wt("Please fill both variable-name and variable-value fields")}},"Add"))))),i.a.createElement(He.a,{mt:1},i.a.createElement(Ot,{title:"View Reactos Variables"},i.a.createElement("div",null,"Current reacto variables"),i.a.createElement("ul",{className:"mt-15"},t&&Object.keys(t).map((function(e){return i.a.createElement("li",{key:e,className:a.liOfRVars},"((r.var.",e,"))")}))))))})),xt=Object(z.a)((function(e){return{modal:{maxWidth:600,width:"calc(100vw - 20px)",marginTop:100}}})),jt=Object(p.b)((function(e){return{isOpen:e.ui.isReactoModalOpen}}),(function(e){return{handleClose:function(){return e({type:"UI_REACTO_MODAL_CLOSE"})}}}))((function(e){var a=xt(),t=e.isOpen,n=e.handleClose,r=Object(l.useState)(0),o=Object(Ae.a)(r,2),c=o[0],s=o[1],u=Object(l.useState)(""),m=Object(Ae.a)(u,2),d=m[0],f=m[1];return i.a.createElement(na,Object.assign({title:"Reactos"},e,{isOpen:t,handleClose:n,className:a.modal}),i.a.createElement(He.a,null,i.a.createElement(He.a,{px:2,mb:2},"Check out the ",i.a.createElement("a",{href:"https://reacto.reactale.com/",target:"_blank",rel:"noopener noreferrer"},"reacto website")),i.a.createElement(at.a,{square:!0},i.a.createElement(tt.a,{value:c,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){return s(a)},centered:!0,"aria-label":"tabs to for View, try, create reactos"},i.a.createElement(nt.a,{label:"View"}),i.a.createElement(nt.a,{label:"Try"}),i.a.createElement(nt.a,{label:"Customize"}))),i.a.createElement(He.a,{className:0!==c?"hide":""},i.a.createElement(mt,{tryOut:function(e){f(e),s(1)}})),i.a.createElement(He.a,{className:1!==c?"hide":""},i.a.createElement(pt,{rTxt:d})),i.a.createElement(He.a,{className:2!==c?"hide":""},i.a.createElement(Ct,null))))})),Tt=window.notify,Nt=function(e){var a=e.isOpen,t=e.handleClose,n=e.expTaleContent,r=i.a.createRef();return i.a.createElement(na,{isOpen:a,handleClose:t,title:"Export Reactale"},i.a.createElement(pa.a,{variant:"body1",gutterBottom:!0},"Copy this text and paste it in a text file in case file download is not working (e.g. in mobile browsers)"),i.a.createElement(He.a,{my:3},i.a.createElement(dt.a,{label:"Outlined",variant:"outlined",value:n,fullWidth:!0,ref:r})),i.a.createElement(Je.a,{variant:"outlined",color:"primary",onClick:function(){return function(e){console.log(e);var a=e.current.getElementsByTagName("input").item(0);a.select(),a.setSelectionRange(0,999999999),document.execCommand("copy"),setTimeout((function(){Tt("Text copied to clipboard ...")}),0)}(r)}},"Copy Reactale Text"))},It=window.LZString,kt=function(e){var a=e.isOpen,t=e.handleClose,n=e.setForEditing,r=Object(l.useState)(""),o=Object(Ae.a)(r,2),c=o[0],s=o[1];return i.a.createElement(na,{isOpen:a,handleClose:t,title:"Import Reactale"},i.a.createElement(pa.a,{variant:"body1",gutterBottom:!0},"Import a previously exported Reactale file ",i.a.createElement("b",null,"OR"),' optionally you can paste the text from it if "file import" is not working in your browser'),i.a.createElement(He.a,{mt:2},i.a.createElement("form",{encType:"multipart/form-data"},i.a.createElement("input",{type:"file",accept:"text/txt",name:"files[]",size:"30",onChange:function(e){return function(e){var a=e.target.files[0];console.log(a);var t=new FileReader;t.onload=function(e){return s(e.target.result)},t.readAsText(a)}(e)}}))),i.a.createElement(He.a,{align:"center",my:1},i.a.createElement(pa.a,{variant:"h6",gutterBottom:!0},i.a.createElement("b",null,"OR"))),i.a.createElement(He.a,null,i.a.createElement(dt.a,{label:"Paste Content Here",multiline:!0,rows:"4",fullWidth:!0,variant:"outlined",value:c,onChange:function(e){return s(e.target.value)}})),i.a.createElement(He.a,{mt:2,align:"right"},i.a.createElement(Je.a,{size:"small",variant:"contained",color:"primary",onClick:function(){var e=JSON.parse(It.decompressFromEncodedURIComponent(c));n(e),s("")}},"Import")))},Lt=t(273),At=t(270),Rt=t(281),_t=t(274),Dt=t(61),Pt=t.n(Dt),Ut=window.notify,Wt=Object(z.a)((function(e){return{imgUploadSec:{display:"flex","& .img-preview":{height:90,width:150,border:"1px solid #bbb",borderRadius:4,flexGrow:1,marginRight:9,textAlign:"center",overflow:"hidden",padding:.5,"& img":{maxWidth:"100%",maxHeight:"100%"}},"& .btns":{display:"flex",flexDirection:"column",justifyContent:"space-evenly"}}}})),Mt=Object(p.b)((function(e){return{info:e.wipTale.info,userEmail:e.user.email}}),(function(e){return{typingVal:function(a,t,n){return function(e,a,t,n){("desiredUrl"!==a||/^[A-Za-z0-9-]{0,}$/g.test(t))&&e({type:"TALE_UPDATE_INFO",payload:Object(y.a)(Object(y.a)({},n),{},Object(j.a)({},a,t))})}(e,a,t,n)},updateImgUrl:function(a){return e(function(e){return window.showLoader(),function(a,t){var n=t().wipTale,r=(n.storyboard,Object(We.a)(n,["storyboard"]));r.info.imgUrl=e,console.log("tale.info.imgUrl = ",r.info.imgUrl),console.log("imgUrl = ",e),Te(re,r).then((function(e){console.log(e.data);var t=e.data,n=t.status,r=t.tale,l=t.msg;200===n?(Me("Image uploaded successfully"),r=JSON.parse(r),a({type:"TALE_SET_AS_WIP",payload:r})):Me(l)})).catch((function(e){return Me("Some error occured. Please try again later ...")})).finally((function(){return window.hideLoader()})),a({type:"TALE_CREATE"})}}(a))}}}))((function(e){var a=Wt(),t=e.info,n=e.typingVal,r=e.userEmail,o=(e.updateImgUrl,Object(l.useState)(null)),c=Object(Ae.a)(o,2),s=c[0],u=c[1],m=Object(l.useState)($),d=Object(Ae.a)(m,2),f=d[0],p=d[1];Object(l.useEffect)((function(){p(t.imgUrl?"/ups/banners/".concat(t.imgUrl):$)}),[t]);return i.a.createElement(He.a,{py:3},i.a.createElement(fa.a,{container:!0,spacing:2},i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(dt.a,{fullWidth:!0,variant:"outlined",value:t.name,label:"Name of the Tale",required:!0,onChange:function(e){return n("name",e.target.value,t)},InputProps:t.name.length<=0&&{endAdornment:i.a.createElement(Lt.a,{position:"end"},i.a.createElement(Pt.a,null))}})),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(Ve.a,{variant:"outlined",fullWidth:!0},i.a.createElement(At.a,{required:!0},"Genre"),i.a.createElement(Rt.a,{value:t.genre,fullWidth:!0,onChange:function(e){return n("genre",e.target.value,t)}},Se.map((function(e){return i.a.createElement(_t.a,{value:e,key:e},e)}))))),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(dt.a,{fullWidth:!0,variant:"outlined",value:t.tags,required:!0,label:"Tags",onChange:function(e){return n("tags",e.target.value,t)}})),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(Ve.a,{variant:"outlined",fullWidth:!0},i.a.createElement(At.a,{required:!0},"Language"),i.a.createElement(Rt.a,{value:t.lang,required:!0,label:"Language",fullWidth:!0,onChange:function(e){return n("lang",e.target.value,t)}},we.map((function(e){return i.a.createElement(_t.a,{value:e,key:e},e)}))))),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(dt.a,{fullWidth:!0,variant:"outlined",label:"Author Display Name",placeholder:"Original creator's name",value:t.authorDisplayName,helperText:"Write the name to display as author ...",onChange:function(e){return n("authorDisplayName",e.target.value,t)}})),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(dt.a,{fullWidth:!0,variant:"outlined",label:"Email",disabled:!0,value:r||"Please login"})),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},!t.storyUrl&&i.a.createElement(dt.a,{fullWidth:!0,variant:"outlined",label:"Custom URL",value:t.desiredUrl,helperText:"Only alphabets, numbers, hyphens (-) allowed. Can not be changed later",onChange:function(e){return n("desiredUrl",e.target.value,t)}}),t.storyUrl&&i.a.createElement(dt.a,{fullWidth:!0,variant:"outlined",label:"Custom URL",disabled:!0,value:"/"+t.storyUrl})),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3,className:Object(Xe.a)(a.imgUploadSec,!t.storyUrl&&"hide")},i.a.createElement("div",{className:"img-preview"},f&&i.a.createElement("img",{src:f})),i.a.createElement("div",{className:"btns"},i.a.createElement(Je.a,{variant:"outlined",color:"primary",onClick:function(){return document.getElementById("taleimgupload").click()}},"Select"),i.a.createElement(Je.a,{variant:"contained",color:"primary",onClick:function(){return function(e){if(!s)return Ut("Select an image first ...");window.showLoader();var a=new FormData;a.append("storybanner",s),a.append("storyUrl",t.storyUrl),a.append("email",r),Te(Ee,a).then((function(a){Ut(a.data.msg);var t=a.data.newFileName;t&&n("imgUrl",t,e)})).catch((function(e){return Ut("Some error occurred ...")})).finally((function(){return window.hideLoader()}))}(t)}},"Upload"),i.a.createElement("input",{id:"taleimgupload",type:"file",name:"storyimage",accept:"image/*",onChange:function(e){var a=e.target.files;console.log(a),t.storyUrl?a.length>0&&(u(a[0]),p(URL.createObjectURL(a[0]))):Ut("The tale must be saved online atleast once before uploading banner image")},className:"hide"}))),i.a.createElement(fa.a,{item:!0,xs:12},i.a.createElement(dt.a,{multiline:!0,rows:"4",fullWidth:!0,label:"Brief description",required:!0,variant:"outlined",value:t.description,onChange:function(e){return n("description",e.target.value,t)},InputProps:t.description.length<=100&&{endAdornment:i.a.createElement(Lt.a,{position:"end"},i.a.createElement(Pt.a,null))}}))))})),zt=t(275),Bt=Object(z.a)((function(e){return{choiceBox:{position:"relative",margin:e.spacing(1),flexGrow:1},selectChoice:{position:"absolute",top:-e.spacing(1),left:-e.spacing(1)},choiceText:{width:"100%","& > div":{paddingTop:30}},idTag:{fontSize:13,display:"inline-block",backgroundColor:"#eee",padding:"1px 5px",borderRadius:2,position:"absolute",top:e.spacing(.5),left:e.spacing(3.5)},btnPanel:{position:"absolute",top:0,right:0,zIndex:9,"& .ico":{boxSizing:"content-box",padding:"5px 7px",color:e.palette.primary.main,cursor:"pointer",borderRadius:"50%",verticalAlign:"middle",fontSize:16,display:"inline-block"},"& .ico:active":{backgroundColor:"#eee"}}}})),Ft=Object(p.b)(null,(function(e){return{typingChoiceText:function(a,t){return function(e,a,t){e({type:"CHOICE_UPDATE_TEXT",payload:{cID:a,value:t}})}(e,a,t)},handleSelection:function(a,t,n,r,l){return function(e,a,t,n,r){e({type:"STORYBOARD_SELECT_CHOICE",payload:{sbI:n,cID:a=t?a:""}}),e({type:"STORYBOARD_INSERT_AT",payload:{sbI:n,nextStID:r,isRemoveOnly:!t}})}(e,t,n,r,l)}}}))((function(e){var a=Bt(),t=e.c,n=e.stID,r=e.sbI;return t?i.a.createElement(He.a,{className:a.choiceBox},i.a.createElement("div",{className:a.idTag},i.a.createElement("span",null,"ID: ",t.id)),i.a.createElement("div",{className:a.btnPanel}),i.a.createElement(dt.a,{placeholder:"Enter choice text here",multiline:!0,rows:"3",variant:"outlined",className:a.choiceText,value:t.text,onChange:function(a){return e.typingChoiceText(t.id,a.target.value)}}),i.a.createElement(Et.a,{checked:e.isSelected,onChange:function(a){return e.handleSelection(n,t.id,a.target.checked,r,t.next)},value:"primary",className:a.selectChoice,inputProps:{"aria-label":"primary checkbox"}})):(console.log(" returning from Choice, as Choice is undefined... "),i.a.createElement(i.a.Fragment,null))})),Ht=t(32),Vt=t(33),Gt=t(92),Yt=t.n(Gt),Kt=Object(z.a)((function(e){return{root:{fontFamily:"Georgia, serif",fontSize:20,fontWeight:"bold",display:"inline-block",transition:"fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}}})),qt=function(e){var a=Kt(),t=e.className;return i.a.createElement("span",Object.assign({},e,{className:Object(Xe.a)(t,a.root)}),"((r))")},Jt=t(102),Xt=Object(z.a)((function(e){return{textField:{display:"flex",marginTop:e.spacing(2)},box:{border:"5px double ".concat(Jt.a[500]),borderRadius:4,position:"relative"},title:{border:"5px double ".concat(Jt.a[500]),position:"absolute",background:"#fff",padding:"0 5px",borderRadius:4,top:-20,left:8,fontSize:14,userSelect:"none",cursor:"default"},joiner:{position:"absolute",height:e.spacing(5),borderLeft:"5px double ".concat(Jt.a[500]),width:1,left:"50%",top:-45},choiceContainer:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"},addChoiceBtn:{alignSelf:"center",height:90,borderRadius:6,margin:"0 ".concat(e.spacing(1),"px"),textAlign:"center",fontSize:16,lineHeight:" 20px","& span":{display:"block"},"& svg":{fontSize:36}},idTag:{fontSize:14,display:"inline-block",backgroundColor:"#eee",padding:"2px 5px",borderRadius:2,"& .ico":{}},btnPanel:{position:"absolute",top:0,right:0,"& .ico":{boxSizing:"content-box",padding:"15px 8px",color:e.palette.primary.main,borderRadius:"50%",verticalAlign:"middle",fontSize:18,display:"inline-block",cursor:"default","&:hover":{transform:"scale(1.2)"},"&:active":{transform:"scale(.9)"}}}}})),Zt=Object(p.b)((function(e){return{choices:e.wipTale.choices}}),(function(e){return{typingStValue:function(a,t,n){return function(e,a,t,n){n({type:"STORYLET_UPDATE_FIELD",payload:{stID:e,fieldName:a,value:t}})}(a,t,n,e)},createAChoice:function(a){return e(ze(a))}}}))((function(e){var a=Xt(),t=e.st,n=e.sbI,r=e.sbItem,l=e.createAChoice,o=e.choices,c=e.openFSE,s=e.openReactoModal;return i.a.createElement("div",null,i.a.createElement(He.a,{className:a.box,px:1,pb:2,pt:2},0!==n&&i.a.createElement("span",{className:a.joiner}),i.a.createElement("span",{className:a.title},"Storylet"),i.a.createElement("div",{className:a.idTag},i.a.createElement("span",null,"ID: ",t.id)),i.a.createElement("div",{className:a.btnPanel},i.a.createElement(qt,{className:"ico",onClick:s}),i.a.createElement(Ht.a,{icon:Vt.c,className:"ico",title:"Preview Storylet",onClick:function(){return c(t,"PREVIEW")}}),i.a.createElement(Ht.a,{icon:Vt.f,className:"ico",title:"Full Screen Edit",onClick:function(){return c(t,"EDIT")}})),i.a.createElement("form",{noValidate:!0,autoComplete:"off"},i.a.createElement(dt.a,{label:"Storylet title",variant:"outlined",className:a.textField,value:t.title,onChange:function(a){return e.typingStValue(t.id,"title",a.target.value)}}),i.a.createElement(dt.a,{label:"Storylet body",multiline:!0,rows:"6",variant:"outlined",className:a.textField,value:t.text,onChange:function(a){return e.typingStValue(t.id,"text",a.target.value)}}))),i.a.createElement(He.a,{className:a.box,pt:2,pb:2,my:5},i.a.createElement("span",{className:a.joiner}),i.a.createElement("span",{className:a.title},"Choices"),i.a.createElement("div",{className:a.choiceContainer},t.choices&&t.choices.map((function(e){return i.a.createElement(Ft,{c:o[e],stID:t.id,sbI:n,isSelected:r.selectedCID===e,key:e})})),i.a.createElement(zt.a,{className:a.addChoiceBtn,variant:"extended",color:"primary",onClick:function(){return l(e.st.id)}},i.a.createElement(Yt.a,null),i.a.createElement("span",{className:"txt"},"Add Choice")))))})),$t=t(213),Qt=t(141),en=t.n(Qt),an=Object(z.a)((function(e){return{appBar:{position:"fixed","& .MuiToolbar-regular":{minHeight:45}},title:{flex:1},body:{padding:"45px 0 25px 0"}}})),tn=i.a.forwardRef((function(e,a){return i.a.createElement($t.a,Object.assign({direction:"up",ref:a},e))})),nn=function(e){var a=an(),t=e.isOpen,n=e.handleClose,r=e.title,l=e.children,o=e.className,c=e.btnText,s=e.btnClick,u=e.cancelText;return i.a.createElement("div",{className:Object(Xe.a)(o)},i.a.createElement(Ze.a,{fullScreen:!0,open:t,onClose:n,TransitionComponent:tn},i.a.createElement(B.a,{className:a.appBar},i.a.createElement(F.a,null,i.a.createElement(pa.a,{variant:"h6",className:a.title},r),c&&i.a.createElement(Je.a,{variant:"contained",onClick:s||n,size:"small",color:"secondary",startIcon:i.a.createElement(en.a,null)},c),i.a.createElement(Je.a,{color:"inherit",onClick:n,size:"small"},u||"Cancel"))),i.a.createElement("div",{className:a.body},l)))};var rn=function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},ln=window.notify,on=Object(z.a)((function(e){return{xScroller:{width:"100%",display:"flex",justifyContent:"space-between",padding:"0 5px"},formatterBtns:{paddingTop:5,marginBottom:5,color:e.palette.primary.main,overflowX:"auto",overflowY:"hidden","& .ico":{padding:"13px 5px",height:47,width:47,display:"inline-flex",alignItems:"center",justifyContent:"flex-end",cursor:"default","&:hover":{transform:"scale(1.2)"}},"& .ico.reacto":{padding:"13px 0"}},textField:{marginTop:20,"& .MuiInputBase-multiline":{display:"flex",flexDirection:"column",flexGrow:1},"& textarea":{}},editForm:{minHeight:"90vh",paddingTop:5},previewBody:{whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"justify",borderTop:"1px solid #ddd",paddingTop:15}}})),cn=Object(p.b)(null,(function(e){return{saveStValue:function(a,t,n){return e(function(e,a,t){return function(n){return n({type:"STORYLET_UPDATE_ALL_TEXT",payload:{stID:e,title:a,text:t}})}}(a,t,n))},saveChValue:function(a,t){return e(Be(a,t))}}}))((function(e){var a=on(),t=["EDIT","PREVIEW"],n=e.component,r=e.activeMode,o=e.handleClose,c=e.saveStValue,s=e.saveChValue,m=e.openReactoModal,d=n&&"S"===n.id[0]?"Storylet":"Choice",f=Object(l.createRef)(),p=Object(l.useState)(t[1]),E=Object(Ae.a)(p,2),b=E[0],h=E[1],g=Object(l.useState)(null),v=Object(Ae.a)(g,2),O=v[0],w=v[1];Object(l.useEffect)((function(){h(r)}),[r]),Object(l.useEffect)((function(){w(n)}),[n]);var S=function(){var e=f.current.elements.compText.value;if("Storylet"===d){var a=f.current.elements.compTitle.value;c(n.id,a,e),w(Object(y.a)(Object(y.a)({},O),{},{title:a,text:e}))}else"Choice"===d&&s(n.id,e)},C=function(e){t.includes(e)&&("PREVIEW"===e&&S(),h(e))},x=function(e){var a=document.getElementById("comptextareaid"),t=a.selectionStart,n=a.selectionEnd;if(t===n)return ln("Select some text first ...");var r=a.value,l="<b>",i="</b>";"ITALIC"===e?(l="<i>",i="</i>"):"STRIKETHRU"===e?(l="<s>",i="</s>"):"UNDERLINE"===e?(l="<u>",i="</u>"):"CENTER"===e&&(l="<c>",i="</c>"),f.current.elements.compText.value=r.substring(0,t)+l+r.substring(t,n)+i+r.substring(n),a.focus(),a.selectionStart=t,a.selectionEnd=n+l.length+i.length};return i.a.createElement(nn,Object.assign({title:b+" "+d},e,{btnText:"EDIT"===b?"Update":"",btnClick:function(){S(),o(),w(null)}}),i.a.createElement(u.a,{maxWidth:"md"},i.a.createElement(He.a,{className:Object(Xe.a)("EDIT"!==b&&"hide")},i.a.createElement("div",{className:a.formatterBtns},i.a.createElement("div",{className:a.xScroller},i.a.createElement(Ht.a,{icon:Vt.b,className:Object(Xe.a)("ico","Storylet"!==d&&"hide"),title:"Bold",onClick:function(){return x("BOLD")}}),i.a.createElement(Ht.a,{icon:Vt.d,className:Object(Xe.a)("ico","Storylet"!==d&&"hide"),title:"Italic",onClick:function(){return x("ITALIC")}}),i.a.createElement(Ht.a,{icon:Vt.h,className:Object(Xe.a)("ico","Storylet"!==d&&"hide"),title:"Underline",onClick:function(){return x("UNDERLINE")}}),i.a.createElement(Ht.a,{icon:Vt.g,className:Object(Xe.a)("ico","Storylet"!==d&&"hide"),title:"Strike Through",onClick:function(){return x("STRIKETHRU")}}),i.a.createElement(Ht.a,{icon:Vt.a,className:Object(Xe.a)("ico","Storylet"!==d&&"hide"),title:"Center",onClick:function(){return x("CENTER")}}),i.a.createElement(qt,{className:"ico reacto",onClick:m}),i.a.createElement(Ht.a,{icon:Vt.c,className:Object(Xe.a)("ico","Storylet"!==d&&"hide"),title:"Preview Storylet",onClick:function(){return C("PREVIEW")}}))),i.a.createElement("form",{noValidate:!0,autoComplete:"off",ref:f,className:Object(Xe.a)(a.editForm,"flex-full-height")},"Storylet"===d&&i.a.createElement(dt.a,{label:"Storylet title",variant:"outlined",defaultValue:O&&O.title,fullWidth:!0,size:"small",name:"compTitle"}),i.a.createElement(dt.a,{label:d+" body",multiline:!0,variant:"outlined",defaultValue:O&&O.text,fullWidth:!0,className:Object(Xe.a)(a.textField,"flex-full-height"),name:"compText",id:"comptextareaid"}))),i.a.createElement(He.a,{className:Object(Xe.a)("PREVIEW"!==b&&"hide")},(!O||O.text.trim().length<=0)&&i.a.createElement("div",null,"Preview will appear here ..."),O&&O.text.trim().length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:Object(Xe.a)(a.formatterBtns,"text-right","overflow-none")},i.a.createElement(Ht.a,{icon:Vt.f,className:Object(Xe.a)("ico","Storylet"!==d&&"hide"),title:"Full Screen Edit",onClick:function(){return C("EDIT")}})),i.a.createElement("div",{dangerouslySetInnerHTML:function(e){var a;return{__html:(a=window.rto.process(e),window.DOMPurify.sanitize(a,{ALLOWED_TAGS:Ce}))}}(O.text),className:a.previewBody})))))})),sn=Object(p.b)((function(e){return{storyboard:e.wipTale.storyboard,storylets:e.wipTale.storylets}}),(function(e){return{openReactoModal:function(){return e({type:"UI_REACTO_MODAL_OPEN"})}}}))((function(e){var a=Object(l.useState)({}),t=Object(Ae.a)(a,2),n=t[0],o=t[1],c=e.openReactoModal,s=e.storylets,u=e.storyboard,m=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.EDIT;o({component:e,mode:a,isVisible:!0})};return i.a.createElement(He.a,{py:3},u&&u.map((function(e,a){var t=s[e.stID];return i.a.createElement(Zt,{st:t,key:e.stID,sbI:a,sbItem:e,openFSE:m,openReactoModal:c})})),i.a.createElement(cn,{isOpen:n.isVisible,activeMode:n.mode,handleClose:function(){return o({})},component:n.component,openReactoModal:c}))})),un={exportTale:{desc:"Export this reactale",features:["Export Reactale as both Text and File","Exported Reactale can be imported and worked on","Can be shared easily with reviewers and collaborator","Works offline (Internet not required)","People can see only if you share this file with them"]},saveLocal:{desc:"Save reactale in this device",features:["Will be saved in this device's memory","Will not be available in other devices","Great choice if you use this device only for writing Reactale","Works offline (Internet not required)","ANYONE using this device can see your story"]},saveOnline:{desc:"Save this reactale online",features:["Will be saved online in your logged in account","Availabe accross any device you login from","Great choice if you work from multiple devices","Internet is mandatory and must be logged in","People can see only when you publish your story"]}},mn=Object(z.a)((function(e){return{cardHeaders:{fontWeight:500,margin:0,textAlign:"center",color:e.palette.primary.main},cardContainer:{marginTop:e.spacing(3)},cardInfo:{padding:"0 10px",marginTop:3},pubSec:{borderTop:"1px solid ".concat(e.palette.primary.main),marginTop:60,paddingTop:5},btnContainer:{display:"flex",justifyContent:"flex-end"}}})),dn=Object(p.b)((function(e){return{tale:e.wipTale}}),(function(e){return{publish:function(){return e({type:"TALE_PUBLISH"})},unpublish:function(){return e({type:"TALE_UNPUBLISH"})}}}))((function(e){var a=mn(),t=e.exportWIPTale,r=e.saveTaleOnline,l=e.saveTaleLocal,o=e.saveDefault,c=e.markSaveDefault,s=e.tale,m=e.publish,d=e.unpublish,f=window.notify;return i.a.createElement(He.a,{pb:10},i.a.createElement(u.a,{maxWidth:"md"},i.a.createElement(fa.a,{container:!0,spacing:2},i.a.createElement(fa.a,{item:!0,xs:12,md:4,className:a.cardContainer},i.a.createElement(_a,null,i.a.createElement("h2",{className:a.cardHeaders},"Save Offline"),i.a.createElement("span",{className:a.cardInfo},un.saveLocal.desc),i.a.createElement(He.a,{my:1},i.a.createElement(Ke.a,{control:i.a.createElement(Et.a,{checked:o===n.OFFLINE,onChange:function(){return c(n.OFFLINE)},name:"OFFLINE"}),label:"Set as default"})),i.a.createElement("div",{className:"fillmid"},i.a.createElement("h3",{className:a.cardHeaders},"Pros & Cons"),i.a.createElement("ul",{className:""},un.saveLocal.features.map((function(e){return i.a.createElement(ht,{key:e},e)})))),i.a.createElement(Je.a,{variant:"contained",color:"primary",onClick:l},"Save Offline"))),i.a.createElement(fa.a,{item:!0,xs:12,md:4,className:a.cardContainer},i.a.createElement(_a,null,i.a.createElement("h2",{className:a.cardHeaders},"Save Online"),i.a.createElement("span",{className:a.cardInfo},un.saveOnline.desc),i.a.createElement(He.a,{my:1},i.a.createElement(Ke.a,{control:i.a.createElement(Et.a,{checked:o===n.ONLINE,onChange:function(){return c(n.ONLINE)},name:"ONLINE"}),label:"Set as default"})),i.a.createElement("div",{className:"fillmid"},i.a.createElement("h3",{className:a.cardHeaders},"Pros & Cons"),i.a.createElement("ul",{className:""},un.saveOnline.features.map((function(e){return i.a.createElement(ht,{key:e},e)})))),i.a.createElement(Je.a,{variant:"contained",color:"primary",onClick:r},"Save Online"))),i.a.createElement(fa.a,{item:!0,xs:12,md:4,className:a.cardContainer},i.a.createElement(_a,null,i.a.createElement("h2",{className:a.cardHeaders},"Export Reactale"),i.a.createElement("span",{className:a.cardInfo},un.exportTale.desc),i.a.createElement(He.a,{my:1},i.a.createElement(Ke.a,{control:i.a.createElement(Et.a,{checked:o===n.EXPORT,onChange:function(){return c(n.EXPORT)},name:"EXPORT"}),label:"Set as default"})),i.a.createElement("div",{className:"fillmid"},i.a.createElement("h3",{className:a.cardHeaders},"Pros & Cons"),i.a.createElement("ul",{className:""},un.exportTale.features.map((function(e){return i.a.createElement(ht,{key:e},e)})))),i.a.createElement(Je.a,{variant:"contained",color:"primary",onClick:t},"Export"))))),i.a.createElement(He.a,{className:Object(Xe.a)(!s.info.storyUrl&&"hidden",a.pubSec)},i.a.createElement("h2",null,"Publish / Unpublish"),i.a.createElement("p",null,"Your story will be visible to others only when you publish it. You can publish / unpublish your story anytime you want after your first online save."),i.a.createElement("div",{className:a.btnContainer},i.a.createElement(Je.a,{variant:"contained",color:"primary",className:"",onClick:function(){if(s.info.storyUrl){var e={storyUrl:s.info.storyUrl,isPublished:!s.isPublished};Te(se,e).then((function(a){var t=a.data,n=t.status,r=t.msg;200===n?e.isPublished?(m(),f("Published successfully")):(d(),f("Unpublished successfully")):f(r)})).catch((function(e){f("Some error occured"),console.log(e)}))}else f("The story must be saved online once before publishing")}},!s.isPublished&&i.a.createElement(i.a.Fragment,null,"Publish"),s.isPublished&&i.a.createElement(i.a.Fragment,null,"Un-publish")))))})),fn=t(95),pn=t.n(fn),En=t(93),bn=t.n(En),hn=t(94),gn=t.n(hn),yn=t(71),vn=t.n(yn),On=t(142),wn=t.n(On),Sn=Object(z.a)((function(e){return{root:{position:"fixed",top:79,right:0,zIndex:9,"& ul":{display:"flex",flexDirection:"column",borderTopLeftRadius:4,borderBottomLeftRadius:4,overflow:"hidden",transition:"all 300ms linear",maxHeight:24,opacity:.7,"&.visible":{maxHeight:180,opacity:.9},"& li":{color:"#fff",background:e.palette.primary.main,borderBottom:"1px solid #fff",height:36,width:36,display:"inline-flex",justifyContent:"center",alignItems:"center"}}}}})),Cn=function(e){var a=Sn(),t=Object(l.useState)(!1),n=Object(Ae.a)(t,2),r=n[0],o=n[1],c=e.openImportModal,s=e.previewTale,u=e.doSaveDefault,m=e.goToTalesFlow,d=function(e){o(!1),e()};return i.a.createElement("div",{className:a.root},i.a.createElement("ul",{className:Object(Xe.a)(r&&"visible")},i.a.createElement("li",{title:"Toggle Toolbelt",onClick:function(){return o(!r)}},i.a.createElement(wn.a,null)),i.a.createElement("li",{title:"Import",onClick:function(){return d(c)}},i.a.createElement(bn.a,null)),i.a.createElement("li",{title:"Preview",onClick:function(){return d(s)}},i.a.createElement(gn.a,null)),i.a.createElement("li",{title:"Save (default)",onClick:function(){return d(u)}},i.a.createElement(vn.a,null)),i.a.createElement("li",{title:"TalesFlow",onClick:function(){return d(m)}},i.a.createElement("span",{className:"talesflowicon"},i.a.createElement(pn.a,null)))))},xn=Object(z.a)((function(e){return{root:{marginBottom:25,"& ul":{display:"flex",justifyContent:"center","& li":{display:"flex",flexDirection:"column",alignItems:"center",width:70,"& svg":{width:40,height:40,color:e.palette.primary.main,boxShadow:"0 0 5px 2px #ababab",borderRadius:4,marginBottom:9,padding:8},"& .label":{fontSize:14}},"& li:hover":{transform:"scale(1.1)"}}}}})),jn=function(e){var a=xn(),t=e.openImportModal,n=e.previewTale,r=e.doSaveDefault,l=e.goToTalesFlow;return i.a.createElement("div",{className:a.root},i.a.createElement("ul",null,i.a.createElement("li",{title:"Import",onClick:t},i.a.createElement(bn.a,null),i.a.createElement("span",{className:"label"},"Import")),i.a.createElement("li",{title:"Preview",onClick:n},i.a.createElement(gn.a,null),i.a.createElement("span",{className:"label"},"Preview")),i.a.createElement("li",{title:"Save (default)",onClick:r},i.a.createElement(vn.a,null),i.a.createElement("span",{className:"label"},"Save")),i.a.createElement("li",{title:"TalesFlow",onClick:l},i.a.createElement("span",{className:"talesflowicon"},i.a.createElement(pn.a,null)),i.a.createElement("span",{className:"label"},"TalesFlow"))))},Tn=t(96),Nn=t.n(Tn),In=function(){var e=Object(Na.a)(Ta.a.mark((function e(a,t){return Ta.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Te(pe,{email:a,partialPrefs:t}));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),kn=window,Ln=kn.notify,An=kn.showLoader,Rn=kn.hideLoader,_n=function(e){var a=e.email,t=e.pswd;return An(),function(e){Te(le,{email:a,pswd:t}).then((function(a){var t,n=a.data,r=n.status,l=n.user,i=n.tok,o=n.msg;200===r?(t={user:l,tok:i},ye["SESSION_AUTH_DATA"]=t,ve(),e({type:"USER_UPDATE",payload:{user:l}}),e({type:"UI_LOGIN_MODAL_CLOSE"}),Ln(o)):Ln(o)})).catch((function(e){console.log(e),Ln("Sign in failed...")})).finally((function(){return Rn()}))}},Dn=Nn.a.debounce((function(e,a){In(e,a)}),5e3),Pn=window,Un=Pn.notify,Wn=Pn.LZString,Mn=Pn.showLoader,zn=Pn.hideLoader,Bn=Object(p.b)((function(e){return{_wipTale:e.wipTale,_authorEmail:e.user.email,_userPrefs:e.user.prefs}}),(function(e){return{setTaleAsWIP:function(a){return e(Fe(a))},updateUserPrefs:function(a){return e(function(e){return function(a,t){var n=t().user.email;n&&Dn(n,e),a({type:"USER_PREFS_UPDATE",payload:e})}}(a))}}}))((function(e){var a=e.pageTitle,t=e.isLocalEdit,r=e.setTaleAsWIP,o=e.history,c=e._wipTale,s=e._authorEmail,u=e._userPrefs,m=e.updateUserPrefs,d=Object(l.useState)(0),f=Object(Ae.a)(d,2),p=f[0],E=f[1],b=Object(l.useState)(!1),h=Object(Ae.a)(b,2),g=h[0],y=h[1],v=Object(l.useState)(""),O=Object(Ae.a)(v,2),w=O[0],S=O[1],C=Object(l.useState)(!1),x=Object(Ae.a)(C,2),j=x[0],T=x[1],N=function(e){return o.push(e)},I=function(){c.storyboard;return Object(We.a)(c,["storyboard"])},k=function(){if(D()){var e=I(),a=Wn.compressToEncodedURIComponent(JSON.stringify(e));!function(e,a){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+a),t.setAttribute("download",e),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}("".concat(e.info.name.replace(/\s+/g,"-"),"-").concat(e.id,".rtl"),a),S(a),T(!0)}},L=function(e,a){return!!D()&&(function(e){var a=ra();a[e.id]=e,window.localStorage.setItem("allReactales",JSON.stringify(a))}(a||I()),Un("Successfully saved in device memory"),!0)},A=function(){var e=Object(Na.a)(Ta.a.mark((function e(){var a,n;return Ta.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D()){e.next=2;break}return e.abrupt("return");case 2:if(s){e.next=5;break}return Un("Please login to save online..."),e.abrupt("return");case 5:(a=I()).info.authorEmail=s,n=!1,a.info.storyUrl||(n=!0),Mn(),Te(re,a).then((function(e){var a=e.data,l=a.status,i=a.submittedTale,c=a.msg;200===l?(Un("Tale saved online successfully..."),console.log("Setting as WIP",i),i.info.tags=i.info.tags.join(", "),r(i),console.log("isLocalEdit = ",t),t&&(console.log("Also saving in local tale =",i),L(0,i)),n&&o.push("/edit-tale/".concat(i.info.storyUrl))):(console.log("most probably some error occurred"),Un(c))})).catch((function(e){console.log(e)})).finally((function(){return zn()}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){u.defaultSave===n.OFFLINE?L():u.defaultSave===n.ONLINE?A():u.defaultSave===n.EXPORT&&k()},_=function(){if(L()){var e=I();N("/preview/".concat("__local__").concat(e.id))}},D=function(e){var a=(e||I()).info,t=a.name,n=a.description,r=a.genre,l=a.lang,i=a.tags;return!!(t&&n&&r&&l&&i)||(Un("Fill all the mandatory fields viz. name, description, genre, language, tags"),!1)};return i.a.createElement(He.a,{py:2},i.a.createElement(pa.a,{variant:"h4",component:"h1"},a," Reactale"),i.a.createElement(He.a,{mt:2,mb:2,className:"flex-space-between"},i.a.createElement(pa.a,{variant:"subtitle1"},a," a Reactale or import one (using the right hand menu) to edit it.")),i.a.createElement(Cn,{openImportModal:function(){return y(!0)},previewTale:_,doSaveDefault:R,goToTalesFlow:function(){return N("/tales-flow")}}),i.a.createElement(jn,{openImportModal:function(){return y(!0)},previewTale:_,doSaveDefault:R,goToTalesFlow:function(){return N("/tales-flow")}}),i.a.createElement(at.a,{square:!0},i.a.createElement(tt.a,{value:p,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){E(a)},centered:!0,"aria-label":"tabs to create the story"},i.a.createElement(nt.a,{label:"Intro"}),i.a.createElement(nt.a,{label:"Body"}),i.a.createElement(nt.a,{label:"Finish"}))),i.a.createElement(He.a,{className:0!==p?"hide":""},i.a.createElement(Mt,null)),i.a.createElement(He.a,{className:1!==p?"hide":""},i.a.createElement(sn,null)),i.a.createElement(He.a,{className:2!==p?"hide":""},i.a.createElement(dn,{exportWIPTale:k,saveTaleOnline:A,saveTaleLocal:L,markSaveDefault:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.OFFLINE;return m({defaultSave:e})},saveDefault:u.defaultSave||n.OFFLINE})),i.a.createElement(kt,{isOpen:g,handleClose:function(){return y(!1)},setForEditing:function(e){r(e),y(!1)}}),i.a.createElement(Nt,{isOpen:j,handleClose:function(){return T(!1)},expTaleContent:w}),i.a.createElement(jt,null))})),Fn=Object(p.b)((function(e){return{_id:e.wipTale.id}}),(function(e){return{createNewTale:function(){return e((function(e,a){e({type:"TALE_CREATE"})}))}}}))((function(e){var a=e.createNewTale,t=e.history,n=e._id;return Object(l.useEffect)((function(){return document.title="Create Tale | "+xe,n||a(),window.hideLoader(),function(){console.log("Leaving Story Create Page... Now is a good time to save changes so far...")}}),[a,n]),i.a.createElement(Bn,{pageTitle:"Create",history:t})})),Hn=window.notify,Vn=Object(p.b)((function(e){return{_storyUrl:e.wipTale.info.storyUrl}}),(function(e){return{setTaleAsWIP:function(a){return e(Fe(a))}}}))((function(e){var a=Object(l.useState)(!1),t=Object(Ae.a)(a,2),n=t[0],r=t[1],o=e.setTaleAsWIP,c=e._storyUrl,s=e.match,u=e.history;return Object(l.useEffect)((function(){document.title="Edit Tale | "+xe;var e=s.params.id;if("current"===e)window.hideLoader();else if(e.indexOf("__local__")>=0){r(!0),e=e.trim().replace("__local__","");var a=la(e);o(a),window.hideLoader()}else{if(c===e)return window.hideLoader();window.showLoader(),Ie(ae,[e]).then((function(e){console.log(e.data);var a=e.data,t=a.status,n=a.tale,r=a.msg;200===t?(console.log("calling setTaleAsWIP online tale",n),o(n)):Hn(r)})).catch((function(e){console.log(e)})).finally((function(){return window.hideLoader()}))}return function(){console.log("Leaving Story Edit Page... Now is a good time to save changes so far...")}}),[o,c,s]),i.a.createElement(Bn,{pageTitle:"Edit",isLocalEdit:n,history:u})})),Gn=t(143),Yn=t.n(Gn),Kn=t(145),qn=t.n(Kn),Jn=t(144),Xn=t.n(Jn),Zn=Object(z.a)((function(e){return{panel:{width:40,backgroundImage:"linear-gradient(".concat(e.palette.primary.main,", ").concat(e.palette.primary.dark,")"),position:"absolute",left:0,top:50,height:"calc(100vh - 60px)",overflow:"auto"},btnPane:{color:"#fff",padding:"".concat(e.spacing(2),"px 0"),"& li":{height:44,display:"flex",justifyContent:"center",alignItems:"center"},"& li+li":{borderTop:"1px solid #fff"},"& li:active":{backgroundColor:za.a.A400},"& li svg":{fontSize:27}},fa:{fontSize:"22px !important"},autoMagic:{transform:"rotate(-90deg)"},toggleJStick:{}}})),$n=function(e){var a=Zn(),t=e.history,n=e.deleteComponent,r=e.paintFlowboard,l=e.toggleJStick,o=e.openFSE,c=e.openCreateComponent;return i.a.createElement(He.a,{className:a.panel},i.a.createElement("ul",{className:a.btnPane},i.a.createElement("li",{title:"Back to Editor",onClick:function(){return e="/edit-tale/current",t.push(e);var e}},i.a.createElement(Yn.a,null)),i.a.createElement("li",{title:"Add component",onClick:c},i.a.createElement(Yt.a,null)),i.a.createElement("li",{title:"Edit component",onClick:o},i.a.createElement(Ht.a,{icon:Vt.f,className:a.fa})),i.a.createElement("li",{title:"View component",onClick:function(e){return o(e,"PREVIEW")}},i.a.createElement(Ht.a,{icon:Vt.c,className:a.fa})),i.a.createElement("li",{title:"Toggle joystick",onClick:l},i.a.createElement(Xn.a,{className:a.toggleJStick})),i.a.createElement("li",{title:"Auto format",onClick:r},i.a.createElement(Ht.a,{icon:Vt.e,className:Object(Xe.a)(a.fa,a.autoMagic)})),i.a.createElement("li",{title:"Increase draw area"},i.a.createElement(qn.a,null)),i.a.createElement("li",{title:"Delete selected",onClick:n},i.a.createElement(qa.a,null))))},Qn=t(146),er=t.n(Qn),ar=t(147),tr=t.n(ar),nr=t(97),rr=t.n(nr),lr=t(98),ir=t.n(lr),or=Object(z.a)((function(e){return{container:{position:"absolute"},btn:{position:"absolute",fontSize:30,backgroundColor:za.a[100],borderRadius:6,"&:active":{backgroundColor:za.a[300]}},left:{left:0,top:0},right:{left:60,top:0},up:{left:30,top:-30},down:{left:30,top:30}}})),cr=function(e){var a=or(),t=e.moveLeft,n=e.moveRight,r=e.moveUp,l=e.moveDown;return i.a.createElement("div",{className:a.container},i.a.createElement(er.a,{className:Object(Xe.a)(a.btn,a.left),onClick:t}),i.a.createElement(tr.a,{className:Object(Xe.a)(a.btn,a.right),onClick:n}),i.a.createElement(rr.a,{className:Object(Xe.a)(a.btn,a.up),onClick:r}),i.a.createElement(ir.a,{className:Object(Xe.a)(a.btn,a.down),onClick:l}))},sr=Object(z.a)((function(e){return{cg:{transform:"translate(100px, 100px)"},knot:{fill:za.a[500],strokeWidth:1,stroke:za.a[500]},selectedKnot:{strokeWidth:3,stroke:"#000"},selectedEl:{stroke:"#00f"},rect:{fill:"#fff",strokeWidth:1,stroke:e.palette.primary.main},selectedST:{"& rect":{fill:za.a[500],stroke:za.a[500]},"& text":{fill:"#fff"}},title:{fontSize:14},stid:{fontSize:14,fill:"#000"}}})),ur=function(e){var a=sr(),t=e.stid,n=e.title,r=e.transformStyle,l=e.start,o=e.selectedObj,c=e.handleSelection,s=e.handleMouseDown,u=e.handleMouseUp,m=e.handleMouseMove,d=function(e,a){e.stopPropagation(),c(t,a)};return i.a.createElement("g",{id:t,className:a.cg,style:r,onMouseDown:function(e){return s(e,t)},onMouseUp:function(e){return u(e)},onMouseMove:function(e){return m(e)}},t===l&&i.a.createElement("text",{x:"55",y:"-3",fill:"blue"},"START"),t!==l&&i.a.createElement("circle",{className:Object(Xe.a)(a.knot,o.id===t&&"IN"===o.type&&a.selectedKnot),cx:75,cy:-3,r:6,onClick:function(e){return d(e,"IN")}}),i.a.createElement("circle",{className:Object(Xe.a)(a.knot,o.id===t&&"OUT"===o.type&&a.selectedKnot),cx:75,cy:53,r:6,onClick:function(e){return d(e,"OUT")}}),i.a.createElement("g",{className:Object(Xe.a)(o.id===t&&"ST"===o.type&&a.selectedST),onClick:function(e){return d(e,"ST")}},i.a.createElement("rect",{className:a.rect,width:150,height:50}),i.a.createElement("text",{x:"5",y:"15",className:a.title},n.substr(0,20)||"Click Edit to add text"),i.a.createElement("text",{x:"5",y:"30",className:a.title},n.substr(20,20)),i.a.createElement("text",{x:"5",y:"45",className:a.stid},t)))},mr=Object(z.a)((function(e){return{connector:{strokeWidth:4,stroke:za.a[200]},cid:{fontSize:16,fontWeight:"bold",fill:za.a[500]},selectedConnector:{"& line":{stroke:za.a[900]},"& text":{fill:"#000"}}}})),dr=function(e){var a=mr(),t=e.c,n=e.selectedObj,r=e.handleSelection;return i.a.createElement("g",{className:Object(Xe.a)(t.cid===n.id&&"CH"===n.type&&a.selectedConnector),onClick:function(e){e.stopPropagation(),r(t.cid,"CH")}},i.a.createElement("line",{id:t.id,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,className:a.connector}),i.a.createElement("text",{className:a.cid,x:(t.x1+t.x2)/2,y:(t.y1+t.y2)/2},t.cid))},fr=Object(z.a)((function(e){return{modelST:{height:70,border:"2px solid ".concat(e.palette.primary.main),padding:e.spacing(1),textAlign:"center",fontSize:14,display:"flex",flexDirection:"column",justifyContent:"center",borderRadius:4},modelCon:{height:50,display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center","& .con":{height:1,borderTop:"2px dashed ".concat(e.palette.primary.main)}},btnPanel:{display:"flex",marginTop:e.spacing(2),"& button":{flex:1},"& button+button":{marginLeft:e.spacing(2)}}}})),pr=function(e){var a=fr(),t=e.fromStID,n=e.toStID,r=e.type,o=e.text,c=e.handleSave,s=e.handleClose,u=Object(l.useState)(""),m=Object(Ae.a)(u,2),d=m[0],f=m[1];Object(l.useEffect)((function(){return f(o)}),[o]);var p=r+" Choice";return i.a.createElement(na,Object.assign({},e,{title:p}),i.a.createElement(He.a,{mb:3,mt:1},i.a.createElement(fa.a,{container:!0},i.a.createElement(fa.a,{item:!0,xs:!0},i.a.createElement("div",{className:a.modelST},"Storylet ",t)),i.a.createElement(fa.a,{item:!0,xs:!0,className:a.modelCon},i.a.createElement("span",null,"to"),i.a.createElement("div",{className:"con"})),i.a.createElement(fa.a,{item:!0,xs:!0},i.a.createElement("div",{className:a.modelST},"Storylet ",n)))),i.a.createElement(dt.a,{label:"Choice Text",value:d,onChange:function(e){return f(e.target.value)},variant:"outlined",fullWidth:!0}),i.a.createElement(He.a,{className:a.btnPanel},i.a.createElement(Je.a,{variant:"outlined",color:"primary",onClick:s},"Cancel"),i.a.createElement(Je.a,{variant:"contained",color:"primary",onClick:function(){return c(t,n,d,r)}},"Done")))},Er=window.notify,br=Object(z.a)((function(e){return{btnPanel:{display:"flex",marginTop:e.spacing(2),"& button":{flex:1},"& button+button":{marginLeft:e.spacing(2)}}}})),hr={compType:"",fromSTID:"",toSTID:""},gr=function(e){var a=br(),t=e.handleClose,n=e.storylets,r=e.isOpen,o=e.openEditChoiceModal,c=e.createNewChoice,s=Object(l.useState)(hr),u=Object(Ae.a)(s,2),m=u[0],d=u[1];Object(l.useEffect)((function(){d(hr)}),[r]);var f=function(e){var a=e.target,t=a.name,n=a.value;d(Object(y.a)(Object(y.a)({},m),{},Object(j.a)({},t,n)))};return i.a.createElement(na,Object.assign({},e,{title:"Create a Component"}),i.a.createElement(He.a,{mb:3,mt:1},i.a.createElement(Ve.a,{variant:"outlined",className:"flex"},i.a.createElement(At.a,{id:"select-comp-type"},"Select type"),i.a.createElement(Rt.a,{labelId:"select-comp-type",value:m.compType,onChange:f,label:"Component Type",name:"compType",fullWidth:!0,size:"small"},i.a.createElement(_t.a,{value:""},i.a.createElement("em",null,"None")),i.a.createElement(_t.a,{value:"ST"},"Storylet"),i.a.createElement(_t.a,{value:"CH"},"Choice"))),i.a.createElement(Ve.a,{variant:"outlined",className:"flex mt-15"},i.a.createElement(At.a,{id:"select-from-storylet"},"From storylet"),i.a.createElement(Rt.a,{labelId:"select-from-storylet",value:m.fromSTID,onChange:f,label:"From storylet",name:"fromSTID",fullWidth:!0,size:"small"},i.a.createElement(_t.a,{value:""},i.a.createElement("em",null,"None")),Object.values(n).map((function(e){return i.a.createElement(_t.a,{key:e.id,value:e.id},"".concat(e.id," - ").concat(e.title))})))),"CH"===m.compType&&i.a.createElement(Ve.a,{variant:"outlined",className:"flex mt-15"},i.a.createElement(At.a,{id:"select-to-storylet"},"To storylet"),i.a.createElement(Rt.a,{labelId:"select-to-storylet",value:m.toSTID,onChange:f,label:"To storylet",name:"toSTID",fullWidth:!0,size:"small"},i.a.createElement(_t.a,{value:""},i.a.createElement("em",null,"None")),Object.values(n).map((function(e){return i.a.createElement(_t.a,{key:e.id,value:e.id},"".concat(e.id," - ").concat(e.title))}))))),i.a.createElement(He.a,{className:a.btnPanel},i.a.createElement(Je.a,{variant:"outlined",color:"primary",onClick:t},"Cancel"),i.a.createElement(Je.a,{variant:"contained",color:"primary",onClick:function(e){if(m.compType&&m.fromSTID&&("CH"!==m.compType||m.toSTID))return"CH"===m.compType?m.fromSTID===m.toSTID?void Er("FROM storylet and TO storylet cannot be same ..."):(t(),void o(m.fromSTID,m.toSTID)):void("ST"===m.compType&&(c(m.fromSTID),t()));Er("Please fill all the fields ...")}},"Create")))};function yr(e,a){return function(e,a){var t=0,n={},r=Object.values(e).reduce((function(e,a){return e>a.length?e:a.length}),0),l=150*r+50*(r-1);for(;++t,e[t];){var i=e[t].length;if(i<r)for(var o=(l-150*i)/(i+1),c=0;c<e[t].length;c++){var s=e[t][c];n[s]={id:s},!a&&n[s].x&&n[s].y||(n[s].x=150*c+(c+1)*o+20,n[s].y=130*(t-1)+30)}else for(var u=0;u<e[t].length;u++){var m=e[t][u];n[m]={id:m},!a&&n[m].x&&n[m].y||(n[m].x=150*u+50*u+20,n[m].y=130*(t-1)+30)}}return function(e){for(var a in e)e[a].transformStyle=vr(e[a])}(n),n}(function(e,a){var t,n={},r=function(e,a){var t=Object(C.a)(e);for(var n in a){var r=t.indexOf(a[n].next);r>-1&&t.splice(r,1)}return t}(Object.keys(e),a),l=function t(r,l){n[l]=n[l]||[],n[l].push(r.id);var i,o=Object(x.a)(r.choices);try{for(o.s();!(i=o.n()).done;){var c=i.value,s=a[c];t(e[s.next],l+1)}}catch(u){o.e(u)}finally{o.f()}},i=Object(x.a)(r);try{for(i.s();!(t=i.n()).done;){var o=t.value,c=Object.keys(n).length+1;l(e[o],c)}}catch(h){i.e(h)}finally{i.f()}var s,u=[],m=Object.keys(n).sort().reverse(),d=Object(x.a)(m);try{for(d.s();!(s=d.n()).done;){var f=s.value;n[f]=Array.from(new Set(n[f]));var p,E=Object(x.a)(n[f]);try{for(E.s();!(p=E.n()).done;){var b=p.value;u.indexOf(b)>-1?n[f].splice(n[f].indexOf(b),1):u.push(b)}}catch(h){E.e(h)}finally{E.f()}}}catch(h){d.e(h)}finally{d.f()}return n}(e,a),!0)}function vr(e){return{transform:"matrix(1, 0, 0, 1, "+e.x+", "+e.y+")"}}var Or,wr,Sr=window,Cr=Sr.notify,xr=Sr.hideLoader,jr="CREATE_COMPONENT",Tr=Object(z.a)((function(e){return{outerContainer:{position:"relative",marginLeft:35,paddingTop:7,height:"calc(100vh - 100px)"},svgContainer:{border:"7px double ".concat(e.palette.primary.main),height:"100%",overflow:"auto",borderRadius:e.spacing(1)},mainSVG:{height:2e3,minWidth:"100%",width:2e3,"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none",userSelect:"none",borderRadius:15,"& *":{"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none",userSelect:"none"}},joystick:{position:"absolute",bottom:83,left:30}}})),Nr=Object(p.b)((function(e){return{start:e.wipTale.start,storylets:e.wipTale.storylets,choices:e.wipTale.choices}}),(function(e){return{createNewTale:function(){return e((function(e,a){e({type:"TALE_CREATE"})}))},initStoryboard:function(){return e({type:"STORYBOARD_INITIALIZE"})},deleteStorylet:function(a){return e({type:"STORYLET_DELETE",payload:a})},deleteChoice:function(a){return e({type:"CHOICE_DELETE",payload:a})},createNewChoice:function(a,t,n){return e(ze(a,t,n))},updateChoiceText:function(a,t){return e(Be(a,t))}}}))((function(e){var a=Tr(),t=e.storylets,n=e.choices,r=e.start,o=e.history,c=e.createNewTale,s=e.initStoryboard,u=e.deleteStorylet,m=e.deleteChoice,d=e.createNewChoice,f=e.updateChoiceText,p=Object(l.useState)({}),E=Object(Ae.a)(p,2),b=E[0],h=E[1],g=Object(l.useState)({}),v=Object(Ae.a)(g,2),O=v[0],w=v[1],S=Object(l.useState)(!1),C=Object(Ae.a)(S,2),T=C[0],N=C[1],I=Object(l.useState)(""),k=Object(Ae.a)(I,2),L=k[0],A=k[1],R=Object(l.useState)({x:0,y:0}),_=Object(Ae.a)(R,2),D=_[0],P=_[1],U=Object(l.useState)({id:"",type:""}),W=Object(Ae.a)(U,2),M=W[0],z=W[1],B=Object(l.useState)({}),F=Object(Ae.a)(B,2),H=F[0],V=F[1],G=Object(l.useState)(""),Y=Object(Ae.a)(G,2),K=Y[0],q=Y[1],J=Object(l.useState)({}),X=Object(Ae.a)(J,2),Z=X[0],$=X[1];Object(l.useEffect)((function(){document.title="TalesFlow | "+xe}),[]);var Q=Object(l.useCallback)((function(){var e=yr(t,n),a=function(e,a,t){var n={};for(var r in e){var l,i=e[r],o=Object(x.a)(i.choices);try{for(o.s();!(l=o.n()).done;){var c=l.value,s=a[c],u=t[i.id].x+75,m=t[i.id].y+53,d=t[s.next].x+75,f=t[s.next].y+-3,p=i.id+"---"+s.next;n[p]={id:p,cid:c,x1:u,y1:m,x2:d,y2:f}}}catch(E){o.e(E)}finally{o.f()}}return n}(t,n,e);h(e),w(a),xr()}),[t,n]);Object(l.useEffect)((function(){return r||c(),Q(),function(){return s()}}),[c,r,Q,s]);var ee=function(e,a){"OUT"===M.type&&"IN"===a&&ae(M.id,e),z({id:e,type:a})},ae=function(e,a){var t=e+"---"+a;V({isOpen:!0,fromStID:e,toStID:a,type:O[t]?"Edit":"Create",text:O[t]?n[O[t].cid].text:""})},te=function(e,a){e.stopPropagation(),A(a),P({x:e.pageX,y:e.pageY})},ne=function(e){e.stopPropagation(),A(""),P({x:0,y:0})},re=function(e,a,t){if(e&&b[e]){var n={id:e,x:b[e].x+a,y:b[e].y+t};n.transformStyle=vr(n);var r=Object(y.a)(Object(y.a)({},b),{},Object(j.a)({},e,n));h(r),function(e){var a=Object(y.a)({},O);for(var t in a){var n=a[t],r=n.id.split("---"),l=r[0],i=r[1];e.id===l?((n=Object(y.a)({},n)).x1=e.x+75,n.y1=e.y+53,a=Object(y.a)(Object(y.a)({},a),{},Object(j.a)({},n.id,n))):e.id===i&&((n=Object(y.a)({},n)).x2=e.x+75,n.y2=e.y+-3,a=Object(y.a)(Object(y.a)({},a),{},Object(j.a)({},n.id,n)))}w(a)}(n)}},le=Nn.a.throttle((function(e){if(L){var a=e.pageX-D.x,t=e.pageY-D.y;re(L,a,t),P({x:e.pageX,y:e.pageY})}}),1e3),ie=function(e,a){"ST"===M.type&&re(M.id,e,a)};return Object.keys(t).length!==Object.keys(b).length||Object.keys(n).length!==Object.keys(O).length?i.a.createElement(He.a,null,"Updating ..."):i.a.createElement(He.a,null,i.a.createElement($n,{history:o,deleteComponent:function(){if(M.id&&"IN"!==M.type&&"OUT"!==M.type)if(M.id===r)Cr("Start storylet can not be deleted. Please edit it to your choice.");else{var e="";"S"===M.id[0]?e="STORYLET":"C"===M.id[0]&&(e="CHOICE"),window.confirm("Are you sure you want to delete ".concat(e," ").concat(M.id,". Once deleted, it may not be recovered back."))&&("STORYLET"===e?u(M.id):"CHOICE"===e&&m(M.id))}else Cr("Select a storylet or choice (connector) first. Then click on delete.")},paintFlowboard:Q,toggleJStick:function(){return N(!T)},openFSE:function(e){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EDIT";M.id&&"IN"!==M.type&&"OUT"!==M.type?("S"===M.id[0]?a=t[M.id]:"C"===M.id[0]&&(a=n[M.id]),$({component:a,activeMode:r,isVisible:!0})):Cr("Select a storylet or choice (connector) to "+r.toLowerCase())},openCreateComponent:function(){return q(jr)}}),i.a.createElement("div",{className:a.outerContainer},i.a.createElement("div",{className:a.svgContainer,onClick:function(){return z({})}},i.a.createElement("svg",{className:a.mainSVG,onMouseUp:function(e){return ne(e)}},Object.values(O).map((function(e){return i.a.createElement(dr,{c:e,key:e.id,selectedObj:M,handleSelection:ee})})),Object.values(b).map((function(e){var a=t[e.id];return i.a.createElement(ur,{stid:a.id,title:a.title,transformStyle:e.transformStyle,start:r,key:a.id,selectedObj:M,handleSelection:ee,handleMouseDown:te,handleMouseUp:ne,handleMouseMove:le})})))),i.a.createElement("div",{className:Object(Xe.a)(a.joystick,!T&&"hide")},i.a.createElement(cr,{moveLeft:function(){return ie(-10,0)},moveRight:function(){return ie(10,0)},moveUp:function(){return ie(0,-10)},moveDown:function(){return ie(0,10)}}))),i.a.createElement(pr,Object.assign({isOpen:H.isOpen},H,{handleClose:function(){return V({})},handleSave:function(e,a,t,n){if("Create"===n)d(e,a,t);else if("Edit"===n){var r=O[e+"---"+a].cid;f(r,t)}else console.log("Could not understand the type in saveEditCreateChoice");V({})}})),i.a.createElement(cn,{isOpen:Z.isVisible,activeMode:Z.activeMode,handleClose:function(){return $({})},component:Z.component}),i.a.createElement(gr,{isOpen:K===jr,handleClose:function(){return q("")},storylets:t,openEditChoiceModal:ae,createNewChoice:d}))})),Ir=window.notify,kr=function(e){var a=Object(l.useState)([]),t=Object(Ae.a)(a,2),n=t[0],r=t[1],o=Object(l.useState)(""),c=Object(Ae.a)(o,2),s=c[0],u=c[1],m=e.history;Object(l.useEffect)((function(){!function(){var e=ra();r(Object.values(e))}()}),[]);var d=function(e){return m.push(e)};return i.a.createElement(He.a,{py:3},i.a.createElement(fa.a,{container:!0,spacing:2},n.length<=0&&i.a.createElement("h2",null,"Oops! Looks like you have not saved any tales in your local device"),n.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement(fa.a,{item:!0,xs:12},i.a.createElement("form",{noValidate:!0,autoComplete:"off",className:"filter-form"},i.a.createElement(dt.a,{placeholder:"Type in to filter",fullWidth:!0,value:s,onChange:function(e){return u(e.target.value)}}))),n.filter((function(e){return Object.values(e.info).join(" ").toLocaleLowerCase().includes(s.toLocaleLowerCase())})).map((function(e){return i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:4,lg:3,key:e.id},i.a.createElement(Xa,{info:e.info,expandable:!1,handleReadTale:function(){return a=e.id,d("/preview/".concat("__local__").concat(a));var a},handleEdit:function(){return a=e.id,d("/edit-tale/".concat("__local__").concat(a));var a},handleDelete:function(){return function(e){if(window.confirm("Are you sure you want to delete this local tale. It can not be recovered later (unless you have exported it and import it later)")){var a=ia(e);r(Object.values(a)),Ir("Local tale deleted successfully")}}(e.id)}}))})))))},Lr=t(148),Ar=t.n(Lr),Rr=window,_r=Rr.notify,Dr=Rr.showLoader,Pr=Rr.hideLoader,Ur=Object(p.b)((function(e){return{myOnlineTales:e.od.myTales}}),(function(e){return{cacheMyTales:function(a){return e({type:"ONLINE_DATA_SAVE_MY_TALES",payload:a})}}}))((function(e){var a=e.history,t=e.authorEmail,n=e.myOnlineTales,r=e.cacheMyTales,o=Object(l.useState)(""),c=Object(Ae.a)(o,2),s=c[0],u=c[1];Object(l.useEffect)((function(){n.length>0||t&&m()}),[t]);var m=function(){Dr(),Ne(ne).then((function(e){console.log(e.data);var a=e.data,t=a.status,n=a.tales,l=a.msg;200===t?r(n):_r(l)})).finally((function(){return Pr()}))},d=function(e){return t="/edit-tale/".concat(e),a.push(t);var t};return i.a.createElement(He.a,{py:3},!t&&i.a.createElement("h2",null,"Please login to see your online tales ..."),t&&n.length<=0&&i.a.createElement("h2",null,"Sorry you do not have any tales saved online ..."),t&&n.length>0&&i.a.createElement(fa.a,{container:!0,spacing:2},i.a.createElement(fa.a,{item:!0,xs:12},i.a.createElement("form",{noValidate:!0,autoComplete:"off",className:"filter-form"},i.a.createElement(dt.a,{placeholder:"Type in to filter",fullWidth:!0,value:s,onChange:function(e){return u(e.target.value)}}))),i.a.createElement(fa.a,{item:!0,xs:12,className:"text-right"},i.a.createElement(Je.a,{variant:"contained",color:"primary",size:"small",startIcon:i.a.createElement(Ar.a,null),onClick:m},"Refresh")),n.filter((function(e){return Object.values(e.info).join(" ").toLocaleLowerCase().includes(s.toLocaleLowerCase())})).map((function(e){return i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:4,lg:3,key:e.info.storyUrl},i.a.createElement(Xa,{id:e.info.storyUrl,info:e.info,expandable:!1,handleReadTale:function(){return a=e.info.storyUrl,void(window.location.href=window.location.origin+"/read/"+a);var a},handleEdit:function(){return d(e.info.storyUrl)},handleDelete:function(){return a=e.info.storyUrl,void(window.confirm("Are you sure you want to delete this tale? Once deleted, it may not be recovered back. (Better export and keep a copy before deleting ...)")&&(Dr(),Te(te,{storyUrl:a}).then((function(e){var a=e.data,t=a.status,n=a.msg;_r(n),200!==t&&1500!==t||m()})).finally((function(){return Pr()}))));var a}}))}))))})),Wr=Object(p.b)((function(e){return{authorEmail:e.user.email}}))((function(e){var a=Object(l.useState)(0),t=Object(Ae.a)(a,2),n=t[0],r=t[1],o=e.history,c=e.authorEmail;return Object(l.useEffect)((function(){document.title="My Tales | "+xe,c&&r(1),window.hideLoader()}),[]),i.a.createElement(He.a,{py:2},i.a.createElement(pa.a,{variant:"h4",component:"h1"},"My Tales"),i.a.createElement(He.a,{mt:2,mb:4,className:"flex-space-between"},i.a.createElement(pa.a,{variant:"subtitle1"},"Here you will find all the tales created by you")),i.a.createElement(at.a,{square:!0},i.a.createElement(tt.a,{value:n,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){r(a)},centered:!0,"aria-label":"tabs to create the story"},i.a.createElement(nt.a,{label:"Local"}),i.a.createElement(nt.a,{label:"Online"}))),i.a.createElement(He.a,{className:0!==n?"hide":""},i.a.createElement(kr,{history:o})),i.a.createElement(He.a,{className:1!==n?"hide":""},i.a.createElement(Ur,{history:o,authorEmail:c})))})),Mr=t(149),zr=t.n(Mr),Br=Object(z.a)((function(e){return{bannerImg:{maxWidth:"100%",maxHeight:300,margin:"0 auto",display:"block",background:"#000",borderRadius:4},titleLine:{fontSize:25,margin:"0 0 10px 0"},genre:{borderTop:"1px solid #d5000040",paddingTop:10,marginTop:5},tags:{listStyle:"none",padding:"5px 0 0",margin:0,"& > li":{padding:"3px 8px",margin:"2px 3px",background:"rgba(213, 0, 0, 0.6)",color:"#fff",fontSize:12,borderRadius:8,display:"inline-flex",alignItems:"center"},"& > li > svg":{fontSize:15,marginRight:3}},descSec:{position:"relative",margin:"30px 0",borderTop:"1px solid #d5000040",borderBottom:"10px solid #ffcdd2","& .ico":{position:"absolute",top:25,right:0},"& .desc":{display:"none"},"&.open .desc":{display:"block"}}}})),Fr=function(e){var a=Br(),t=Object(l.useState)(!1),n=Object(Ae.a)(t,2),r=n[0],o=n[1],c=e.info,s=e.isCutomizable,u=e.onCustomize;return i.a.createElement("div",null,i.a.createElement(fa.a,{container:!0,spacing:3},i.a.createElement(fa.a,{item:!0,xs:12,md:7},i.a.createElement("img",{src:c.imgUrl?"/ups/banners/".concat(c.imgUrl):$,className:a.bannerImg,alt:"Tale Banner Image"})),i.a.createElement(fa.a,{item:!0,xs:12,md:5},i.a.createElement("h1",{className:a.titleLine},i.a.createElement("span",null,c.name)),i.a.createElement("div",null,i.a.createElement("div",null,c.authorDisplayName||"Reactale Author"),i.a.createElement("div",{className:a.genre},"Genre: ",c.genre),i.a.createElement("ul",{className:a.tags},(Array.isArray(c.tags)?c.tags:c.tags.split(",")).map((function(e){return i.a.createElement("li",{key:e},i.a.createElement(zr.a,null),e)})))),i.a.createElement("div",null,s&&i.a.createElement(Je.a,{variant:"outlined",color:"primary",className:"mt-15",fullWidth:!0,size:"small",onClick:u},"Customize and Gift")))),i.a.createElement("div",{className:Object(Xe.a)(a.descSec,r&&"open")},i.a.createElement("h2",{onClick:function(){return o(!r)}},"Description"),i.a.createElement("span",{className:"ico"},r&&i.a.createElement(rr.a,{className:"up"}),!r&&i.a.createElement(ir.a,{className:"down"})),i.a.createElement("p",{className:"desc"},c.description)))},Hr=t(150),Vr=t.n(Hr),Gr=window.notify,Yr=Object(z.a)((function(e){return{root:{position:"relative"},backBtn:{position:"absolute",top:18,left:2,width:32,height:34,borderRadius:"50%",background:e.palette.primary.main,color:"#fff"}}})),Kr=function(e){var a=Object(l.useState)(null),t=Object(Ae.a)(a,2),n=t[0],r=t[1],o=e.match,c=e.history,s=Yr(),u=Object(l.useState)({}),m=Object(Ae.a)(u,2),d=m[0],f=m[1],p=Object(l.useState)(!1),E=Object(Ae.a)(p,2),b=E[0],h=E[1],g=Object(l.useState)({}),v=Object(Ae.a)(g,2),O=v[0],w=v[1];Object(l.useEffect)((function(){document.title="Preview Tale | "+xe}),[]);var S=function(e){w(Object(y.a)(Object(y.a)({},O),{},Object(j.a)({},e.target.name,e.target.value)))},C=function(e){if(e.reactos&&e.reactos.vars){var a={},t={};Object.values(e.reactos.vars).forEach((function(e){a[e.name]=e.val,e.userCustomizable&&(t[e.name]=e)})),f(t),window.rto.setAllVars(a)}};Object(l.useEffect)((function(){var e=o.params.id;if(e.indexOf("__local__")>=0){e=e.trim().replace("__local__","");var a=la(e);r(a),C(a),setTimeout((function(){document.title="Preview Tale | ".concat(a.info.name," | ")+xe,window.rto.createTimeline("timelineContainer",a),window.hideLoader()}),500)}else window.showLoader(),Ie(ee,[e]).then((function(e){var a=e.data,t=a.status,n=a.tale,l=a.msg;200===t?(r(n),C(n),setTimeout((function(){document.title="Preview Tale | ".concat(n.info.name," | ")+xe,window.rto.createTimeline("timelineContainer",n)}),500)):Gr(l)})).catch((function(e){console.log(e)})).finally((function(){return window.hideLoader()}))}),[o]);return n?i.a.createElement(He.a,{py:2,mb:5,className:Object(Xe.a)(s.root,"dev-mode")},i.a.createElement(Fr,{info:n.info,isCutomizable:Object.values(d).length>0,onCustomize:function(){return h(!0)}}),i.a.createElement(Vr.a,{onClick:function(){return c.goBack()},className:s.backBtn}),i.a.createElement("h2",null,n.info.name),i.a.createElement("div",{id:"timelineContainer"}),i.a.createElement(na,{isOpen:b,handleClose:function(){return h(!1)},title:"Gift-a-Tale"},Object.values(d).map((function(e,a){return i.a.createElement(Ot,{title:"Custom Variable "+(a+1),className:"mt-5",key:e.name},i.a.createElement(He.a,null,e.helptext),i.a.createElement(He.a,{mt:1},"Current Value: ",e.val),i.a.createElement(He.a,{mt:1},i.a.createElement("div",null,"New Value"),i.a.createElement(dt.a,{multiline:!0,name:e.name,rows:"2",variant:"outlined",fullWidth:!0,value:O[e.name],onChange:S})))})),i.a.createElement(fa.a,{container:!0,spacing:1},i.a.createElement(fa.a,{item:!0,xs:!0},i.a.createElement(Je.a,{variant:"contained",color:"primary",className:"mt-15",fullWidth:!0,size:"small",onClick:function(){window.rto.setAllVars(O),setTimeout((function(){window.rto.createTimeline("timelineContainer",n)}),500),Gr("Customization successfull ..."),h(!1)}},"Apply")),i.a.createElement(fa.a,{item:!0,xs:!0},i.a.createElement(Je.a,{variant:"contained",color:"primary",className:"mt-15",fullWidth:!0,size:"small",onClick:function(){return Gr("Sorry, this feature is not available in Preview Mode")}},"Get URL"))))):i.a.createElement("div",null,"Loading tale ...")},qr=t(290),Jr=t(152),Xr=t.n(Jr),Zr=t(153),$r=t.n(Zr),Qr=window,el=Qr.hideLoader,al=Qr.notify,tl=Object(z.a)((function(e){return{sectionHead:{fontSize:22,marginTop:40,borderBottom:"1px solid ".concat(e.palette.primary.main),position:"relative","& .title":{position:"absolute",left:0,top:-16,background:"#fff",paddingRight:9},"& .ico":{position:"absolute",right:0,top:-22,background:"#fff",color:e.palette.primary.main,padding:9,cursor:"pointer"}},usernameTextboxWrap:{position:"relative","& .ico-clear":{position:"absolute",top:6,right:6,padding:4,opacity:.6,cursor:"default"}}}})),nl=Object(p.b)((function(e){return{user:e.user}}),(function(e){return{updateUser:function(a){return e({type:"USER_UPDATE",payload:{user:a}})}}}))((function(e){var a,t=e.user,n=e.updateUser,r=Object(l.useState)({}),o=Object(Ae.a)(r,2),c=o[0],s=o[1],u=Object(l.useState)({}),m=Object(Ae.a)(u,2),d=m[0],f=m[1],p=tl();Object(l.useEffect)((function(){document.title="My Profile | "+xe,el()}),[]),Object(l.useEffect)((function(){s(Object(y.a)({},t))}),[t]);var E=function(e){var a=e.target,t=a.name,n=a.value;"aboutme"===t&&n.length>500?n=n.substr(0,500):"dob"!==t||/^[0-9-]{0,10}$/.test(n)||(n=c[t]||""),s(Object(y.a)(Object(y.a)({},c),{},Object(j.a)({},t,n)))},b=function(e){f(Object(y.a)(Object(y.a)({},d),{},Object(j.a)({},e,!d[e])))};return i.a.createElement(He.a,{py:2},i.a.createElement(pa.a,{variant:"h4",component:"h1"},"User Profile"),!c.email&&i.a.createElement(He.a,null,"Please login to see this page"),c.email&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:p.sectionHead,onClick:function(){return b("acc0")}},i.a.createElement("span",{className:"title"},"Account"),i.a.createElement("span",{className:"ico"},!d.acc0&&i.a.createElement("i",{class:"fas fa-chevron-up"}),d.acc0&&i.a.createElement("i",{class:"fas fa-chevron-down"}))),d.acc0&&i.a.createElement(fa.a,{container:!0,spacing:2,className:"mt-25"},i.a.createElement(fa.a,{item:!0,xs:12},"Reactale ID",i.a.createElement(qr.a,{disableFocusListener:!0,title:"ReactaleID is your publicly visible ID (as displaying email publicly is not recommendable). It should be 6 to 20 characters long, can contain letters a to z, numbers 0 to 9, hyphen(-) and underscore(_). Since people will know you by this ID, it is advisable to change it only once and then stick to it forever."},i.a.createElement(H.a,{"aria-label":"info"},i.a.createElement(Xr.a,null)))),i.a.createElement(fa.a,{item:!0,xs:8,className:p.usernameTextboxWrap},i.a.createElement(dt.a,{fullWidth:!0,variant:"outlined",value:c.username,label:"ReactaleID",name:"username",onChange:E,helperText:"@".concat(c.username),InputProps:c.username&&!/^[a-z0-9-]{6,20}$/.test(c.username)&&{endAdornment:i.a.createElement(Lt.a,{position:"end"},i.a.createElement(Pt.a,null))}}),i.a.createElement($r.a,{className:Object(Xe.a)("ico-clear",t.username===c.username&&"hidden"),onClick:function(){s(Object(y.a)(Object(y.a)({},c),{},{username:t.username}))}})),i.a.createElement(fa.a,{item:!0,xs:4},i.a.createElement(Je.a,{variant:"contained",color:"primary",onClick:function(){var e=c.email,a=c.username;Te(de,{email:e,username:a}).then((function(e){var a=e.data,r=a.status,l=a.info,i=a.msg;al(i),200===r&&l&&(s(Object(y.a)(Object(y.a)({},c),{},{username:l.newUsername})),n(Object(y.a)(Object(y.a)({},t),{},{username:l.newUsername})))})).catch((function(e){return al(e)}))},fullWidth:!0,disabled:!/^[a-zA-Z0-9-_]{6,20}$/.test(c.username)},"Update"))),i.a.createElement("div",{className:p.sectionHead,onClick:function(){return b("acc1")}},i.a.createElement("span",{className:"title"},"Basics"),i.a.createElement("span",{className:"ico"},!d.acc1&&i.a.createElement("i",{class:"fas fa-chevron-up"}),d.acc1&&i.a.createElement("i",{class:"fas fa-chevron-down"}))),d.acc1&&i.a.createElement(fa.a,{container:!0,spacing:2,className:"mt-25"},i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(dt.a,{fullWidth:!0,variant:"outlined",value:c.firstname,label:"First name",required:!0,name:"firstname",onChange:E,InputProps:c.firstname&&c.firstname.length<=0&&{endAdornment:i.a.createElement(Lt.a,{position:"end"},i.a.createElement(Pt.a,null))}})),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(dt.a,{fullWidth:!0,variant:"outlined",value:c.lastname,label:"Last name",required:!0,name:"lastname",onChange:E,InputProps:c.lastname&&c.lastname.length<=0&&{endAdornment:i.a.createElement(Lt.a,{position:"end"},i.a.createElement(Pt.a,null))}})),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(Ve.a,{variant:"outlined",fullWidth:!0},i.a.createElement(At.a,{required:!0},"Gender"),i.a.createElement(Rt.a,{value:c.gender,fullWidth:!0,onChange:E,name:"gender"},i.a.createElement(_t.a,{value:"M"},"Male"),i.a.createElement(_t.a,{value:"F"},"Female"),i.a.createElement(_t.a,{value:"O"},"Other")))),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(Ve.a,{variant:"outlined",fullWidth:!0},i.a.createElement(At.a,{required:!0},"Country"),i.a.createElement(Rt.a,{value:c.country,fullWidth:!0,onChange:E,name:"country"},Oe.map((function(e){return i.a.createElement(_t.a,{value:e,key:e},e)}))))),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(Ve.a,{variant:"outlined",fullWidth:!0},i.a.createElement(At.a,null,"Language 1"),i.a.createElement(Rt.a,{value:c.lang1,fullWidth:!0,onChange:E,name:"lang1"},we.map((function(e){return i.a.createElement(_t.a,{value:e,key:e},e)}))))),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(Ve.a,{variant:"outlined",fullWidth:!0},i.a.createElement(At.a,null,"Language 2"),i.a.createElement(Rt.a,{value:c.lang2,fullWidth:!0,onChange:E,name:"lang2"},we.map((function(e){return i.a.createElement(_t.a,{value:e,key:e},e)}))))),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(Ve.a,{variant:"outlined",fullWidth:!0},i.a.createElement(At.a,null,"Language 3"),i.a.createElement(Rt.a,{value:c.lang3,fullWidth:!0,onChange:E,name:"lang3"},we.map((function(e){return i.a.createElement(_t.a,{value:e,key:e},e)}))))),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(dt.a,{fullWidth:!0,variant:"outlined",value:c.dob,label:"Date of Birth",name:"dob",onChange:E,helperText:"Only you can see it",placeholder:"DD-MM-YYYY"})),i.a.createElement(fa.a,{item:!0,xs:12},i.a.createElement(dt.a,{fullWidth:!0,variant:"outlined",value:c.aboutme,label:"About me",name:"aboutme",onChange:E,multiline:!0,helperText:((null===(a=c.aboutme)||void 0===a?void 0:a.length)||0)+" / 500"}))),i.a.createElement("div",{className:p.sectionHead,onClick:function(){return b("acc2")}},i.a.createElement("span",{className:"title"},"Social"),i.a.createElement("span",{className:"ico"},!d.acc2&&i.a.createElement("i",{class:"fas fa-chevron-up"}),d.acc2&&i.a.createElement("i",{class:"fas fa-chevron-down"}))),d.acc2&&i.a.createElement(fa.a,{container:!0,spacing:2,className:"mt-25"},i.a.createElement(fa.a,{item:!0,xs:12,sm:6,className:p.usernameTextboxWrap},i.a.createElement(dt.a,{fullWidth:!0,variant:"outlined",value:c.facebookID,label:"Facebook ID",name:"facebookID",onChange:E,helperText:"https://facebook.com/".concat(c.facebookID||"")})),i.a.createElement(fa.a,{item:!0,xs:12,sm:6,className:p.usernameTextboxWrap},i.a.createElement(dt.a,{fullWidth:!0,variant:"outlined",value:c.twitterID,label:"Twitter ID",name:"twitterID",onChange:E,helperText:"https://twitter.com/".concat(c.twitterID||"")}))),i.a.createElement(He.a,{mt:4,className:"text-right"},i.a.createElement(Je.a,{variant:"contained",color:"primary",onClick:function(){console.log("tempUser = ",c),Te(fe,{user:c,email:c.email}).then((function(e){var a=e.data,r=a.status,l=a.updatedUserData,i=a.msg;al(i),200===r&&n(Object(y.a)(Object(y.a)({},t),l))})).catch((function(e){return al(e)}))}},"Save Profile"))))}));t(206),t(207),t(208);!function(e){e.SIMPLE="SIMPLE",e.ACTION="ACTION"}(Or||(Or={})),function(e){e.SOMEONE_FOLLOWED_YOU="SOMEONE_FOLLOWED_YOU",e.FAV_AUTHOR_PUBLISHED="FAV_AUTHOR_PUBLISHED",e.LINK_A_TALE_REQUEST="LINK_A_TALE_REQUEST"}(wr||(wr={}));var rl=window,ll=rl.showLoader,il=rl.hideLoader,ol=rl.notify,cl=Object(z.a)((function(e){return{notifBox:{marginTop:25,"& .inner":{padding:"10px 15px"},"& .title":{fontSize:20,display:"flex",alignItems:"center",justifyContent:"space-between","& .ico":{fontSize:16,border:"1px solid #ddd",height:30,width:30,display:"inline-flex",justifyContent:"center",alignItems:"center",marginRight:7,color:"#fff",background:"var(--primary-color)",borderRadius:4},"& .date":{color:"rgb(0 0 0 / 70%)",fontSize:16}},"& .body":{lineHeight:"24px","& a":{textDecoration:"none"},"& .detailed-list":{margin:"20px 0 20px 20px","& li":{marginTop:3,"& .label":{color:"rgba(0 0 0 / 50%)",fontWeight:"bold",marginRight:5}}}}}}})),sl=[{path:"/home",component:et,exact:!0},{path:"/my-profile",component:nl,exact:!0},{path:"/create-tale",component:Fn,exact:!0},{path:"/preview/:id",component:Kr,exact:!0},{path:"/edit-tale/:id",component:Vn,exact:!0},{path:"/tales-flow",component:Nr,exact:!0},{path:"/my-tales",component:Wr,exact:!0},{path:"/notifications",component:Object(p.b)((function(e){return{user:e.user}}),(function(e){return{updateUser:function(a){return e({type:"USER_UPDATE",payload:{user:a}})}}}))((function(e){var a=cl(),t=Object(l.useState)([]),n=Object(Ae.a)(t,2),r=n[0],o=n[1],c=e.user;Object(l.useEffect)((function(){document.title="Notifications | "+xe,il()}),[]),Object(l.useEffect)((function(){o(c.notifs||[])}),[c]);var s=function(e,a){window.confirm("Are you sure to ".concat(a," ?"))&&(ll(),Te(be,{id:e,execCode:a}).then((function(e){var a=e.data,t=(a.status,a.msg),n=a._id;n&&o(r.filter((function(e){return e._id!==n}))),ol(t)})).catch((function(e){return ol("Some error occurred ...")})).finally((function(){return il()})))};return i.a.createElement(He.a,{py:2},i.a.createElement(pa.a,{variant:"h4",component:"h1"},"Notifications"),i.a.createElement(He.a,{mt:2},"Currently you have ",r.length," notification(s)!"),i.a.createElement(He.a,{mt:2},r.map((function(e){return i.a.createElement("div",{className:a.notifBox},i.a.createElement(at.a,{className:"inner",elevation:3},i.a.createElement(fa.a,{container:!0,spacing:1},i.a.createElement(fa.a,{item:!0,xs:12,className:"title"},e.name===wr.LINK_A_TALE_REQUEST&&i.a.createElement("span",null,i.a.createElement("i",{className:"fas fa-code-branch ico"}),i.a.createElement("span",null,"Link A Tale")),i.a.createElement("span",{className:"date"},function(e){var a=new Date(e);return"".concat(a.getDate().toString().padStart(2,"0"),"-").concat((a.getMonth()+1).toString().padStart(2,"0"),"/").concat(a.getFullYear())}(e.doC))),i.a.createElement(fa.a,{item:!0,xs:12,className:"body"},e.name===wr.LINK_A_TALE_REQUEST&&i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"Hey, you have got a link request !!!"),i.a.createElement("p",null,i.a.createElement("ul",{className:"detailed-list"},i.a.createElement("li",null,i.a.createElement("span",{className:"label"},"Sender: "),i.a.createElement("a",{href:"/user/".concat(e.requestorID)},e.requestorName)),i.a.createElement("li",null,i.a.createElement("span",{className:"label"},"From Story: "),i.a.createElement("span",null,e.fromStoryName)),i.a.createElement("li",null,i.a.createElement("span",{className:"label"},"From Storylet ID: "),i.a.createElement("span",null,e.fromStID)),i.a.createElement("li",null,i.a.createElement("span",{className:"label"},"Start point: "),i.a.createElement("a",{href:"".concat(e.fromUrl),target:"_blank"},"Click here to see")),i.a.createElement("li",null,i.a.createElement("span",{className:"label"},"Choice text: "),i.a.createElement("span",null,e.choiceTxt)),i.a.createElement("li",null,i.a.createElement("span",{className:"label"},"End point: "),i.a.createElement("a",{href:"".concat(e.toUrl),target:"_blank"},"Click here to see")))),i.a.createElement("div",{className:"text-right"},i.a.createElement(Je.a,{variant:"contained",color:"primary",onClick:function(){return s(e._id,"APPROVE")}},"Approve"),i.a.createElement(Je.a,{variant:"outlined",color:"primary",className:"ml-5",onClick:function(){return s(e._id,"DENY")}},"Deny")))))))}))))})),exact:!0}],ul=t(285),ml=t(277),dl=t(278),fl=function(){var e=Object(Na.a)(Ta.a.mark((function e(a,t){var n;return Ta.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te(oe,{email:a,otp:t});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:"FAILED",msg:"Verification failed"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a,t){return e.apply(this,arguments)}}(),pl=function(){var e=Object(Na.a)(Ta.a.mark((function e(a,t){var n;return Ta.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te(ue,{email:a,otpType:t});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:"FAILED",msg:"Some error occured. Please try again later"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a,t){return e.apply(this,arguments)}}(),El=function(){var e=Object(Na.a)(Ta.a.mark((function e(a,t,n){var r;return Ta.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te(me,{email:a,pswdchangeotp:t,newpswd:n});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:"FAILED",msg:"Some error occured. Please try again later"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a,t,n){return e.apply(this,arguments)}}(),bl="SIGNUP_EMAIL_VERIFICATION",hl="FORGOT_PASSWORD",gl=window.notify,yl=Object(z.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},heading:{fontSize:e.typography.pxToRem(16),fontWeight:e.typography.fontWeightRegular,color:e.palette.primary.main}}})),vl=Object(p.b)((function(e){return{isOpen:e.ui.isLoginModalOpen,visibleTabIndex:e.ui.loginActiveTab,user:e.user}}),(function(e){return{handleClose:function(){return e({type:"UI_LOGIN_MODAL_CLOSE"})},changeTab:function(a){return e({type:"UI_LOGIN_SET_ACT_TAB",payload:{tabIndex:a}})},doLogin:function(a){return e(_n(a))},doSignup:function(a){return e(function(e){var a=e.email,t=e.pswd,n=e.firstname,r=e.lastname;return An(),function(e){Te(ie,{email:a,pswd:t,firstname:n,lastname:r}).then((function(e){var a=e.data,t=(a.status,a.msg);Ln(t)})).catch((function(e){console.log(e),Ln("Sign up failed...")})).finally((function(){return Rn()}))}}(a))}}}))((function(e){var a=yl(),t=e.isOpen,n=e.handleClose,r=e.visibleTabIndex,o=e.title,c=e.changeTab,s=e.user,u=e.doLogin,m=e.doSignup,d=Object(l.useState)(s||{}),f=Object(Ae.a)(d,2),p=f[0],E=f[1],b=Object(l.useState)(""),h=Object(Ae.a)(b,2),g=h[0];h[1];Object(l.useEffect)((function(){s&&E(s)}),[s]);var v=function(e,a){return e&&rn(e)?!(!a||!function(e){return/^(?=.*[0-9])(?=.*[- ?!@#$%^&*\/\\])(?=.*[A-Z])(?=.*[a-z])[a-zA-Z0-9- ?!@#$%^&*\/\\]{8,20}$/.test(e)}(a))||gl("Please enter a valid password of length between 8 to 20 and must have atleast 1 uppercase letter, 1 lowercase, 1 number and 1 special character."):(gl("Please enter a valid email address"),!1)},O=function(e){e.preventDefault();var a=p.email,t=p.pswd;v(a,t)&&u({email:a,pswd:t})},w=function(e){e.preventDefault();var a=p.email,t=p.pswd,n=p.firstname,r=p.lastname;a&&t&&n&&r?v(a,t)&&m({email:a,pswd:t,firstname:n,lastname:r}):gl("Enter Firstname, Lastname Email, Password to login...")},S=function(e){E(Object(y.a)(Object(y.a)({},p),{},Object(j.a)({},e.target.name,e.target.value)))};return i.a.createElement(na,{isOpen:t,handleClose:n,title:o||"Hi There!"},i.a.createElement(at.a,{square:!0},i.a.createElement(tt.a,{value:r,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){return c(a)},centered:!0,"aria-label":"tabs to create the story"},i.a.createElement(nt.a,{label:"Sign in"}),i.a.createElement(nt.a,{label:"Sign up"}),i.a.createElement(nt.a,{label:"Manage"}))),i.a.createElement(He.a,{className:0!==r?"hide":""},i.a.createElement("form",{onSubmit:O},i.a.createElement(dt.a,{label:"Email",name:"email",value:p.email,onChange:S,variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(dt.a,{label:"Password",name:"pswd",value:p.pswd,onChange:S,type:"password",variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(Je.a,{type:"submit",variant:"outlined",color:"primary",className:"mt-15",fullWidth:!0,onClick:O},"Sign in"))),i.a.createElement(He.a,{className:1!==r?"hide":""},i.a.createElement("form",{onSubmit:w},i.a.createElement(dt.a,{label:"First name",name:"firstname",value:p.firstname,onChange:S,variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(dt.a,{label:"Last name",name:"lastname",value:p.lastname,onChange:S,variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(dt.a,{label:"Email",name:"email",value:p.email,onChange:S,variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(dt.a,{label:"Password",name:"pswd",value:p.pswd,onChange:S,type:"password",variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(Je.a,{type:"submit",variant:"outlined",color:"primary",className:"mt-15",fullWidth:!0,onClick:w},"Sign up"))),i.a.createElement(He.a,{className:2!==r?"hide":""},i.a.createElement(ul.a,{className:"mui-accordion-override-1 mt-15"},i.a.createElement(ml.a,{expandIcon:i.a.createElement(Va.a,null)},i.a.createElement(pa.a,{className:a.heading},"Email Verification")),i.a.createElement(dl.a,null,i.a.createElement(He.a,{className:"width-100",pt:1},i.a.createElement(dt.a,{label:"Email to Verify",name:"email",value:p.email,onChange:S,variant:"outlined",size:"small",fullWidth:!0}),i.a.createElement("div",{className:"mt-15 flex"},i.a.createElement(dt.a,{label:"OTP",name:"emailverifyotp",value:p.emailverifyotp,onChange:S,variant:"outlined",size:"small"}),i.a.createElement(Je.a,{variant:"contained",className:"ml-5",color:"primary",onClick:function(){return p.email&&p.emailverifyotp?isNaN(p.emailverifyotp)?gl("OTP must be numeric"):rn(p.email)?(window.showLoader(),void fl(p.email,p.emailverifyotp).then((function(e){return gl(e.msg)})).catch((function(e){return gl("Some error occured. Please try again later ...")})).finally((function(e){window.hideLoader()}))):gl("Enter a valid email address"):gl("Both email and otp are mandatory ...")}},"Verify")),i.a.createElement("div",{className:"mt-15"},"Did not receive OTP? ",i.a.createElement("span",{onClick:function(e){if(!p.email||!rn(p.email))return gl("Please enter your email address and try again.");window.showLoader(),pl(p.email,bl).then((function(e){return gl(e.msg)})).catch((function(e){return gl("Some error occured ...")})).finally((function(){return window.hideLoader()}))}},i.a.createElement("u",null,"Click here"))," to resend."),g&&i.a.createElement("div",null,g)))),i.a.createElement(ul.a,{className:"mui-accordion-override-1"},i.a.createElement(ml.a,{expandIcon:i.a.createElement(Va.a,null)},i.a.createElement(pa.a,{className:a.heading},"Password Recovery")),i.a.createElement(dl.a,null,i.a.createElement(He.a,{className:"width-100"},i.a.createElement(dt.a,{label:"Signup Email",name:"email",value:p.email,onChange:S,variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(Je.a,{variant:"outlined",className:"mt-15",color:"primary",fullWidth:!0,onClick:function(e){if(!p.email||!rn(p.email))return gl("Please enter your email address and try again.");window.showLoader(),pl(p.email,hl).then((function(e){return gl(e.msg)})).catch((function(e){return gl("Some error occured ...")})).finally((function(){return window.hideLoader()}))}},"Send OTP"),i.a.createElement(He.a,{className:"width-100"},i.a.createElement(dt.a,{label:"Enter OTP",name:"pswdchangeotp",value:p.pswdchangeotp,onChange:S,variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(dt.a,{label:"Type New Password",name:"newpswd",value:p.newpswd,onChange:S,type:"password",variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(dt.a,{label:"Retype New Password",name:"newpswd1",value:p.newpswd1,onChange:S,type:"password",variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(Je.a,{variant:"contained",className:"mt-15",color:"primary",fullWidth:!0,onClick:function(e){if(!p.email||!p.pswdchangeotp||!p.newpswd||!p.newpswd1)return gl("Email, OTP, Password and Re-password - all 4 fields are Mandatory to change password.");if(v(p.email,p.newpswd)){if(isNaN(p.pswdchangeotp))return gl("OTP must be numeric.");if(p.newpswd!==p.newpswd1)return gl("Password and Re-password is not matching. Please type again.");window.showLoader(),El(p.email,p.pswdchangeotp,p.newpswd).then((function(e){return gl(e.msg)})).catch((function(e){return gl("Some error occured ...")})).finally((function(){return window.hideLoader()}))}}},"Change Password")))))))})),Ol=function(){return U.purge()},wl=function(){return i.a.createElement(s.a,{theme:M},i.a.createElement(p.a,{store:P},i.a.createElement(f.a,{loading:null,persistor:U},i.a.createElement(xa,null,i.a.createElement(m.a,{basename:"/r"},i.a.createElement("header",null,i.a.createElement(Le,null)),i.a.createElement("nav",null,i.a.createElement(da,{purgePersistedData:Ol})),i.a.createElement(vl,null),i.a.createElement(u.a,{maxWidth:"lg",className:"appbody"},i.a.createElement(d.d,null,sl.map((function(e){return i.a.createElement(d.b,Object.assign({},e,{key:e.path}))})),i.a.createElement(d.b,{path:"*"},i.a.createElement(d.a,{to:"/home"})))),i.a.createElement("footer",null,i.a.createElement(Ca,null)))))))};c.a.render(i.a.createElement(wl,null),document.getElementById("root"))}},[[173,1,2]]]);
//# sourceMappingURL=main.2b36aa2f.chunk.js.map