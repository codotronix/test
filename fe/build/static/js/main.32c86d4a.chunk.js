(this.webpackJsonpreactale=this.webpackJsonpreactale||[]).push([[0],{103:function(e,a,t){e.exports={logoContainer:"style_logoContainer__2gHHN",logoImg:"style_logoImg__uKyb1",rightBtnsHolder:"style_rightBtnsHolder__14kKr"}},173:function(e,a,t){e.exports=t(210)},207:function(e,a){},208:function(e,a){},209:function(e,a){},210:function(e,a,t){"use strict";t.r(a);var n,r,l=t(0),i=t.n(l),o=t(18),c=t.n(o),s=t(280),u=t(277),m=t(89),d=t(21),f=t(126),p=t(9),b=t(38),E=t(128),h=t(109),g=t(129),y=t(4);!function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e.EXPORT="EXPORT"}(n||(n={})),function(e){e[e.EDIT=0]="EDIT",e[e.PREVIEW=1]="PREVIEW"}(r||(r={}));var v={firstname:"",lastname:"",username:"",pswd:"",aboutme:"",email:"",imgUrl:"",gender:"",dob:"",lang1:"",lang2:"",lang3:"",country:"",facebookID:"",twitterID:"",history:[],prefs:{defaultSave:n.EXPORT}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_UPDATE":var t=a.payload.user;return Object(y.a)(Object(y.a)({},e),t);case"USER_PREFS_UPDATE":var n=a.payload;return Object(y.a)(Object(y.a)({},e),{},{prefs:Object(y.a)(Object(y.a)({},e.prefs),n)});case"USER_RESET":return Object(y.a)({},v);default:return e}},S={isSidebarOpen:!1,isLoginModalOpen:!1,isLogoutModalOpen:!1,loginActiveTab:0,isReactoModalOpen:!1,notifications:{}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UI_SIDEBAR_OPEN":return Object(y.a)(Object(y.a)({},e),{},{isSidebarOpen:!0});case"UI_SIDEBAR_CLOSE":return Object(y.a)(Object(y.a)({},e),{},{isSidebarOpen:!1});case"UI_LOGIN_MODAL_OPEN":return Object(y.a)(Object(y.a)({},e),{},{isLoginModalOpen:!0});case"UI_LOGIN_MODAL_CLOSE":return Object(y.a)(Object(y.a)({},e),{},{isLoginModalOpen:!1});case"UI_LOGOUT_MODAL_OPEN":return Object(y.a)(Object(y.a)({},e),{},{isLogoutModalOpen:!0});case"UI_LOGOUT_MODAL_CLOSE":return Object(y.a)(Object(y.a)({},e),{},{isLogoutModalOpen:!1});case"UI_REACTO_MODAL_OPEN":return Object(y.a)(Object(y.a)({},e),{},{isReactoModalOpen:!0});case"UI_REACTO_MODAL_CLOSE":return Object(y.a)(Object(y.a)({},e),{},{isReactoModalOpen:!1});case"UI_LOGIN_SET_ACT_TAB":var t=a.payload.tabIndex;return!isNaN(t)&&t<3&&t>-1?Object(y.a)(Object(y.a)({},e),{},{loginActiveTab:t}):e;default:return e}},C=t(54),x=t(50),j=t(14),T=function(e){return{id:(e=e||{}).id,title:e.title||"",text:e.text||"",choices:e.choices||[]}},N=function(e){return{id:(e=e||{}).id,text:e.text||"",next:e.next||null}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null,isPublished:!1,start:null,info:{name:"",description:"",genre:"Other",lang:"English",tags:"",authorEmail:"",originalAuthor:"",storyUrl:"",desiredUrl:"",imgUrl:""},idCounter:0,storylets:{},choices:{},reactos:{vars:{}},storyboard:[]},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"TALE_CREATE":var t="R"+(new Date).getTime()+Math.random().toString().replace(".",""),n=T({id:"ST000"}),r=Object(y.a)(Object(y.a)({},e),{},{id:t,start:"ST000",storylets:Object(j.a)({},"ST000",n),storyboard:[{stID:"ST000"}]});return r;case"TALE_SET_AS_WIP":return Object(y.a)(Object(y.a)({},a.payload),{},{storyboard:[{stID:"ST000"}]});case"STORYBOARD_INITIALIZE":return Object(y.a)(Object(y.a)({},e),{},{storyboard:[{stID:"ST000"}]});case"TALE_UPDATE_REACTO_VARS":return Object(y.a)(Object(y.a)({},e),{},{reactos:Object(y.a)(Object(y.a)({},e.reactos),{},{vars:a.payload})});case"TALE_UPDATE_INFO":return Object(y.a)(Object(y.a)({},e),{},{info:a.payload});case"TALE_PUBLISH":return Object(y.a)(Object(y.a)({},e),{},{isPublished:!0});case"TALE_UNPUBLISH":return Object(y.a)(Object(y.a)({},e),{},{isPublished:!1});case"TALE_STATE_CLEANUP":return{id:null,isPublished:!1,start:null,info:{name:"",description:"",genre:"Other",lang:"English",tags:"",authorEmail:"",originalAuthor:"",storyUrl:"",desiredUrl:"",imgUrl:""},idCounter:0,storylets:{},choices:{},reactos:{vars:{}},storyboard:[]};case"STORYLET_DELETE":var l=function(){var t,n=a.payload,r=e.storylets[n],l=Object(y.a)({},e.storylets),i=Object(y.a)({},e.choices),o=Object(x.a)(r.choices);try{for(o.s();!(t=o.n()).done;){var c=t.value;delete i[c]}}catch(u){o.e(u)}finally{o.f()}for(var s in l)s!==n&&(l[s].choices=l[s].choices.filter((function(e){return i[e].next!==n||(delete i[e],!1)})));return delete l[n],{v:Object(y.a)(Object(y.a)({},e),{},{storylets:l,choices:i})}}();if("object"===typeof l)return l.v;case"STORYLET_UPDATE_FIELD":var i=a.payload,o=i.stID,c=i.fieldName,s=i.value,u=Object(y.a)({},e.storylets[o]);return u[c]=s,Object(y.a)(Object(y.a)({},e),{},{storylets:Object(y.a)(Object(y.a)({},e.storylets),{},Object(j.a)({},o,u))});case"STORYLET_UPDATE_ALL_TEXT":var m=a.payload,d=m.stID,f=m.title,p=m.text,b=Object(y.a)(Object(y.a)({},e.storylets[d]),{},{title:f,text:p});return Object(y.a)(Object(y.a)({},e),{},{storylets:Object(y.a)(Object(y.a)({},e.storylets),{},Object(j.a)({},d,b))});case"STORYBOARD_ADD_SINGLE":return Object(y.a)(Object(y.a)({},e),{},{storyboard:[].concat(Object(C.a)(e.storyboard),[{stID:a.payload.stID}])});case"STORYBOARD_INSERT_AT":var E=a.payload,h=E.sbI,g=E.nextStID,v=E.isRemoveOnly,O=Object(C.a)(e.storyboard);return O=O.slice(0,h+1),v||O.push({stID:g}),Object(y.a)(Object(y.a)({},e),{},{storyboard:O});case"STORYBOARD_SELECT_CHOICE":var S=a.payload,w=S.sbI,I=S.cID,k=Object(C.a)(e.storyboard);return k[w]=Object(y.a)(Object(y.a)({},k[w]),{},{selectedCID:I}),Object(y.a)(Object(y.a)({},e),{},{storyboard:k});case"CHOICE_CREATE":var L,A=a.payload,R=A.fromStID,_=A.toStID,D=A.text,P=Object(y.a)({},e.storylets[R]),U=e.idCounter;_=_||"S"+(++U).toString().padStart(3,"0");var M=e.storylets[_]?Object(y.a)({},e.storylets[_]):T({id:_}),W="C"+(++U).toString().padStart(3,"0"),z=N({id:W,next:_,text:D=D||"Choice - "+W});return P.choices=[].concat(Object(C.a)(P.choices),[W]),Object(y.a)(Object(y.a)({},e),{},{idCounter:U,choices:Object(y.a)(Object(y.a)({},e.choices),{},Object(j.a)({},W,z)),storylets:Object(y.a)(Object(y.a)({},e.storylets),{},(L={},Object(j.a)(L,_,M),Object(j.a)(L,R,P),L))});case"CHOICE_UPDATE_TEXT":var F=a.payload,B=F.cID,H=F.value,V=Object(y.a)({},e.choices[B]);return V.text=H,Object(y.a)(Object(y.a)({},e),{},{choices:Object(y.a)(Object(y.a)({},e.choices),{},Object(j.a)({},B,V))});case"CHOICE_DELETE":var G,Y=a.payload,q=Object(y.a)({},e.choices);for(var K in e.storylets)if(e.storylets[K].choices.indexOf(Y)>-1){G=Object(y.a)({},e.storylets[K]);break}return G.choices=Object(C.a)(G.choices),G.choices.splice(G.choices.indexOf(Y),1),delete q[Y],Object(y.a)(Object(y.a)({},e),{},{storylets:Object(y.a)(Object(y.a)({},e.storylets),{},Object(j.a)({},G.id,G)),choices:q});case"ADD_CID_TO_STID":var J=a.payload,X=J.stID,Z=J.cID,$=Object(y.a)({},e.storylets[X]);return $.choices=[].concat(Object(C.a)($.choices),[Z]),Object(y.a)(Object(y.a)({},e),{},{storylets:Object(y.a)(Object(y.a)({},e.storylets),{},Object(j.a)({},X,$))});default:return e}},k={myTales:[]},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ONLINE_DATA_SAVE_MY_TALES":return Object(y.a)(Object(y.a)({},e),{},{myTales:a.payload});case"ONLINE_DATA_CLEAR_TALES":return{myTales:[]};default:return e}},A=Object(b.combineReducers)({ui:w,user:O,wipTale:I,od:L}),R=A,_=t(130),D=t.n(_),P={key:"rtlroot",storage:D.a},U=Object(h.a)(P,R),M=Object(b.createStore)(U,Object(g.composeWithDevTools)(Object(b.applyMiddleware)(E.a))),W=Object(h.b)(M),z=t(154),F=Object(z.a)({palette:{primary:{light:"#dd3333",main:"#d50000",dark:"#950000",contrastText:"#fff"},secondary:{light:"#ff6333",main:"#ff3d00",dark:"#b22a00",contrastText:"#fff"}},typography:{fontFamily:['"Exo"',"sans-serif"].join(",")},props:{MuiButton:{size:"small"}}}),B=F,H=t(7),V=t(2),G=t(247),Y=t(249),q=t(251),K=t(157),J=t(282),X=t(257),Z=t(288),$=t(131),Q=t.n($),ee=t(103),ae=t.n(ee),te="dev".trim(),ne={prod:"reactale.com",dev:"reactale.site",local:"localhost:9090"},re={prod:"webapp.reactale.com",dev:"webapp.reactale.site",local:"localhost:5000"},le={prod:"",dev:"",local:"",c:".json"},ie="HYBRIDNODE",oe="/r/assets/img/bg/small/storytelling-4203628_640.jpg",ce=function(){return ne[te]},se=("//".concat(ne[te],"/rtale/api/getappver").concat(le[te]),"//".concat(ne[te],"/rtale/api/v2/getloggedinuser").concat(le[te])),ue="//".concat(ne[te],"/rtale/api/v2/getstory").concat(le[te]),me="//".concat(ne[te],"/rtale/api/v2/getmystory").concat(le[te]),de="//".concat(ne[te],"/rtale/api/v2/deletemytale").concat(le[te]),fe="//".concat(ne[te],"/rtale/api/v2/getmystories").concat(le[te]),pe="//".concat(ne[te],"/rtale/api/v2/getmynotifs").concat(le[te]),be=("//".concat(ne[te],"/rtale/api/v2/uploadstorybanner").concat(le[te]),"//".concat(ne[te],"/rtale/api/v2/createstory").concat(le[te])),Ee=("//".concat(ne[te],"/rtale/api/v2/createstory").concat(le[te]),"//".concat(ne[te],"/rtale/api/v2/signin").concat(le[te])),he="//".concat(ne[te],"/rtale/api/v2/signup").concat(le[te]),ge="//".concat(ne[te],"/rtale/api/v2/verifyemail").concat(le[te]),ye=("//".concat(ne[te],"/rtale/api/v2/signout").concat(le[te]),"//".concat(ne[te],"/rtale/api/v2/getallstories").concat(le[te])),ve="//".concat(ne[te],"/rtale/api/v2/publish").concat(le[te]),Oe="//".concat(ne[te],"/rtale/api/v2/resendotp").concat(le[te]),Se="//".concat(ne[te],"/rtale/api/v2/updatenewpswd").concat(le[te]),we="//".concat(ne[te],"/rtale/api/v2/updateusername").concat(le[te]),Ce="//".concat(ne[te],"/rtale/api/v2/updatemyprofile").concat(le[te]),xe="//".concat(ne[te],"/rtale/api/v2/updatemypreferences").concat(le[te]),je="//".concat(ne[te],"/rtale/api/v2/uploadstorybanner").concat(le[te]),Te="//".concat(ne[te],"/rtale/api/v2/execlinkatale").concat(le[te]),Ne=t(80),Ie=t.n(Ne),ke=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic (CAR)","Chad","Chile","China","Colombia","Comoros","Congo, Democratic Republic of the","Congo, Republic of the","Costa Rica","Cote d'Ivoire","Croatia","Cuba","Cyprus","Czechia","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini (formerly Swaziland)","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar (formerly Burma)","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia (formerly Macedonia)","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates (UAE)","United Kingdom (UK)","United States of America (USA)","Uruguay","Uzbekistan","Vanuatu","Vatican City (Holy See)","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],Le=["Algerian Arabic","Amharic","Assamese","Bengali","Bhojpuri","Burmese","Cebuano","Chhattisgarhi","Chittagonian","Czech","Deccan","Dutch","Eastern Punjabi","Egyptian Arabic","English","French","Gan","German","Greek","Gujarati","Hakka","Hausa","Hejazi Arabic","Hindi","Hungarian","Igbo","Indonesian","Iranian Persian","Italian","Japanese","Javanese","Jinyu","Kannada","Kazakh","Khmer","Kinyarwanda","Korean","Magahi","Maithili","Malay","Malayalam","Mandarin","Marathi","Mesopotamian Arabic","Min Bei Chinese","Min Dong Chinese","Min Nan","Moroccan Arabic","Nepali","Nigerian Fulfulde","North Levantine Arabic","Northern Kurdish","Northern Pashto","Northern Uzbek","Odia","Polish","Portuguese","Romanian","Rundi","Russian","Sanaani Spoken Arabic","Saraiki","Sa\u02bdidi Arabic","Sindhi","Sinhala","Somali","South Azerbaijani","South Levantine Arabic","Southern Pashto","Spanish","Sudanese Arabic","Sunda","Sylheti","Tagalog","Tamil","Ta\u02bdizzi-Adeni Arabic","Telugu","Thai","Tunisian Arabic","Turkish","Ukrainian","Urdu","Uyghur","Vietnamese","Western Punjabi","Wu","Xiang Chinese","Yoruba","Yue","Zulu","Other"],Ae=["Absurdist","Action","Adventure","Comedy","Crime","Drama","Fantasy","Historical","Historical fiction","Horror","Magical realism","Mystery","Paranoid fiction","Philosophical","Political","Romance","Saga","Satire","Science fiction","Social","Speculative","Surreal","Thriller","Urban","Western","Whimsical","Other"],Re=["b","i","u","c","s","br","hr"],_e="Reactale - Readers Act, Tales React - World's First Dynamic Story Reading / Writing Platform",De=window.Cookies,Pe=JSON.parse(window.sessionStorage.getItem("RTLSESSION")||"{}"),Ue=function(){return window.sessionStorage.setItem("RTLSESSION",JSON.stringify(Pe))},Me=function(e,a){var t;We(),De.set("rtl_user_tok",a,{domain:"."+ce()}),t={user:e,tok:a},Pe["SESSION_AUTH_DATA"]=t,Ue()},We=function(){De.remove("rtl_user_tok",{domain:"."+ce()})},ze=function(){var e,a=De.get("rtl_user_tok"),t=(e="SESSION_AUTH_DATA",Pe[e]||{}).tok;if(a&&a===t)return t;We(),function(e){delete Pe[e],Ue()}("SESSION_AUTH_DATA")},Fe=function(){We(),Pe={},Ue()},Be=(window.Cookies,window.localStorage.getItem("rtltok"),function(e,a){return Ie.a.post(e,a,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+ze()}})}),He=function(e,a){return Ie.a.get(e,{params:a,headers:{Authorization:"Bearer "+ze()}})},Ve=function(e,a){return a.forEach((function(a){return e+="/"+a})),He(e)},Ge=(window.notify,Object(G.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},toolbar:{padding:"0"},greet:{width:63,fontSize:13,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",marginLeft:7},profileLink:{color:"#fff",textDecoration:"none"},rightBtnsHolder:{display:"flex","& .ico":{fontSize:18}},unisearchRoot:{position:"fixed",top:0,left:0,right:0,zIndex:1200,background:"var(--primary-color)",height:55,display:"flex",alignItems:"center",color:"#fff",padding:"5px 0 5px 10px",transition:"all 300ms ease-in",transform:"translateY(-60px)","&.visible":{transform:"translateY(0)"},"& .MuiInput-underline:before":{borderBottom:"1px solid rgb(255 255 255 / 90%)"},"& .search-field":{minWidth:100,color:"#fff","& svg":{color:"#fff"}},"& .search-box":{margin:"0 10px",flex:1,'& input[type="text"]':{color:"#fff"}}}}}))),Ye={name:"Name",genre:"Genre",lang:"Language",tags:"Tags",authorDisplayName:"Author"},qe=Object(p.b)((function(e){return{user:e.user}}),(function(e){return{openSidebar:function(){return e({type:"UI_SIDEBAR_OPEN"})},updateUser:function(a){return e({type:"USER_UPDATE",payload:{user:a}})}}}))((function(e){var a=Ge(),t=e.openSidebar,n=e.user,r=e.updateUser,o=Object(d.g)(),c=Object(l.useState)(!1),s=Object(H.a)(c,2),u=s[0],m=s[1],f=Object(l.useState)({isVisible:!1,searchFieldName:"tags",searchFieldValue:""}),p=Object(H.a)(f,2),b=p[0],E=p[1],h=function(e){var a=e.target,t=a.name,n=a.value;E(Object(y.a)(Object(y.a)({},b),{},Object(j.a)({},t,n)))},g=function(e){E(Object(y.a)(Object(y.a)({},b),{},{isVisible:e}))};Object(l.useEffect)((function(){window.showLoader(),n.email||He(se).then((function(e){var a=e.data,t=a.status,n=(a.msg,a.user);200===t&&r(n)})).catch((function(e){})).finally((function(){return window.hideLoader()}))}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"flex-grow-1 headerbar"},i.a.createElement(Y.a,{position:"fixed"},i.a.createElement(q.a,{className:a.toolbar},i.a.createElement(K.a,{onClick:t,className:a.menuButton,color:"inherit","aria-label":"menu"},i.a.createElement(Q.a,null)),i.a.createElement("div",{className:ae.a.logoContainer},i.a.createElement("img",{src:"//".concat(re[te],"/assets-img/logos/Reactale-logo-50h-white-bg.png"),alt:"Reactale Logo",className:ae.a.logoImg})),i.a.createElement("div",{className:Object(V.a)(a.rightBtnsHolder,ae.a.rightBtnsHolder)},i.a.createElement(K.a,{color:"inherit",onClick:function(){return g(!0)}},i.a.createElement("i",{className:"fas fa-search ico"})),i.a.createElement(K.a,{color:"inherit",onClick:function(){return e="/notifications",o.push(e);var e}},i.a.createElement("i",{className:"fas fa-bell ico"})),i.a.createElement(K.a,{color:"inherit",onClick:function(){return m(!u)}},i.a.createElement("i",{className:"fas fa-user ico"}))))),i.a.createElement("div",{className:Object(V.a)("profile-link",u&&"visible")},i.a.createElement("a",{href:"/r/my-profile",className:"greet"},"Welcome, ",n.firstname||"Guest","!"))),i.a.createElement("div",{className:Object(V.a)(a.unisearchRoot,b.isVisible&&"visible")},i.a.createElement(J.a,{name:"searchFieldName",value:b.searchFieldName,onChange:h,className:"search-field"},Object.keys(Ye).map((function(e){return i.a.createElement(X.a,{value:e,key:e},Ye[e])}))),i.a.createElement(Z.a,{placeholder:"Type here ...",className:"search-box",name:"searchFieldValue",value:b.searchFieldValue,onChange:h}),i.a.createElement(K.a,{color:"inherit",onClick:function(){if(b.searchFieldValue.trim()){var e="//".concat(ce(),"/search?").concat(b.searchFieldName,"=").concat(b.searchFieldValue);window.location.href=e}}},i.a.createElement("i",{className:"fas fa-search ico"})),i.a.createElement(K.a,{color:"inherit",onClick:function(){return g(!1)}},i.a.createElement("i",{className:"fas fa-times ico"}))))})),Ke=t(256),Je=t(212),Xe=t(265),Ze=t(266),$e=t(267),Qe=t(100),ea=window.notify,aa=function(e,a,t){if(!e)throw new Error("fromStID is mandatory while creating a new choice");return function(n,r){n({type:"CHOICE_CREATE",payload:{fromStID:e,toStID:a,text:t}})}},ta=function(e,a){return function(t,n){t({type:"CHOICE_UPDATE_TEXT",payload:{cID:e,value:a}})}},na=function(e){return function(a){e.idCounter=e.idCounter||100,a({type:"TALE_SET_AS_WIP",payload:e})}},ra=t(281),la=t(258),ia=t(213),oa=t(289),ca=t(263),sa=t(284),ua=t(264),ma=t(260),da=t(261),fa=t(262),pa=t(132),ba=t.n(pa),Ea=Object(G.a)((function(e){return{titleBar:{margin:0,backgroundColor:e.palette.primary.main,color:"#fff",padding:"".concat(e.spacing(.5),"px ").concat(e.spacing(1),"px"),fontSize:e.typography.pxToRem(20),minWidth:300},modalBody:{padding:"".concat(e.spacing(2),"px")},closeIco:{position:"absolute",top:3,right:2,boxSizing:"content-box",padding:"5px 7px",color:"#fff",cursor:"pointer"}}})),ha=function(e){var a=Ea(),t=e.isOpen,n=e.handleClose,r=e.title,l=e.children,o=e.className;return i.a.createElement("div",{className:Object(V.a)(o)},i.a.createElement(ma.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-".concat(r)},i.a.createElement(da.a,{className:a.titleBar},i.a.createElement(ba.a,{className:a.closeIco,onClick:n}),r),i.a.createElement(fa.a,{className:a.modalBody},l)))},ga=function(){return JSON.parse(window.localStorage.getItem("allReactales"))||{}},ya=function(e){return ga()[e]},va=function(e){var a=ga();return delete a[e],function(e){window.localStorage.setItem("allReactales",JSON.stringify(e))}(a),a},Oa=window.notify,Sa=Object(G.a)((function(e){return{titleBar:{margin:0,backgroundColor:e.palette.primary.main,color:"#fff",padding:"".concat(e.spacing(.5),"px ").concat(e.spacing(1),"px"),fontSize:e.typography.pxToRem(20),minWidth:300},modalBody:{padding:"".concat(e.spacing(2),"px")},closeIco:{position:"absolute",top:3,right:2,boxSizing:"content-box",padding:"5px 7px",color:"#fff",cursor:"pointer"}}})),wa=function(e){Sa();var a=e.isOpen,t=e.handleClose,n=e.logOut,r=Object(l.useState)("-"),o=Object(H.a)(r,2),c=o[0],s=o[1];Object(l.useEffect)((function(){s("-")}),[a]);return i.a.createElement(ha,{isOpen:a,handleClose:t,title:"Please Confirm"},i.a.createElement("p",null,"Are you sure you want to logout ?"),i.a.createElement("p",null,i.a.createElement("b",null,"Warning:")," Since Offline Saved Tales are saved in common memory location, they can be seen/deleted by anyone using Reactale in this device (Safer options are saving online or export/import)."),i.a.createElement(ra.a,{my:3},i.a.createElement(la.a,{component:"fieldset"},i.a.createElement(ia.a,{component:"legend"},"So, do you want to delete offline tales ?"),i.a.createElement(oa.a,{"aria-label":"gender",name:"gender1",value:c,onChange:function(e){s(e.target.value)}},i.a.createElement(ca.a,{value:"Y",control:i.a.createElement(sa.a,null),label:"Yes, delete offline tales"}),i.a.createElement(ca.a,{value:"N",control:i.a.createElement(sa.a,null),label:"No, don't delete offline tales"}),i.a.createElement(ca.a,{value:"-",control:i.a.createElement(sa.a,null),label:"Choose either of above 2 options"})))),i.a.createElement(ra.a,{mt:2,className:"text-right"},i.a.createElement(ua.a,{variant:"outlined",color:"primary",onClick:t},"Cancel"),i.a.createElement(ua.a,{variant:"contained",color:"primary",onClick:function(e){"Y"!==c&&"N"!==c?Oa("Select whether to keep or delete offline tales"):("Y"===c&&(window.localStorage.setItem("allReactales","{}"),Oa("Offline tales deleted successfully")),n(),t())},className:"ml-5"},"Log out")))},Ca=(window.Cookies,Object(G.a)((function(e){return{list:{width:250},fullList:{width:"auto"},listItem:{borderBottom:"1px solid "+e.palette.primary.main,"& .ico":{fontSize:20,color:e.palette.primary.main,marginRight:10}},icoInList:{minWidth:30},ico:{fontSize:30},faIco:{fontSize:27,color:e.palette.primary.main}}}))),xa=[{name:"Home",url:"/",iconClass:"fas fa-home ico"},{name:"Gallery",url:"/gallery",iconClass:"fas fa-book-reader ico"},{name:"Search",url:"/search",iconClass:"fas fa-search ico"},{name:"Create Tale",url:"/create-tale",iconClass:"fas fa-plus-square ico"},{name:"My Tales",url:"/my-tales",iconClass:"fas fa-briefcase ico"},{name:"My Profile",url:"/my-profile",iconClass:"fas fa-user ico"},{name:"Notifications",url:"/notifications",iconClass:"fas fa-bell ico"}],ja=Object(p.b)((function(e){return{isSidebarOpen:e.ui.isSidebarOpen,isLogoutModalOpen:e.ui.isLogoutModalOpen,user:e.user}}),(function(e){return{closeSidebar:function(){return e({type:"UI_SIDEBAR_CLOSE"})},openLoginModal:function(){return e({type:"UI_LOGIN_MODAL_OPEN"})},openLogoutModal:function(){return e({type:"UI_LOGOUT_MODAL_OPEN"})},closeLogoutModal:function(){return e({type:"UI_LOGOUT_MODAL_CLOSE"})},resetWIPTale:function(){return e((function(e,a){e({type:"TALE_STATE_CLEANUP"})}))},resetUser:function(){return e({type:"USER_RESET"})},resetFetchedTales:function(){return e({type:"ONLINE_DATA_CLEAR_TALES"})}}}))((function(e){var a=Ca(),t=e.openLoginModal,n=e.user,r=e.resetWIPTale,l=e.resetUser,o=e.resetFetchedTales,c=e.purgePersistedData,s=e.isLogoutModalOpen,u=e.openLogoutModal,f=e.closeLogoutModal,p=Object(d.g)();return i.a.createElement("div",null,i.a.createElement($e.a,{open:e.isSidebarOpen,onClose:e.closeSidebar},i.a.createElement("div",{className:a.list,role:"presentation",onClick:e.closeSidebar,onKeyDown:e.closeSidebar},i.a.createElement(Ke.a,null,xa.map((function(e,t){return i.a.createElement(m.b,{key:e.name,to:e.url,className:"anchor-default-none",onClick:function(a){return function(e,a){["/","/gallery","/search"].includes(a)?(e.preventDefault(),e.stopPropagation(),window.location.href="//"+ce()+a):"/create-tale"===a&&r()}(a,e.url)}},i.a.createElement(Je.a,{button:!0,className:a.listItem},i.a.createElement("i",{className:e.iconClass}),i.a.createElement(Xe.a,{primary:e.name})))})),!n.email&&i.a.createElement(Je.a,{button:!0,className:a.listItem,onClick:t},i.a.createElement("i",{className:"fas fa-sign-in-alt ico"}),i.a.createElement(Xe.a,{primary:"Login"})),n.email&&i.a.createElement(Je.a,{button:!0,className:a.listItem,onClick:u},i.a.createElement(Ze.a,{className:a.icoInList},i.a.createElement("i",{className:"fas fa-sign-in-alt ico"})),i.a.createElement(Xe.a,{primary:"Logout"}))))),i.a.createElement(wa,{isOpen:s,handleClose:f,logOut:function(e){try{Fe(),l(),o(),c(),p.push("/"),window.notify("You are successfully signed out.")}catch(a){window.notify("Some error occured while trying to sign out.")}}}))})),Ta=t(268),Na=t(43),Ia=t(133),ka=t.n(Ia),La=t(134),Aa=t.n(La),Ra=t(135),_a=t.n(Ra),Da=t(136),Pa=t.n(Da),Ua=Object(G.a)((function(e){return{root:{backgroundColor:e.palette.primary.dark,color:"#fff",padding:"".concat(e.spacing(5),"px ").concat(e.spacing(4),"px")},links:{"& a":{textDecoration:"none",color:"#fff !important"}},iconLinks:{display:"flex","& svg":{fontSize:27,marginRight:e.spacing(1)}}}})),Ma=function(e){var a=Ua();return i.a.createElement(ra.a,{className:a.root},i.a.createElement(Ta.a,{container:!0,spacing:3},i.a.createElement(Ta.a,{item:!0,xs:12,md:8},i.a.createElement("p",{className:"mt-0"},"Reactale is what happens when literature embraces technology and comes to life. When a reader reads a Reactale (a.k.a Reactive Tale), the Reactale also reads back its reader and then reacts by magically altering itself depending on the reader's actions / decisions / sorroundings and other learnings that are made available to it about its reader."),i.a.createElement("p",null,"REACTALE marks the birth of a NEW ERA of story telling, in search of a new way, a very REACTIVE one, where no longer will an immersive tale ONLY ENGAGE its readers, but it will INTERACT, and most importantly, it will REACT...")),i.a.createElement(Ta.a,{item:!0,xs:12,md:4},i.a.createElement(ra.a,null,i.a.createElement(Na.a,{variant:"h5",gutterBottom:!0},"Connect"),i.a.createElement("ul",{className:Object(V.a)(a.links,a.iconLinks)},i.a.createElement("li",null,i.a.createElement("a",{href:"https://www.facebook.com/reactale"},i.a.createElement(ka.a,null))),i.a.createElement("li",null,i.a.createElement("a",{href:"https://twitter.com/ReactiveTales"},i.a.createElement(Aa.a,null))),i.a.createElement("li",null,i.a.createElement("a",{href:"mailto:hello@reactale.com"},i.a.createElement(_a.a,null))),i.a.createElement("li",{title:"Android app coming soon"},i.a.createElement("a",null,i.a.createElement(Pa.a,null))))),i.a.createElement(ra.a,{mt:2},i.a.createElement(Na.a,{variant:"h5",gutterBottom:!0},"Links"),i.a.createElement("ul",{className:a.links},i.a.createElement("li",null,i.a.createElement("a",{href:"https://reacto.reactale.com/"},"Reacto")),i.a.createElement("li",null,i.a.createElement("a",{href:"https://reactale.com/rtale/privacy-policy"},"Privacy Policy")),i.a.createElement("li",null,i.a.createElement("a",{href:"https://reactale.com/rtale/terms-and-conditions"},"Terms and Conditions")))))))},Wa=function(e){var a=e.children;return i.a.createElement("div",null,a)},za=t(30),Fa=t.n(za),Ba=t(49),Ha=window.notify,Va=[],Ga=function(){var e=Object(Ba.a)(Fa.a.mark((function e(){var a,t,n,r,l,i;return Fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Va.length>0)){e.next=2;break}return e.abrupt("return",Va);case 2:return e.prev=2,e.next=5,He(ye);case 5:a=e.sent,t=a.data,n=t.status,r=t.tales,l=t.msg,i=t.bannerImgRoot,200===n?Va=r.map((function(e){return e.info.imgUrl&&(e.info.imgUrl=i+"/"+e.info.imgUrl),e})):Ha(l),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:return e.prev=12,e.abrupt("return",Va);case 15:case"end":return e.stop()}}),e,null,[[2,10,12,15]])})));return function(){return e.apply(this,arguments)}}(),Ya=t(269),qa=Object(G.a)((function(e){return{root:{padding:"8px 16px",height:"100%",display:"flex",flexDirection:"column",maxWidth:500,margin:"10px auto",borderTop:"5px solid ".concat(e.palette.primary.main),"& .fillmid":{flexGrow:1,marginBottom:10}}}})),Ka=function(e){var a=qa();return i.a.createElement(Ya.a,{className:a.root},e.children)},Ja=t(270),Xa=t(290),Za=t(271),$a=t(272),Qa=t(273),et=t(101),at=t(137),tt=t.n(at),nt=t(60),rt=t.n(nt),lt=t(138),it=t.n(lt),ot=t(90),ct=t.n(ot),st=Object(G.a)((function(e){return{card:{maxWidth:255,minWidth:245,margin:"0 auto",height:"100%"},media:{height:0,paddingTop:"56.25%"},desc:{height:95,overflow:"hidden"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:et.a[500]},btnLeft:{justifyContent:"flex-start",flexGrow:1,"& svg":{color:e.palette.primary.dark}}}})),ut=function(e){var a=st(),t=e.info,n=e.expandable,r=e.handleEdit,l=e.handleDelete,o=e.handleReadTale,c=e.pageID,s=i.a.useState(!1),u=Object(H.a)(s,2),m=u[0],d=u[1];return i.a.createElement(Ya.a,{className:a.card},i.a.createElement(Ja.a,{avatar:i.a.createElement(Xa.a,{"aria-label":"recipe",className:a.avatar},"S"),title:t.name,subheader:i.a.createElement("span",null,i.a.createElement("span",null,t.genre),t.authorDisplayName&&i.a.createElement("span",null," | "+t.authorDisplayName))}),i.a.createElement(Za.a,{className:a.media,onClick:o,image:t.imgUrl?t.imgUrl:oe,title:"Story Image"}),i.a.createElement($a.a,null,i.a.createElement(Na.a,{variant:"body2",className:a.desc,color:"textSecondary",component:"p"},t.description)),i.a.createElement(Qa.a,{disableSpacing:!0},i.a.createElement("div",{className:a.btnLeft},"HOME"!==c&&i.a.createElement(K.a,{"aria-label":"delete",onClick:l},i.a.createElement(ct.a,null))),i.a.createElement(K.a,{"aria-label":"add to favorites"},i.a.createElement(tt.a,null)),"HOME"!==c&&i.a.createElement(K.a,{"aria-label":"edit",onClick:r},i.a.createElement(it.a,null)),n&&i.a.createElement(K.a,{className:Object(V.a)(a.expand,Object(j.a)({},a.expandOpen,m)),onClick:function(){d(!m)},"aria-expanded":m,"aria-label":"show more"},i.a.createElement(rt.a,null))))},mt=window,dt=mt.showLoader,ft=mt.hideLoader,pt=Object(p.b)((function(e){return{user:e.user}}),(function(e){return{openLoginModal:function(){return e({type:"UI_LOGIN_MODAL_OPEN"})},openLogoutModal:function(){return e({type:"UI_LOGOUT_MODAL_OPEN"})}}}))((function(e){var a=Object(l.useState)({}),t=Object(H.a)(a,2),n=t[0],r=t[1],o=e.history,c=e.location,s=e.openLoginModal,u=e.user,m=e.openLogoutModal;Object(l.useEffect)((function(){document.title="Home | "+_e}),[]),Object(l.useEffect)((function(){dt(),Ga().then((function(e){var a=e.reduce((function(e,a){return e[a.info.genre]=e[a.info.genre]||[],e[a.info.genre].push(a),e}),{});r(a)})).catch((function(e){return console.log(e)})).finally((function(){return ft()}))}),[]),Object(l.useEffect)((function(){var e=new URLSearchParams(c.search),a=e.get("openLogin"),t=!1;if("true"===e.get("openLogout")?(t=!0,setTimeout((function(){m()}),300)):"true"===a&&(t=!0,setTimeout((function(){u&&u.email||s()}),300)),t){var n=c.search.replace("openLogout=true","").replace("openLogin=true","");o.push("".concat(c.pathname).concat(n))}}),[]);return i.a.createElement(ra.a,{pb:5,className:"home-page"},Object.keys(n).length<=0&&i.a.createElement("h2",{className:"mt-25"},"Oops! looks like an issue. We could not fetch any tales at the moment. :("),i.a.createElement(ra.a,null,Object.keys(n).map((function(e,a){return i.a.createElement(ra.a,{key:e,mt:0===a?0:4},i.a.createElement("h1",{className:"category mb-5"},i.a.createElement("span",{className:"name"},e)),i.a.createElement("div",{className:"talecards-holder"},n[e].map((function(e){return i.a.createElement(ra.a,{key:e.info.storyUrl,mr:2},i.a.createElement(ut,{info:e.info,expandable:!1,pageID:"HOME",handleReadTale:function(){return function(e){if("APP"===ie)o.push("/preview/".concat(e));else{var a="//"+ce()+"/read/"+e;window.location.href=a}}(e.info.storyUrl)}}))}))))}))))})),bt=t(104),Et=t(283),ht=t(274),gt=[{token:"((r.dt.year))",desc:"Shows current year e.g. 2019, 2022 etc",test:"Current year is ((r.dt.year))"},{token:"((r.dt.month))",desc:"Shows current month e.g. February, November etc",test:"Current month is ((r.dt.month))"},{token:"((r.dt.day))",desc:"Shows current day e.g. Sunday, Friday etc",test:"Today is ((r.dt.day))"},{token:"((r.dt.date))",desc:"Shows today's date e.g. 9, 21 etc",test:"Today is ((r.dt.date))th day of ((r.dt.month))"},{token:"((r.dt.hour))",desc:"Shows current hour in 12 hours format e.g. 7, 11 etc",test:"Current time is ((r.dt.hour)):((r.dt.min)):((r.dt.sec))"},{token:"((r.dt.hour24))",desc:"Shows current hour in 24 hours format e.g. 19, 22 etc",test:"Current time in 24 hour format is ((r.dt.hour24)):((r.dt.min)):((r.dt.sec))"},{token:"((r.dt.min))",desc:"Shows current min e.g. 32, 55 etc",test:"It is currently ((r.dt.min)) minutes past ((r.dt.hour))"},{token:"((r.dt.sec))",desc:"Shows current sec e.g. 3, 19 etc",test:"Current time is ((r.dt.hour):((r.dt.min):((r.dt.sec))"},{token:"((r.cfg.langSwitch.L))",desc:"Changes the Reactos language. L=en, beng or any language code, e.g ((r.cfg.langSwitch.beng)) for Bengali etc",test:"In Bengali today is ((r.cfg.langSwitch.beng))((r.dt.day))\n        in English today is ((r.cfg.langSwitch.en))((r.dt.day))"},{token:"((r.var.k1=v1))",desc:"To set any custom variable (e.g reader's name / hobby / choice-selection etc) to be used later",test:"Set the variables and then Get the variables. \n        ((r.var.name=Barry Allen))((r.var.superheroName=The Flash))((r.var.tagLine=The Fastest man alive)) \n        \n        Hello ((r.var.name)), I know you are ((r.var.tagLine))! \n        You are ((r.var.superheroName))..."},{token:"((r.var.name1))",desc:"To get any previously SET value",test:"Set the variables and then Get the variables. \n        ((r.var.name=Tony Stark))((r.var.superheroName=Iron Man))((r.var.tagLine=genius billionaire playboy philanthropist)) \n        \n        Hello ((r.var.name)), I know you are a ((r.var.tagLine))! You are ((r.var.superheroName))..."},{token:"((r.if. n1 = n2))",desc:"n1, n2 can be numbers or reactos. Equality operator can be anyone of =, !=, >, !>, <, !<. If the condition is true then the following reacto or body text inside double curly braces i.e. {{ ... }} will be executed, else not",test:"   ((r.if. 5 > 9)) {{ This line should not be shown }}\n            ((r.if. 9 < r.dt.year ))\n            {{ Yes, ((r.dt.year)) is always Greater than 9. ((r.var.secret_message = Reacto is Awesome )) }}\n            ((r.if. 2 = 2)) \n            {{ Number comparison successful }}\n            ((r.if. r.var.secret_message = Reacto is Awesome)) \n            {{ Text comparison successful }}\n        "},{token:"((r.calc. n1 + n2))",desc:"n1, n2 can be numbers or reactos. Maths operator can be anyone of the basic four, i.e. + , - , * and / ",test:"   4 + 5 = ((r.calc. 4 + 5))\n            5 - 3 = ((r.calc. 5 - 3))\n            3 * 2 = ((r.calc. 3 * 2))\n            20 / 5 = ((r.calc. 20 / 5))\n        "}],yt=t(139),vt=t.n(yt),Ot=t(91),St=t.n(Ot),wt=window.notify,Ct=Object(G.a)((function(e){return{root:{position:"relative"},cats:{border:"1px solid ".concat(e.palette.primary.main),display:"inline-block",fontSize:15,margin:3,padding:"5px 10px",borderRadius:2,lineHeight:"15px",cursor:"default","&.selected":{background:e.palette.primary.main,color:"#fff"}},indieReacto:{boxShadow:"0px 1px 3px 1px #a9a9a9",padding:15,margin:"20px 0","& .desc":{color:"rgba(0, 0, 0, .6)"},"& .reacto":{fontSize:16,fontWeight:700,fontFamily:'"Courier New", Courier, monospace',display:"flex",alignItems:"center","& .token":{color:"rgba(0, 0, 0, .8)",marginRight:5}}},invisible:{position:"absolute",left:-1e3}}})),xt=function(e){var a=Ct(),t=e.tryOut,n=Object(l.useState)([]),r=Object(H.a)(n,2),o=r[0],c=r[1],s=Object(l.useState)({}),u=Object(H.a)(s,2),m=u[0],d=u[1],f=Object(l.useState)("All"),p=Object(H.a)(f,2),b=p[0],E=p[1],h=Object(l.createRef)();Object(l.useEffect)((function(){var e,a=["All"],t={All:[]},n=Object(x.a)(gt);try{for(n.s();!(e=n.n()).done;){var r=e.value,l=r.token.substr(4);l=l.substring(0,l.indexOf(".")),a.indexOf(l)<0&&a.push(l),t[l]=t[l]||[],t[l].push(r),t.All.push(r)}}catch(i){n.e(i)}finally{n.f()}c(a),d(t)}),[]);return i.a.createElement(ra.a,{px:1,className:a.root},i.a.createElement("input",{type:"text",ref:h,className:a.invisible}),i.a.createElement(ra.a,{mt:2},o.length>0&&o.map((function(e){return i.a.createElement("span",{key:e,onClick:function(){return E(e)},className:Object(V.a)(a.cats,b===e&&"selected")},e)}))),i.a.createElement("p",null,'Showing "',"".concat(b),'" Reactos'),i.a.createElement(ra.a,null,m[b]&&m[b].map((function(e){return i.a.createElement("div",{className:a.indieReacto,key:e.token},i.a.createElement("div",{className:"reacto"},i.a.createElement("span",{className:"token"},e.token)),i.a.createElement("hr",null),i.a.createElement("div",{className:"desc"},e.desc),i.a.createElement("div",{className:"text-right mt-15"},i.a.createElement(ua.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return a=e.token,console.log(a),console.log(h),h.current.value=a,h.current.select(),h.current.setSelectionRange(0,99999),document.execCommand("copy"),void wt("Reacto copied to clipboard");var a},startIcon:i.a.createElement(vt.a,null)},"Copy"),i.a.createElement(ua.a,{variant:"outlined",color:"primary",size:"small",className:"ml-5",onClick:function(){return t(e.test.replace(/ +/g," "))},endIcon:i.a.createElement(St.a,null)},"Try")))}))))},jt=Object(G.a)((function(e){return{textField:{fontFamily:'"Courier New", Courier, monospace'},interpretedTxt:{whiteSpace:"pre-wrap"}}})),Tt=function(e){var a=jt(),t=e.rTxt,n=Object(l.useState)(""),r=Object(H.a)(n,2),o=r[0],c=r[1],s=Object(l.useState)(""),u=Object(H.a)(s,2),m=u[0],d=u[1];Object(l.useEffect)((function(){c(t)}),[t]);return i.a.createElement(ra.a,null,i.a.createElement("p",null,'Paste any text containing reactos and click "Interpret"'),i.a.createElement(ra.a,null,i.a.createElement(Z.a,{label:"Reactive Text",multiline:!0,rows:"6",variant:"outlined",fullWidth:!0,className:a.textField,value:o,onChange:function(e){return c(e.target.value)}}),i.a.createElement(Ta.a,{container:!0,spacing:1},i.a.createElement(Ta.a,{item:!0,xs:!0},i.a.createElement(ua.a,{variant:"contained",color:"primary",className:"mt-15",fullWidth:!0,size:"small",onClick:function(){c(""),d("")}},"Clear")),i.a.createElement(Ta.a,{item:!0,xs:!0},i.a.createElement(ua.a,{variant:"contained",color:"primary",className:"mt-15",fullWidth:!0,size:"small",onClick:function(){d(window.rto.process(o))}},"Convert"))),i.a.createElement(ra.a,{py:3},m&&i.a.createElement("div",null,i.a.createElement("b",null,i.a.createElement("u",null,"Interpreted Text"))),i.a.createElement("div",{className:a.interpretedTxt},m||"Converted text will appear here ..."))))},Nt=t(285),It=Object(G.a)((function(e){return{root:{position:"relative",padding:"5px 5px 5px 18px"},ico:{position:"absolute",left:-2,top:7,color:e.palette.primary.main,fontSize:16}}})),kt=function(e){var a=It(),t=e.text,n=e.children;return i.a.createElement("li",{className:a.root},i.a.createElement(St.a,{className:a.ico}),t||n)},Lt=t(140),At=t.n(Lt),Rt=Object(G.a)((function(e){return{title:{background:e.palette.primary.main,color:"#fff",padding:"5px 10px",position:"relative","& .ocico":{position:"absolute",right:15,top:4}},body:{border:"5px double ".concat(e.palette.primary.main),borderTop:"none",borderRadius:4,borderTopLeftRadius:0,borderTopRightRadius:0,padding:15}}})),_t=function(e){var a=Rt(),t=e.isOpen,n=e.title,r=e.children,o=e.className,c=Object(l.useState)(!!t),s=Object(H.a)(c,2),u=s[0],m=s[1];return i.a.createElement(ra.a,{className:o},i.a.createElement("div",{className:a.title,onClick:function(){return m(!u)}},i.a.createElement("span",{className:"ocico"},u&&i.a.createElement(At.a,null),!u&&i.a.createElement(rt.a,null)),n),i.a.createElement("div",{className:Object(V.a)(a.body,!u&&"hidden")},r))},Dt=window.notify,Pt=Object(G.a)((function(e){return{liOfRVars:{borderBottom:"1px dotted ".concat(e.palette.primary.main),padding:"5px 10px",overflow:"hidden",textOverflow:"ellipsis",paddingRight:60,fontFamily:'"Courier New", Courier, monospace'}}})),Ut=Object(p.b)((function(e){return{rVars:e.wipTale.reactos?e.wipTale.reactos.vars:{}}}),(function(e){return{updateReactoVars:function(a){return e({type:"TALE_UPDATE_REACTO_VARS",payload:a})}}}))((function(e){var a=Pt(),t=e.rVars,n=e.updateReactoVars,r={name:"",val:"",userCustomizable:!1,helptext:""},o=Object(l.useState)(Object(y.a)({},r)),c=Object(H.a)(o,2),s=c[0],u=c[1],m=function(e){var a=e.target.name,t=e.target.value;("name"!==a||/^[A-Za-z0-9]{0,}$/g.test(t))&&u(Object(y.a)(Object(y.a)({},s),{},Object(j.a)({},a,t)))};return i.a.createElement(ra.a,null,i.a.createElement("p",null,"Let's create some user customizable (or may be not!) reactos ..."),i.a.createElement(ra.a,null,i.a.createElement(_t,{title:"Create Reactos"},i.a.createElement("div",null,"Add a Reacto Variable"),i.a.createElement(Z.a,{label:"Name of the Variable",variant:"outlined",name:"name",fullWidth:!0,required:!0,size:"small",helperText:"Use only alphabets and numbers, no space",className:"mt-25",value:s.name,onChange:m}),i.a.createElement(Z.a,{label:"Value of the Variable",multiline:!0,name:"val",rows:"6",variant:"outlined",helperText:"Incase of customizable reacto this will be used as default/fallback value",required:!0,fullWidth:!0,className:"mt-25",value:s.val,onChange:m}),i.a.createElement(ca.a,{control:i.a.createElement(Nt.a,{checked:s.userCustomizable,onChange:function(e){u(Object(y.a)(Object(y.a)({},s),{},{userCustomizable:e.target.checked}))},name:"userCustomizable"}),label:"Reader customizable"}),i.a.createElement(Z.a,{label:"Hint for reader",multiline:!0,name:"helptext",rows:"2",variant:"outlined",required:!0,fullWidth:!0,helperText:"Give some hint to the reader, e.g. Enter a name for the main character",className:Object(V.a)("mt-25",!s.userCustomizable&&"hidden"),value:s.helptext,onChange:m}),i.a.createElement(Ta.a,{container:!0,spacing:1},i.a.createElement(Ta.a,{item:!0,xs:!0},i.a.createElement(ua.a,{variant:"outlined",color:"primary",className:"mt-15",fullWidth:!0,size:"small",onClick:function(){return u(Object(y.a)({},r))}},"Reset")),i.a.createElement(Ta.a,{item:!0,xs:!0},i.a.createElement(ua.a,{variant:"outlined",color:"primary",className:"mt-15",fullWidth:!0,size:"small",onClick:function(){s.name&&s.val?(n(Object(y.a)(Object(y.a)({},t),{},Object(j.a)({},s.name,s))),u(Object(y.a)({},r)),Dt("Reacto variable ".concat(s.name," added successfully ..."))):Dt("Please fill both variable-name and variable-value fields")}},"Add"))))),i.a.createElement(ra.a,{mt:1},i.a.createElement(_t,{title:"View Reactos Variables"},i.a.createElement("div",null,"Current reacto variables"),i.a.createElement("ul",{className:"mt-15"},t&&Object.keys(t).map((function(e){return i.a.createElement("li",{key:e,className:a.liOfRVars},"((r.var.",e,"))")}))))))})),Mt=Object(G.a)((function(e){return{modal:{maxWidth:600,width:"calc(100vw - 20px)",marginTop:100}}})),Wt=Object(p.b)((function(e){return{isOpen:e.ui.isReactoModalOpen}}),(function(e){return{handleClose:function(){return e({type:"UI_REACTO_MODAL_CLOSE"})}}}))((function(e){var a=Mt(),t=e.isOpen,n=e.handleClose,r=Object(l.useState)(0),o=Object(H.a)(r,2),c=o[0],s=o[1],u=Object(l.useState)(""),m=Object(H.a)(u,2),d=m[0],f=m[1];return i.a.createElement(ha,Object.assign({title:"Reactos"},e,{isOpen:t,handleClose:n,className:a.modal}),i.a.createElement(ra.a,null,i.a.createElement(ra.a,{px:2,mb:2},"Check out the ",i.a.createElement("a",{href:"https://reacto.reactale.com/",target:"_blank",rel:"noopener noreferrer"},"reacto website")),i.a.createElement(bt.a,{square:!0},i.a.createElement(Et.a,{value:c,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){return s(a)},centered:!0,"aria-label":"tabs to for View, try, create reactos"},i.a.createElement(ht.a,{label:"View"}),i.a.createElement(ht.a,{label:"Try"}),i.a.createElement(ht.a,{label:"Customize"}))),i.a.createElement(ra.a,{className:0!==c?"hide":""},i.a.createElement(xt,{tryOut:function(e){f(e),s(1)}})),i.a.createElement(ra.a,{className:1!==c?"hide":""},i.a.createElement(Tt,{rTxt:d})),i.a.createElement(ra.a,{className:2!==c?"hide":""},i.a.createElement(Ut,null))))})),zt=window.notify,Ft=function(e){var a=e.isOpen,t=e.handleClose,n=e.expTaleContent,r=i.a.createRef();return i.a.createElement(ha,{isOpen:a,handleClose:t,title:"Export Reactale"},i.a.createElement(Na.a,{variant:"body1",gutterBottom:!0},"Copy this text and paste it in a text file in case file download is not working (e.g. in mobile browsers)"),i.a.createElement(ra.a,{my:3},i.a.createElement(Z.a,{label:"Outlined",variant:"outlined",value:n,fullWidth:!0,ref:r})),i.a.createElement(ua.a,{variant:"outlined",color:"primary",onClick:function(){return function(e){console.log(e);var a=e.current.getElementsByTagName("input").item(0);a.select(),a.setSelectionRange(0,999999999),document.execCommand("copy"),setTimeout((function(){zt("Text copied to clipboard ...")}),0)}(r)}},"Copy Reactale Text"))},Bt=window.LZString,Ht=function(e){var a=e.isOpen,t=e.handleClose,n=e.setForEditing,r=Object(l.useState)(""),o=Object(H.a)(r,2),c=o[0],s=o[1];return i.a.createElement(ha,{isOpen:a,handleClose:t,title:"Import Reactale"},i.a.createElement(Na.a,{variant:"body1",gutterBottom:!0},"Import a previously exported Reactale file ",i.a.createElement("b",null,"OR"),' optionally you can paste the text from it if "file import" is not working in your browser'),i.a.createElement(ra.a,{mt:2},i.a.createElement("form",{encType:"multipart/form-data"},i.a.createElement("input",{type:"file",accept:"text/txt",name:"files[]",size:"30",onChange:function(e){return function(e){var a=e.target.files[0];console.log(a);var t=new FileReader;t.onload=function(e){return s(e.target.result)},t.readAsText(a)}(e)}}))),i.a.createElement(ra.a,{align:"center",my:1},i.a.createElement(Na.a,{variant:"h6",gutterBottom:!0},i.a.createElement("b",null,"OR"))),i.a.createElement(ra.a,null,i.a.createElement(Z.a,{label:"Paste Content Here",multiline:!0,rows:"4",fullWidth:!0,variant:"outlined",value:c,onChange:function(e){return s(e.target.value)}})),i.a.createElement(ra.a,{mt:2,align:"right"},i.a.createElement(ua.a,{size:"small",variant:"contained",color:"primary",onClick:function(){var e=JSON.parse(Bt.decompressFromEncodedURIComponent(c));n(e),s("")}},"Import")))},Vt=t(275),Gt=t(259),Yt=t(61),qt=t.n(Yt),Kt=window.notify,Jt=Object(G.a)((function(e){return{imgUploadSec:{display:"flex","& .img-preview":{height:90,width:150,border:"1px solid #bbb",borderRadius:4,flexGrow:1,marginRight:9,textAlign:"center",overflow:"hidden",padding:.5,"& img":{maxWidth:"100%",maxHeight:"100%"}},"& .btns":{display:"flex",flexDirection:"column",justifyContent:"space-evenly"}}}})),Xt=Object(p.b)((function(e){return{info:e.wipTale.info,userEmail:e.user.email}}),(function(e){return{typingVal:function(a,t,n){return function(e,a,t,n){("desiredUrl"!==a||/^[A-Za-z0-9-]{0,}$/g.test(t))&&e({type:"TALE_UPDATE_INFO",payload:Object(y.a)(Object(y.a)({},n),{},Object(j.a)({},a,t))})}(e,a,t,n)},updateImgUrl:function(a){return e(function(e){return window.showLoader(),function(a,t){var n=t().wipTale,r=(n.storyboard,Object(Qe.a)(n,["storyboard"]));r.info.imgUrl=e,console.log("tale.info.imgUrl = ",r.info.imgUrl),console.log("imgUrl = ",e),Be(be,r).then((function(e){console.log(e.data);var t=e.data,n=t.status,r=t.tale,l=t.msg;200===n?(ea("Image uploaded successfully"),r=JSON.parse(r),a({type:"TALE_SET_AS_WIP",payload:r})):ea(l)})).catch((function(e){return ea("Some error occured. Please try again later ...")})).finally((function(){return window.hideLoader()})),a({type:"TALE_CREATE"})}}(a))}}}))((function(e){var a=Jt(),t=e.info,n=e.typingVal,r=e.userEmail,o=(e.updateImgUrl,Object(l.useState)(null)),c=Object(H.a)(o,2),s=c[0],u=c[1],m=Object(l.useState)(oe),d=Object(H.a)(m,2),f=d[0],p=d[1];Object(l.useEffect)((function(){p(t.imgUrl?"/ups/banners/".concat(t.imgUrl):oe)}),[t]);return i.a.createElement(ra.a,{py:3},i.a.createElement(Ta.a,{container:!0,spacing:2},i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(Z.a,{fullWidth:!0,variant:"outlined",value:t.name,label:"Name of the Tale",required:!0,onChange:function(e){return n("name",e.target.value,t)},InputProps:t.name.length<=0&&{endAdornment:i.a.createElement(Vt.a,{position:"end"},i.a.createElement(qt.a,null))}})),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(la.a,{variant:"outlined",fullWidth:!0},i.a.createElement(Gt.a,{required:!0},"Genre"),i.a.createElement(J.a,{value:t.genre,fullWidth:!0,onChange:function(e){return n("genre",e.target.value,t)}},Ae.map((function(e){return i.a.createElement(X.a,{value:e,key:e},e)}))))),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(Z.a,{fullWidth:!0,variant:"outlined",value:t.tags,required:!0,label:"Tags",onChange:function(e){return n("tags",e.target.value,t)}})),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(la.a,{variant:"outlined",fullWidth:!0},i.a.createElement(Gt.a,{required:!0},"Language"),i.a.createElement(J.a,{value:t.lang,required:!0,label:"Language",fullWidth:!0,onChange:function(e){return n("lang",e.target.value,t)}},Le.map((function(e){return i.a.createElement(X.a,{value:e,key:e},e)}))))),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(Z.a,{fullWidth:!0,variant:"outlined",label:"Author Display Name",placeholder:"Original creator's name",value:t.authorDisplayName,helperText:"Write the name to display as author ...",onChange:function(e){return n("authorDisplayName",e.target.value,t)}})),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(Z.a,{fullWidth:!0,variant:"outlined",label:"Email",disabled:!0,value:r||"Please login"})),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},!t.storyUrl&&i.a.createElement(Z.a,{fullWidth:!0,variant:"outlined",label:"Custom URL",value:t.desiredUrl,helperText:"Only alphabets, numbers, hyphens (-) allowed. Can not be changed later",onChange:function(e){return n("desiredUrl",e.target.value,t)}}),t.storyUrl&&i.a.createElement(Z.a,{fullWidth:!0,variant:"outlined",label:"Custom URL",disabled:!0,value:"/"+t.storyUrl})),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3,className:Object(V.a)(a.imgUploadSec,!t.storyUrl&&"hide")},i.a.createElement("div",{className:"img-preview"},f&&i.a.createElement("img",{src:f})),i.a.createElement("div",{className:"btns"},i.a.createElement(ua.a,{variant:"outlined",color:"primary",onClick:function(){return document.getElementById("taleimgupload").click()}},"Select"),i.a.createElement(ua.a,{variant:"contained",color:"primary",onClick:function(){return function(e){if(!s)return Kt("Select an image first ...");window.showLoader();var a=new FormData;a.append("storybanner",s),a.append("storyUrl",t.storyUrl),a.append("email",r),Be(je,a).then((function(a){Kt(a.data.msg);var t=a.data.newFileName;t&&n("imgUrl",t,e)})).catch((function(e){return Kt("Some error occurred ...")})).finally((function(){return window.hideLoader()}))}(t)}},"Upload"),i.a.createElement("input",{id:"taleimgupload",type:"file",name:"storyimage",accept:"image/*",onChange:function(e){var a=e.target.files;console.log(a),t.storyUrl?a.length>0&&(u(a[0]),p(URL.createObjectURL(a[0]))):Kt("The tale must be saved online atleast once before uploading banner image")},className:"hide"}))),i.a.createElement(Ta.a,{item:!0,xs:12},i.a.createElement(Z.a,{multiline:!0,rows:"4",fullWidth:!0,label:"Brief description",required:!0,variant:"outlined",value:t.description,onChange:function(e){return n("description",e.target.value,t)},InputProps:t.description.length<=100&&{endAdornment:i.a.createElement(Vt.a,{position:"end"},i.a.createElement(qt.a,null))}}))))})),Zt=t(276),$t=Object(G.a)((function(e){return{choiceBox:{position:"relative",margin:e.spacing(1),flexGrow:1},selectChoice:{position:"absolute",top:-e.spacing(1),left:-e.spacing(1)},choiceText:{width:"100%","& > div":{paddingTop:30}},idTag:{fontSize:13,display:"inline-block",backgroundColor:"#eee",padding:"1px 5px",borderRadius:2,position:"absolute",top:e.spacing(.5),left:e.spacing(3.5)},btnPanel:{position:"absolute",top:0,right:0,zIndex:9,"& .ico":{boxSizing:"content-box",padding:"5px 7px",color:e.palette.primary.main,cursor:"pointer",borderRadius:"50%",verticalAlign:"middle",fontSize:16,display:"inline-block"},"& .ico:active":{backgroundColor:"#eee"}}}})),Qt=Object(p.b)(null,(function(e){return{typingChoiceText:function(a,t){return function(e,a,t){e({type:"CHOICE_UPDATE_TEXT",payload:{cID:a,value:t}})}(e,a,t)},handleSelection:function(a,t,n,r,l){return function(e,a,t,n,r){e({type:"STORYBOARD_SELECT_CHOICE",payload:{sbI:n,cID:a=t?a:""}}),e({type:"STORYBOARD_INSERT_AT",payload:{sbI:n,nextStID:r,isRemoveOnly:!t}})}(e,t,n,r,l)}}}))((function(e){var a=$t(),t=e.c,n=e.stID,r=e.sbI;return t?i.a.createElement(ra.a,{className:a.choiceBox},i.a.createElement("div",{className:a.idTag},i.a.createElement("span",null,"ID: ",t.id)),i.a.createElement("div",{className:a.btnPanel}),i.a.createElement(Z.a,{placeholder:"Enter choice text here",multiline:!0,rows:"3",variant:"outlined",className:a.choiceText,value:t.text,onChange:function(a){return e.typingChoiceText(t.id,a.target.value)}}),i.a.createElement(Nt.a,{checked:e.isSelected,onChange:function(a){return e.handleSelection(n,t.id,a.target.checked,r,t.next)},value:"primary",className:a.selectChoice,inputProps:{"aria-label":"primary checkbox"}})):(console.log(" returning from Choice, as Choice is undefined... "),i.a.createElement(i.a.Fragment,null))})),en=t(32),an=t(33),tn=t(92),nn=t.n(tn),rn=Object(G.a)((function(e){return{root:{fontFamily:"Georgia, serif",fontSize:20,fontWeight:"bold",display:"inline-block",transition:"fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}}})),ln=function(e){var a=rn(),t=e.className;return i.a.createElement("span",Object.assign({},e,{className:Object(V.a)(t,a.root)}),"((r))")},on=t(102),cn=Object(G.a)((function(e){return{textField:{display:"flex",marginTop:e.spacing(2)},box:{border:"5px double ".concat(on.a[500]),borderRadius:4,position:"relative"},title:{border:"5px double ".concat(on.a[500]),position:"absolute",background:"#fff",padding:"0 5px",borderRadius:4,top:-20,left:8,fontSize:14,userSelect:"none",cursor:"default"},joiner:{position:"absolute",height:e.spacing(5),borderLeft:"5px double ".concat(on.a[500]),width:1,left:"50%",top:-45},choiceContainer:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"},addChoiceBtn:{alignSelf:"center",height:90,borderRadius:6,margin:"0 ".concat(e.spacing(1),"px"),textAlign:"center",fontSize:16,lineHeight:" 20px","& span":{display:"block"},"& svg":{fontSize:36}},idTag:{fontSize:14,display:"inline-block",backgroundColor:"#eee",padding:"2px 5px",borderRadius:2,"& .ico":{}},btnPanel:{position:"absolute",top:0,right:0,"& .ico":{boxSizing:"content-box",padding:"15px 8px",color:e.palette.primary.main,borderRadius:"50%",verticalAlign:"middle",fontSize:18,display:"inline-block",cursor:"default","&:hover":{transform:"scale(1.2)"},"&:active":{transform:"scale(.9)"}}}}})),sn=Object(p.b)((function(e){return{choices:e.wipTale.choices}}),(function(e){return{typingStValue:function(a,t,n){return function(e,a,t,n){n({type:"STORYLET_UPDATE_FIELD",payload:{stID:e,fieldName:a,value:t}})}(a,t,n,e)},createAChoice:function(a){return e(aa(a))}}}))((function(e){var a=cn(),t=e.st,n=e.sbI,r=e.sbItem,l=e.createAChoice,o=e.choices,c=e.openFSE,s=e.openReactoModal;return i.a.createElement("div",null,i.a.createElement(ra.a,{className:a.box,px:1,pb:2,pt:2},0!==n&&i.a.createElement("span",{className:a.joiner}),i.a.createElement("span",{className:a.title},"Storylet"),i.a.createElement("div",{className:a.idTag},i.a.createElement("span",null,"ID: ",t.id)),i.a.createElement("div",{className:a.btnPanel},i.a.createElement(ln,{className:"ico",onClick:s}),i.a.createElement(en.a,{icon:an.c,className:"ico",title:"Preview Storylet",onClick:function(){return c(t,"PREVIEW")}}),i.a.createElement(en.a,{icon:an.f,className:"ico",title:"Full Screen Edit",onClick:function(){return c(t,"EDIT")}})),i.a.createElement("form",{noValidate:!0,autoComplete:"off"},i.a.createElement(Z.a,{label:"Storylet title",variant:"outlined",className:a.textField,value:t.title,onChange:function(a){return e.typingStValue(t.id,"title",a.target.value)}}),i.a.createElement(Z.a,{label:"Storylet body",multiline:!0,rows:"6",variant:"outlined",className:a.textField,value:t.text,onChange:function(a){return e.typingStValue(t.id,"text",a.target.value)}}))),i.a.createElement(ra.a,{className:a.box,pt:2,pb:2,my:5},i.a.createElement("span",{className:a.joiner}),i.a.createElement("span",{className:a.title},"Choices"),i.a.createElement("div",{className:a.choiceContainer},t.choices&&t.choices.map((function(e){return i.a.createElement(Qt,{c:o[e],stID:t.id,sbI:n,isSelected:r.selectedCID===e,key:e})})),i.a.createElement(Zt.a,{className:a.addChoiceBtn,variant:"extended",color:"primary",onClick:function(){return l(e.st.id)}},i.a.createElement(nn.a,null),i.a.createElement("span",{className:"txt"},"Add Choice")))))})),un=t(214),mn=t(141),dn=t.n(mn),fn=Object(G.a)((function(e){return{appBar:{position:"fixed","& .MuiToolbar-regular":{minHeight:45}},title:{flex:1},body:{padding:"45px 0 25px 0"}}})),pn=i.a.forwardRef((function(e,a){return i.a.createElement(un.a,Object.assign({direction:"up",ref:a},e))})),bn=function(e){var a=fn(),t=e.isOpen,n=e.handleClose,r=e.title,l=e.children,o=e.className,c=e.btnText,s=e.btnClick,u=e.cancelText;return i.a.createElement("div",{className:Object(V.a)(o)},i.a.createElement(ma.a,{fullScreen:!0,open:t,onClose:n,TransitionComponent:pn},i.a.createElement(Y.a,{className:a.appBar},i.a.createElement(q.a,null,i.a.createElement(Na.a,{variant:"h6",className:a.title},r),c&&i.a.createElement(ua.a,{variant:"contained",onClick:s||n,size:"small",color:"secondary",startIcon:i.a.createElement(dn.a,null)},c),i.a.createElement(ua.a,{color:"inherit",onClick:n,size:"small"},u||"Cancel"))),i.a.createElement("div",{className:a.body},l)))};var En=function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},hn=window.notify,gn=Object(G.a)((function(e){return{xScroller:{width:"100%",display:"flex",justifyContent:"space-between",padding:"0 5px"},formatterBtns:{paddingTop:5,marginBottom:5,color:e.palette.primary.main,overflowX:"auto",overflowY:"hidden","& .ico":{padding:"13px 5px",height:47,width:47,display:"inline-flex",alignItems:"center",justifyContent:"flex-end",cursor:"default","&:hover":{transform:"scale(1.2)"}},"& .ico.reacto":{padding:"13px 0"}},textField:{marginTop:20,"& .MuiInputBase-multiline":{display:"flex",flexDirection:"column",flexGrow:1},"& textarea":{}},editForm:{minHeight:"90vh",paddingTop:5},previewBody:{whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"justify",borderTop:"1px solid #ddd",paddingTop:15}}})),yn=Object(p.b)(null,(function(e){return{saveStValue:function(a,t,n){return e(function(e,a,t){return function(n){return n({type:"STORYLET_UPDATE_ALL_TEXT",payload:{stID:e,title:a,text:t}})}}(a,t,n))},saveChValue:function(a,t){return e(ta(a,t))}}}))((function(e){var a=gn(),t=["EDIT","PREVIEW"],n=e.component,r=e.activeMode,o=e.handleClose,c=e.saveStValue,s=e.saveChValue,m=e.openReactoModal,d=n&&"S"===n.id[0]?"Storylet":"Choice",f=Object(l.createRef)(),p=Object(l.useState)(t[1]),b=Object(H.a)(p,2),E=b[0],h=b[1],g=Object(l.useState)(null),v=Object(H.a)(g,2),O=v[0],S=v[1];Object(l.useEffect)((function(){h(r)}),[r]),Object(l.useEffect)((function(){S(n)}),[n]);var w=function(){var e=f.current.elements.compText.value;if("Storylet"===d){var a=f.current.elements.compTitle.value;c(n.id,a,e),S(Object(y.a)(Object(y.a)({},O),{},{title:a,text:e}))}else"Choice"===d&&s(n.id,e)},C=function(e){t.includes(e)&&("PREVIEW"===e&&w(),h(e))},x=function(e){var a=document.getElementById("comptextareaid"),t=a.selectionStart,n=a.selectionEnd;if(t===n)return hn("Select some text first ...");var r=a.value,l="<b>",i="</b>";"ITALIC"===e?(l="<i>",i="</i>"):"STRIKETHRU"===e?(l="<s>",i="</s>"):"UNDERLINE"===e?(l="<u>",i="</u>"):"CENTER"===e&&(l="<c>",i="</c>"),f.current.elements.compText.value=r.substring(0,t)+l+r.substring(t,n)+i+r.substring(n),a.focus(),a.selectionStart=t,a.selectionEnd=n+l.length+i.length};return i.a.createElement(bn,Object.assign({title:E+" "+d},e,{btnText:"EDIT"===E?"Update":"",btnClick:function(){w(),o(),S(null)}}),i.a.createElement(u.a,{maxWidth:"md"},i.a.createElement(ra.a,{className:Object(V.a)("EDIT"!==E&&"hide")},i.a.createElement("div",{className:a.formatterBtns},i.a.createElement("div",{className:a.xScroller},i.a.createElement(en.a,{icon:an.b,className:Object(V.a)("ico","Storylet"!==d&&"hide"),title:"Bold",onClick:function(){return x("BOLD")}}),i.a.createElement(en.a,{icon:an.d,className:Object(V.a)("ico","Storylet"!==d&&"hide"),title:"Italic",onClick:function(){return x("ITALIC")}}),i.a.createElement(en.a,{icon:an.h,className:Object(V.a)("ico","Storylet"!==d&&"hide"),title:"Underline",onClick:function(){return x("UNDERLINE")}}),i.a.createElement(en.a,{icon:an.g,className:Object(V.a)("ico","Storylet"!==d&&"hide"),title:"Strike Through",onClick:function(){return x("STRIKETHRU")}}),i.a.createElement(en.a,{icon:an.a,className:Object(V.a)("ico","Storylet"!==d&&"hide"),title:"Center",onClick:function(){return x("CENTER")}}),i.a.createElement(ln,{className:"ico reacto",onClick:m}),i.a.createElement(en.a,{icon:an.c,className:Object(V.a)("ico","Storylet"!==d&&"hide"),title:"Preview Storylet",onClick:function(){return C("PREVIEW")}}))),i.a.createElement("form",{noValidate:!0,autoComplete:"off",ref:f,className:Object(V.a)(a.editForm,"flex-full-height")},"Storylet"===d&&i.a.createElement(Z.a,{label:"Storylet title",variant:"outlined",defaultValue:O&&O.title,fullWidth:!0,size:"small",name:"compTitle"}),i.a.createElement(Z.a,{label:d+" body",multiline:!0,variant:"outlined",defaultValue:O&&O.text,fullWidth:!0,className:Object(V.a)(a.textField,"flex-full-height"),name:"compText",id:"comptextareaid"}))),i.a.createElement(ra.a,{className:Object(V.a)("PREVIEW"!==E&&"hide")},(!O||O.text.trim().length<=0)&&i.a.createElement("div",null,"Preview will appear here ..."),O&&O.text.trim().length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:Object(V.a)(a.formatterBtns,"text-right","overflow-none")},i.a.createElement(en.a,{icon:an.f,className:Object(V.a)("ico","Storylet"!==d&&"hide"),title:"Full Screen Edit",onClick:function(){return C("EDIT")}})),i.a.createElement("div",{dangerouslySetInnerHTML:function(e){var a;return{__html:(a=window.rto.process(e),window.DOMPurify.sanitize(a,{ALLOWED_TAGS:Re}))}}(O.text),className:a.previewBody})))))})),vn=Object(p.b)((function(e){return{storyboard:e.wipTale.storyboard,storylets:e.wipTale.storylets}}),(function(e){return{openReactoModal:function(){return e({type:"UI_REACTO_MODAL_OPEN"})}}}))((function(e){var a=Object(l.useState)({}),t=Object(H.a)(a,2),n=t[0],o=t[1],c=e.openReactoModal,s=e.storylets,u=e.storyboard,m=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.EDIT;o({component:e,mode:a,isVisible:!0})};return i.a.createElement(ra.a,{py:3},u&&u.map((function(e,a){var t=s[e.stID];return i.a.createElement(sn,{st:t,key:e.stID,sbI:a,sbItem:e,openFSE:m,openReactoModal:c})})),i.a.createElement(yn,{isOpen:n.isVisible,activeMode:n.mode,handleClose:function(){return o({})},component:n.component,openReactoModal:c}))})),On={exportTale:{desc:"Export this reactale",features:["Export Reactale as both Text and File","Exported Reactale can be imported and worked on","Can be shared easily with reviewers and collaborator","Works offline (Internet not required)","People can see only if you share this file with them"]},saveLocal:{desc:"Save reactale in this device",features:["Will be saved in this device's memory","Will not be available in other devices","Great choice if you use this device only for writing Reactale","Works offline (Internet not required)","ANYONE using this device can see your story"]},saveOnline:{desc:"Save this reactale online",features:["Will be saved online in your logged in account","Availabe accross any device you login from","Great choice if you work from multiple devices","Internet is mandatory and must be logged in","People can see only when you publish your story"]}},Sn=Object(G.a)((function(e){return{cardHeaders:{fontWeight:500,margin:0,textAlign:"center",color:e.palette.primary.main},cardContainer:{marginTop:e.spacing(3)},cardInfo:{padding:"0 10px",marginTop:3},pubSec:{borderTop:"1px solid ".concat(e.palette.primary.main),marginTop:60,paddingTop:5},btnContainer:{display:"flex",justifyContent:"flex-end"}}})),wn=Object(p.b)((function(e){return{tale:e.wipTale}}),(function(e){return{publish:function(){return e({type:"TALE_PUBLISH"})},unpublish:function(){return e({type:"TALE_UNPUBLISH"})}}}))((function(e){var a=Sn(),t=e.exportWIPTale,r=e.saveTaleOnline,l=e.saveTaleLocal,o=e.saveDefault,c=e.markSaveDefault,s=e.tale,m=e.publish,d=e.unpublish,f=window.notify;return i.a.createElement(ra.a,{pb:10},i.a.createElement(u.a,{maxWidth:"md"},i.a.createElement(Ta.a,{container:!0,spacing:2},i.a.createElement(Ta.a,{item:!0,xs:12,md:4,className:a.cardContainer},i.a.createElement(Ka,null,i.a.createElement("h2",{className:a.cardHeaders},"Save Offline"),i.a.createElement("span",{className:a.cardInfo},On.saveLocal.desc),i.a.createElement(ra.a,{my:1},i.a.createElement(ca.a,{control:i.a.createElement(Nt.a,{checked:o===n.OFFLINE,onChange:function(){return c(n.OFFLINE)},name:"OFFLINE"}),label:"Set as default"})),i.a.createElement("div",{className:"fillmid"},i.a.createElement("h3",{className:a.cardHeaders},"Pros & Cons"),i.a.createElement("ul",{className:""},On.saveLocal.features.map((function(e){return i.a.createElement(kt,{key:e},e)})))),i.a.createElement(ua.a,{variant:"contained",color:"primary",onClick:l},"Save Offline"))),i.a.createElement(Ta.a,{item:!0,xs:12,md:4,className:a.cardContainer},i.a.createElement(Ka,null,i.a.createElement("h2",{className:a.cardHeaders},"Save Online"),i.a.createElement("span",{className:a.cardInfo},On.saveOnline.desc),i.a.createElement(ra.a,{my:1},i.a.createElement(ca.a,{control:i.a.createElement(Nt.a,{checked:o===n.ONLINE,onChange:function(){return c(n.ONLINE)},name:"ONLINE"}),label:"Set as default"})),i.a.createElement("div",{className:"fillmid"},i.a.createElement("h3",{className:a.cardHeaders},"Pros & Cons"),i.a.createElement("ul",{className:""},On.saveOnline.features.map((function(e){return i.a.createElement(kt,{key:e},e)})))),i.a.createElement(ua.a,{variant:"contained",color:"primary",onClick:r},"Save Online"))),i.a.createElement(Ta.a,{item:!0,xs:12,md:4,className:a.cardContainer},i.a.createElement(Ka,null,i.a.createElement("h2",{className:a.cardHeaders},"Export Reactale"),i.a.createElement("span",{className:a.cardInfo},On.exportTale.desc),i.a.createElement(ra.a,{my:1},i.a.createElement(ca.a,{control:i.a.createElement(Nt.a,{checked:o===n.EXPORT,onChange:function(){return c(n.EXPORT)},name:"EXPORT"}),label:"Set as default"})),i.a.createElement("div",{className:"fillmid"},i.a.createElement("h3",{className:a.cardHeaders},"Pros & Cons"),i.a.createElement("ul",{className:""},On.exportTale.features.map((function(e){return i.a.createElement(kt,{key:e},e)})))),i.a.createElement(ua.a,{variant:"contained",color:"primary",onClick:t},"Export"))))),i.a.createElement(ra.a,{className:Object(V.a)(!s.info.storyUrl&&"hidden",a.pubSec)},i.a.createElement("h2",null,"Publish / Unpublish"),i.a.createElement("p",null,"Your story will be visible to others only when you publish it. You can publish / unpublish your story anytime you want after your first online save."),i.a.createElement("div",{className:a.btnContainer},i.a.createElement(ua.a,{variant:"contained",color:"primary",className:"",onClick:function(){if(s.info.storyUrl){var e={storyUrl:s.info.storyUrl,_fireID:s._fireID,isPublished:!s.isPublished};Be(ve,e).then((function(a){var t=a.data,n=t.status,r=t.msg;200===n?e.isPublished?(m(),f("Published successfully")):(d(),f("Unpublished successfully")):f(r)})).catch((function(e){f("Some error occured"),console.log(e)}))}else f("The story must be saved online once before publishing")}},!s.isPublished&&i.a.createElement(i.a.Fragment,null,"Publish"),s.isPublished&&i.a.createElement(i.a.Fragment,null,"Un-publish")))))})),Cn=t(95),xn=t.n(Cn),jn=t(93),Tn=t.n(jn),Nn=t(94),In=t.n(Nn),kn=t(71),Ln=t.n(kn),An=t(142),Rn=t.n(An),_n=Object(G.a)((function(e){return{root:{position:"fixed",top:79,right:0,zIndex:9,"& ul":{display:"flex",flexDirection:"column",borderTopLeftRadius:4,borderBottomLeftRadius:4,overflow:"hidden",transition:"all 300ms linear",maxHeight:24,opacity:.7,"&.visible":{maxHeight:180,opacity:.9},"& li":{color:"#fff",background:e.palette.primary.main,borderBottom:"1px solid #fff",height:36,width:36,display:"inline-flex",justifyContent:"center",alignItems:"center"}}}}})),Dn=function(e){var a=_n(),t=Object(l.useState)(!1),n=Object(H.a)(t,2),r=n[0],o=n[1],c=e.openImportModal,s=e.previewTale,u=e.doSaveDefault,m=e.goToTalesFlow,d=function(e){o(!1),e()};return i.a.createElement("div",{className:a.root},i.a.createElement("ul",{className:Object(V.a)(r&&"visible")},i.a.createElement("li",{title:"Toggle Toolbelt",onClick:function(){return o(!r)}},i.a.createElement(Rn.a,null)),i.a.createElement("li",{title:"Import",onClick:function(){return d(c)}},i.a.createElement(Tn.a,null)),i.a.createElement("li",{title:"Preview",onClick:function(){return d(s)}},i.a.createElement(In.a,null)),i.a.createElement("li",{title:"Save (default)",onClick:function(){return d(u)}},i.a.createElement(Ln.a,null)),i.a.createElement("li",{title:"TalesFlow",onClick:function(){return d(m)}},i.a.createElement("span",{className:"talesflowicon"},i.a.createElement(xn.a,null)))))},Pn=Object(G.a)((function(e){return{root:{marginBottom:25,"& ul":{display:"flex",justifyContent:"center","& li":{display:"flex",flexDirection:"column",alignItems:"center",width:70,"& svg":{width:40,height:40,color:e.palette.primary.main,boxShadow:"0 0 5px 2px #ababab",borderRadius:4,marginBottom:9,padding:8},"& .label":{fontSize:14}},"& li:hover":{transform:"scale(1.1)"}}}}})),Un=function(e){var a=Pn(),t=e.openImportModal,n=e.previewTale,r=e.doSaveDefault,l=e.goToTalesFlow;return i.a.createElement("div",{className:a.root},i.a.createElement("ul",null,i.a.createElement("li",{title:"Import",onClick:t},i.a.createElement(Tn.a,null),i.a.createElement("span",{className:"label"},"Import")),i.a.createElement("li",{title:"Preview",onClick:n},i.a.createElement(In.a,null),i.a.createElement("span",{className:"label"},"Preview")),i.a.createElement("li",{title:"Save (default)",onClick:r},i.a.createElement(Ln.a,null),i.a.createElement("span",{className:"label"},"Save")),i.a.createElement("li",{title:"TalesFlow",onClick:l},i.a.createElement("span",{className:"talesflowicon"},i.a.createElement(xn.a,null)),i.a.createElement("span",{className:"label"},"TalesFlow"))))},Mn=t(96),Wn=t.n(Mn),zn=function(){var e=Object(Ba.a)(Fa.a.mark((function e(a,t){return Fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Be(xe,{email:a,partialPrefs:t}));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Fn=window,Bn=Fn.notify,Hn=Fn.showLoader,Vn=Fn.hideLoader,Gn=Wn.a.debounce((function(e,a){zn(e,a)}),5e3),Yn=window,qn=Yn.notify,Kn=Yn.LZString,Jn=Yn.showLoader,Xn=Yn.hideLoader,Zn=Object(p.b)((function(e){return{_wipTale:e.wipTale,_authorEmail:e.user.email,_userPrefs:e.user.prefs}}),(function(e){return{setTaleAsWIP:function(a){return e(na(a))},updateUserPrefs:function(a){return e(function(e){return function(a,t){var n=t().user.email;n&&Gn(n,e),a({type:"USER_PREFS_UPDATE",payload:e})}}(a))}}}))((function(e){var a=e.pageTitle,t=e.isLocalEdit,r=e.setTaleAsWIP,o=e.history,c=e._wipTale,s=e._authorEmail,u=e._userPrefs,m=e.updateUserPrefs,d=Object(l.useState)(0),f=Object(H.a)(d,2),p=f[0],b=f[1],E=Object(l.useState)(!1),h=Object(H.a)(E,2),g=h[0],y=h[1],v=Object(l.useState)(""),O=Object(H.a)(v,2),S=O[0],w=O[1],C=Object(l.useState)(!1),x=Object(H.a)(C,2),j=x[0],T=x[1],N=function(e){return o.push(e)},I=function(){c.storyboard;return Object(Qe.a)(c,["storyboard"])},k=function(){if(D()){var e=I(),a=Kn.compressToEncodedURIComponent(JSON.stringify(e));!function(e,a){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+a),t.setAttribute("download",e),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}("".concat(e.info.name.replace(/\s+/g,"-"),"-").concat(e.id,".rtl"),a),w(a),T(!0)}},L=function(e,a){return!!D()&&(function(e){var a=ga();a[e.id]=e,window.localStorage.setItem("allReactales",JSON.stringify(a))}(a||I()),qn("Successfully saved in device memory"),!0)},A=function(){var e=Object(Ba.a)(Fa.a.mark((function e(){var a,n;return Fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D()){e.next=2;break}return e.abrupt("return");case 2:if(s){e.next=5;break}return qn("Please login to save online..."),e.abrupt("return");case 5:(a=I()).info.authorEmail=s,n=!1,a.info.storyUrl||(n=!0),Jn(),Be(be,a).then((function(e){var a=e.data,l=a.status,i=a.submittedTale,c=a.msg;200===l?(qn("Tale saved online successfully..."),console.log("Setting as WIP",i),i.info.tags=i.info.tags.join(", "),r(i),console.log("isLocalEdit = ",t),t&&(console.log("Also saving in local tale =",i),L(0,i)),n&&o.push("/edit-tale/".concat(i.info.storyUrl))):(console.log("most probably some error occurred"),qn(c))})).catch((function(e){console.log(e)})).finally((function(){return Xn()}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){u.defaultSave===n.OFFLINE?L():u.defaultSave===n.ONLINE?A():u.defaultSave===n.EXPORT&&k()},_=function(){if(L()){var e=I();N("/preview/".concat("__local__").concat(e.id))}},D=function(e){var a=(e||I()).info,t=a.name,n=a.description,r=a.genre,l=a.lang,i=a.tags;return!!(t&&n&&r&&l&&i)||(qn("Fill all the mandatory fields viz. name, description, genre, language, tags"),!1)};return i.a.createElement(ra.a,{py:2},i.a.createElement(Na.a,{variant:"h4",component:"h1"},a," Reactale"),i.a.createElement(ra.a,{mt:2,mb:2,className:"flex-space-between"},i.a.createElement(Na.a,{variant:"subtitle1"},a," a Reactale or import one (using the right hand menu) to edit it.")),i.a.createElement(Dn,{openImportModal:function(){return y(!0)},previewTale:_,doSaveDefault:R,goToTalesFlow:function(){return N("/tales-flow")}}),i.a.createElement(Un,{openImportModal:function(){return y(!0)},previewTale:_,doSaveDefault:R,goToTalesFlow:function(){return N("/tales-flow")}}),i.a.createElement(bt.a,{square:!0},i.a.createElement(Et.a,{value:p,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){b(a)},centered:!0,"aria-label":"tabs to create the story"},i.a.createElement(ht.a,{label:"Intro"}),i.a.createElement(ht.a,{label:"Body"}),i.a.createElement(ht.a,{label:"Finish"}))),i.a.createElement(ra.a,{className:0!==p?"hide":""},i.a.createElement(Xt,null)),i.a.createElement(ra.a,{className:1!==p?"hide":""},i.a.createElement(vn,null)),i.a.createElement(ra.a,{className:2!==p?"hide":""},i.a.createElement(wn,{exportWIPTale:k,saveTaleOnline:A,saveTaleLocal:L,markSaveDefault:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.OFFLINE;return m({defaultSave:e})},saveDefault:u.defaultSave||n.OFFLINE})),i.a.createElement(Ht,{isOpen:g,handleClose:function(){return y(!1)},setForEditing:function(e){r(e),y(!1)}}),i.a.createElement(Ft,{isOpen:j,handleClose:function(){return T(!1)},expTaleContent:S}),i.a.createElement(Wt,null))})),$n=Object(p.b)((function(e){return{_id:e.wipTale.id}}),(function(e){return{createNewTale:function(){return e((function(e,a){e({type:"TALE_CREATE"})}))}}}))((function(e){var a=e.createNewTale,t=e.history,n=e._id;return Object(l.useEffect)((function(){return document.title="Create Tale | "+_e,n||a(),window.hideLoader(),function(){console.log("Leaving Story Create Page... Now is a good time to save changes so far...")}}),[a,n]),i.a.createElement(Zn,{pageTitle:"Create",history:t})})),Qn=window.notify,er=Object(p.b)((function(e){return{_storyUrl:e.wipTale.info.storyUrl,isFullOnlineVersionAvailable:Boolean(e.wipTale.storylets)}}),(function(e){return{setTaleAsWIP:function(a){return e(na(a))}}}))((function(e){var a=Object(l.useState)(!1),t=Object(H.a)(a,2),n=t[0],r=t[1],o=Object(l.useState)(!1),c=Object(H.a)(o,2),s=c[0],u=c[1],m=e.setTaleAsWIP,d=e._storyUrl,f=e.isFullOnlineVersionAvailable,p=e.match,b=e.history;return Object(l.useEffect)((function(){document.title="Edit Tale | "+_e;var e=p.params.id;if("current"===e)window.hideLoader();else if(e.indexOf("__local__")>=0){r(!0),e=e.trim().replace("__local__","");var a=ya(e);m(a),window.hideLoader()}else{if(d===e&&f)return window.hideLoader();if(s)return;u(!0),window.showLoader(),Ve(me,[e]).then((function(e){console.log(e.data);var a=e.data,t=a.status,n=a.tale,r=a.msg;200===t?(console.log("calling setTaleAsWIP online tale",n),m(n)):Qn(r)})).catch((function(e){console.log(e)})).finally((function(){return window.hideLoader()}))}return function(){console.log("Leaving Story Edit Page... Now is a good time to save changes so far...")}}),[m,d,f,p]),i.a.createElement(Zn,{pageTitle:"Edit",isLocalEdit:n,history:b})})),ar=t(143),tr=t.n(ar),nr=t(145),rr=t.n(nr),lr=t(144),ir=t.n(lr),or=Object(G.a)((function(e){return{panel:{width:40,backgroundImage:"linear-gradient(".concat(e.palette.primary.main,", ").concat(e.palette.primary.dark,")"),position:"absolute",left:0,top:50,height:"calc(100vh - 60px)",overflow:"auto"},btnPane:{color:"#fff",padding:"".concat(e.spacing(2),"px 0"),"& li":{height:44,display:"flex",justifyContent:"center",alignItems:"center"},"& li+li":{borderTop:"1px solid #fff"},"& li:active":{backgroundColor:et.a.A400},"& li svg":{fontSize:27}},fa:{fontSize:"22px !important"},autoMagic:{transform:"rotate(-90deg)"},toggleJStick:{}}})),cr=function(e){var a=or(),t=e.history,n=e.deleteComponent,r=e.paintFlowboard,l=e.toggleJStick,o=e.openFSE,c=e.openCreateComponent;return i.a.createElement(ra.a,{className:a.panel},i.a.createElement("ul",{className:a.btnPane},i.a.createElement("li",{title:"Back to Editor",onClick:function(){return e="/edit-tale/current",t.push(e);var e}},i.a.createElement(tr.a,null)),i.a.createElement("li",{title:"Add component",onClick:c},i.a.createElement(nn.a,null)),i.a.createElement("li",{title:"Edit component",onClick:o},i.a.createElement(en.a,{icon:an.f,className:a.fa})),i.a.createElement("li",{title:"View component",onClick:function(e){return o(e,"PREVIEW")}},i.a.createElement(en.a,{icon:an.c,className:a.fa})),i.a.createElement("li",{title:"Toggle joystick",onClick:l},i.a.createElement(ir.a,{className:a.toggleJStick})),i.a.createElement("li",{title:"Auto format",onClick:r},i.a.createElement(en.a,{icon:an.e,className:Object(V.a)(a.fa,a.autoMagic)})),i.a.createElement("li",{title:"Increase draw area"},i.a.createElement(rr.a,null)),i.a.createElement("li",{title:"Delete selected",onClick:n},i.a.createElement(ct.a,null))))},sr=t(146),ur=t.n(sr),mr=t(147),dr=t.n(mr),fr=t(97),pr=t.n(fr),br=t(98),Er=t.n(br),hr=Object(G.a)((function(e){return{container:{position:"absolute"},btn:{position:"absolute",fontSize:30,backgroundColor:et.a[100],borderRadius:6,"&:active":{backgroundColor:et.a[300]}},left:{left:0,top:0},right:{left:60,top:0},up:{left:30,top:-30},down:{left:30,top:30}}})),gr=function(e){var a=hr(),t=e.moveLeft,n=e.moveRight,r=e.moveUp,l=e.moveDown;return i.a.createElement("div",{className:a.container},i.a.createElement(ur.a,{className:Object(V.a)(a.btn,a.left),onClick:t}),i.a.createElement(dr.a,{className:Object(V.a)(a.btn,a.right),onClick:n}),i.a.createElement(pr.a,{className:Object(V.a)(a.btn,a.up),onClick:r}),i.a.createElement(Er.a,{className:Object(V.a)(a.btn,a.down),onClick:l}))},yr=Object(G.a)((function(e){return{cg:{transform:"translate(100px, 100px)"},knot:{fill:et.a[500],strokeWidth:1,stroke:et.a[500]},selectedKnot:{strokeWidth:3,stroke:"#000"},selectedEl:{stroke:"#00f"},rect:{fill:"#fff",strokeWidth:1,stroke:e.palette.primary.main},selectedST:{"& rect":{fill:et.a[500],stroke:et.a[500]},"& text":{fill:"#fff"}},title:{fontSize:14},stid:{fontSize:14,fill:"#000"}}})),vr=function(e){var a=yr(),t=e.stid,n=e.title,r=e.transformStyle,l=e.start,o=e.selectedObj,c=e.handleSelection,s=e.handleMouseDown,u=e.handleMouseUp,m=e.handleMouseMove,d=function(e,a){e.stopPropagation(),c(t,a)};return i.a.createElement("g",{id:t,className:a.cg,style:r,onMouseDown:function(e){return s(e,t)},onMouseUp:function(e){return u(e)},onMouseMove:function(e){return m(e)}},t===l&&i.a.createElement("text",{x:"55",y:"-3",fill:"blue"},"START"),t!==l&&i.a.createElement("circle",{className:Object(V.a)(a.knot,o.id===t&&"IN"===o.type&&a.selectedKnot),cx:75,cy:-3,r:6,onClick:function(e){return d(e,"IN")}}),i.a.createElement("circle",{className:Object(V.a)(a.knot,o.id===t&&"OUT"===o.type&&a.selectedKnot),cx:75,cy:53,r:6,onClick:function(e){return d(e,"OUT")}}),i.a.createElement("g",{className:Object(V.a)(o.id===t&&"ST"===o.type&&a.selectedST),onClick:function(e){return d(e,"ST")}},i.a.createElement("rect",{className:a.rect,width:150,height:50}),i.a.createElement("text",{x:"5",y:"15",className:a.title},n.substr(0,20)||"Click Edit to add text"),i.a.createElement("text",{x:"5",y:"30",className:a.title},n.substr(20,20)),i.a.createElement("text",{x:"5",y:"45",className:a.stid},t)))},Or=Object(G.a)((function(e){return{connector:{strokeWidth:4,stroke:et.a[200]},cid:{fontSize:16,fontWeight:"bold",fill:et.a[500]},selectedConnector:{"& line":{stroke:et.a[900]},"& text":{fill:"#000"}}}})),Sr=function(e){var a=Or(),t=e.c,n=e.selectedObj,r=e.handleSelection;return i.a.createElement("g",{className:Object(V.a)(t.cid===n.id&&"CH"===n.type&&a.selectedConnector),onClick:function(e){e.stopPropagation(),r(t.cid,"CH")}},i.a.createElement("line",{id:t.id,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,className:a.connector}),i.a.createElement("text",{className:a.cid,x:(t.x1+t.x2)/2,y:(t.y1+t.y2)/2},t.cid))},wr=Object(G.a)((function(e){return{modelST:{height:70,border:"2px solid ".concat(e.palette.primary.main),padding:e.spacing(1),textAlign:"center",fontSize:14,display:"flex",flexDirection:"column",justifyContent:"center",borderRadius:4},modelCon:{height:50,display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center","& .con":{height:1,borderTop:"2px dashed ".concat(e.palette.primary.main)}},btnPanel:{display:"flex",marginTop:e.spacing(2),"& button":{flex:1},"& button+button":{marginLeft:e.spacing(2)}}}})),Cr=function(e){var a=wr(),t=e.fromStID,n=e.toStID,r=e.type,o=e.text,c=e.handleSave,s=e.handleClose,u=Object(l.useState)(""),m=Object(H.a)(u,2),d=m[0],f=m[1];Object(l.useEffect)((function(){return f(o)}),[o]);var p=r+" Choice";return i.a.createElement(ha,Object.assign({},e,{title:p}),i.a.createElement(ra.a,{mb:3,mt:1},i.a.createElement(Ta.a,{container:!0},i.a.createElement(Ta.a,{item:!0,xs:!0},i.a.createElement("div",{className:a.modelST},"Storylet ",t)),i.a.createElement(Ta.a,{item:!0,xs:!0,className:a.modelCon},i.a.createElement("span",null,"to"),i.a.createElement("div",{className:"con"})),i.a.createElement(Ta.a,{item:!0,xs:!0},i.a.createElement("div",{className:a.modelST},"Storylet ",n)))),i.a.createElement(Z.a,{label:"Choice Text",value:d,onChange:function(e){return f(e.target.value)},variant:"outlined",fullWidth:!0}),i.a.createElement(ra.a,{className:a.btnPanel},i.a.createElement(ua.a,{variant:"outlined",color:"primary",onClick:s},"Cancel"),i.a.createElement(ua.a,{variant:"contained",color:"primary",onClick:function(){return c(t,n,d,r)}},"Done")))},xr=window.notify,jr=Object(G.a)((function(e){return{btnPanel:{display:"flex",marginTop:e.spacing(2),"& button":{flex:1},"& button+button":{marginLeft:e.spacing(2)}}}})),Tr={compType:"",fromSTID:"",toSTID:""},Nr=function(e){var a=jr(),t=e.handleClose,n=e.storylets,r=e.isOpen,o=e.openEditChoiceModal,c=e.createNewChoice,s=Object(l.useState)(Tr),u=Object(H.a)(s,2),m=u[0],d=u[1];Object(l.useEffect)((function(){d(Tr)}),[r]);var f=function(e){var a=e.target,t=a.name,n=a.value;d(Object(y.a)(Object(y.a)({},m),{},Object(j.a)({},t,n)))};return i.a.createElement(ha,Object.assign({},e,{title:"Create a Component"}),i.a.createElement(ra.a,{mb:3,mt:1},i.a.createElement(la.a,{variant:"outlined",className:"flex"},i.a.createElement(Gt.a,{id:"select-comp-type"},"Select type"),i.a.createElement(J.a,{labelId:"select-comp-type",value:m.compType,onChange:f,label:"Component Type",name:"compType",fullWidth:!0,size:"small"},i.a.createElement(X.a,{value:""},i.a.createElement("em",null,"None")),i.a.createElement(X.a,{value:"ST"},"Storylet"),i.a.createElement(X.a,{value:"CH"},"Choice"))),i.a.createElement(la.a,{variant:"outlined",className:"flex mt-15"},i.a.createElement(Gt.a,{id:"select-from-storylet"},"From storylet"),i.a.createElement(J.a,{labelId:"select-from-storylet",value:m.fromSTID,onChange:f,label:"From storylet",name:"fromSTID",fullWidth:!0,size:"small"},i.a.createElement(X.a,{value:""},i.a.createElement("em",null,"None")),Object.values(n).map((function(e){return i.a.createElement(X.a,{key:e.id,value:e.id},"".concat(e.id," - ").concat(e.title))})))),"CH"===m.compType&&i.a.createElement(la.a,{variant:"outlined",className:"flex mt-15"},i.a.createElement(Gt.a,{id:"select-to-storylet"},"To storylet"),i.a.createElement(J.a,{labelId:"select-to-storylet",value:m.toSTID,onChange:f,label:"To storylet",name:"toSTID",fullWidth:!0,size:"small"},i.a.createElement(X.a,{value:""},i.a.createElement("em",null,"None")),Object.values(n).map((function(e){return i.a.createElement(X.a,{key:e.id,value:e.id},"".concat(e.id," - ").concat(e.title))}))))),i.a.createElement(ra.a,{className:a.btnPanel},i.a.createElement(ua.a,{variant:"outlined",color:"primary",onClick:t},"Cancel"),i.a.createElement(ua.a,{variant:"contained",color:"primary",onClick:function(e){if(m.compType&&m.fromSTID&&("CH"!==m.compType||m.toSTID))return"CH"===m.compType?m.fromSTID===m.toSTID?void xr("FROM storylet and TO storylet cannot be same ..."):(t(),void o(m.fromSTID,m.toSTID)):void("ST"===m.compType&&(c(m.fromSTID),t()));xr("Please fill all the fields ...")}},"Create")))};function Ir(e,a){return function(e,a){var t=0,n={},r=Object.values(e).reduce((function(e,a){return e>a.length?e:a.length}),0),l=150*r+50*(r-1);for(;++t,e[t];){var i=e[t].length;if(i<r)for(var o=(l-150*i)/(i+1),c=0;c<e[t].length;c++){var s=e[t][c];n[s]={id:s},!a&&n[s].x&&n[s].y||(n[s].x=150*c+(c+1)*o+20,n[s].y=130*(t-1)+30)}else for(var u=0;u<e[t].length;u++){var m=e[t][u];n[m]={id:m},!a&&n[m].x&&n[m].y||(n[m].x=150*u+50*u+20,n[m].y=130*(t-1)+30)}}return function(e){for(var a in e)e[a].transformStyle=kr(e[a])}(n),n}(function(e,a){var t,n={},r=function(e,a){var t=Object(C.a)(e);for(var n in a){var r=t.indexOf(a[n].next);r>-1&&t.splice(r,1)}return t}(Object.keys(e),a),l=function t(r,l){n[l]=n[l]||[],n[l].push(r.id);var i,o=Object(x.a)(r.choices);try{for(o.s();!(i=o.n()).done;){var c=i.value,s=a[c];t(e[s.next],l+1)}}catch(u){o.e(u)}finally{o.f()}},i=Object(x.a)(r);try{for(i.s();!(t=i.n()).done;){var o=t.value,c=Object.keys(n).length+1;l(e[o],c)}}catch(h){i.e(h)}finally{i.f()}var s,u=[],m=Object.keys(n).sort().reverse(),d=Object(x.a)(m);try{for(d.s();!(s=d.n()).done;){var f=s.value;n[f]=Array.from(new Set(n[f]));var p,b=Object(x.a)(n[f]);try{for(b.s();!(p=b.n()).done;){var E=p.value;u.indexOf(E)>-1?n[f].splice(n[f].indexOf(E),1):u.push(E)}}catch(h){b.e(h)}finally{b.f()}}}catch(h){d.e(h)}finally{d.f()}return n}(e,a),!0)}function kr(e){return{transform:"matrix(1, 0, 0, 1, "+e.x+", "+e.y+")"}}var Lr,Ar,Rr=window,_r=Rr.notify,Dr=Rr.hideLoader,Pr="CREATE_COMPONENT",Ur=Object(G.a)((function(e){return{outerContainer:{position:"relative",marginLeft:35,paddingTop:7,height:"calc(100vh - 100px)"},svgContainer:{border:"7px double ".concat(e.palette.primary.main),height:"100%",overflow:"auto",borderRadius:e.spacing(1)},mainSVG:{height:2e3,minWidth:"100%",width:2e3,"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none",userSelect:"none",borderRadius:15,"& *":{"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none",userSelect:"none"}},joystick:{position:"absolute",bottom:83,left:30}}})),Mr=Object(p.b)((function(e){return{start:e.wipTale.start,storylets:e.wipTale.storylets,choices:e.wipTale.choices}}),(function(e){return{createNewTale:function(){return e((function(e,a){e({type:"TALE_CREATE"})}))},initStoryboard:function(){return e({type:"STORYBOARD_INITIALIZE"})},deleteStorylet:function(a){return e({type:"STORYLET_DELETE",payload:a})},deleteChoice:function(a){return e({type:"CHOICE_DELETE",payload:a})},createNewChoice:function(a,t,n){return e(aa(a,t,n))},updateChoiceText:function(a,t){return e(ta(a,t))}}}))((function(e){var a=Ur(),t=e.storylets,n=e.choices,r=e.start,o=e.history,c=e.createNewTale,s=e.initStoryboard,u=e.deleteStorylet,m=e.deleteChoice,d=e.createNewChoice,f=e.updateChoiceText,p=Object(l.useState)({}),b=Object(H.a)(p,2),E=b[0],h=b[1],g=Object(l.useState)({}),v=Object(H.a)(g,2),O=v[0],S=v[1],w=Object(l.useState)(!1),C=Object(H.a)(w,2),T=C[0],N=C[1],I=Object(l.useState)(""),k=Object(H.a)(I,2),L=k[0],A=k[1],R=Object(l.useState)({x:0,y:0}),_=Object(H.a)(R,2),D=_[0],P=_[1],U=Object(l.useState)({id:"",type:""}),M=Object(H.a)(U,2),W=M[0],z=M[1],F=Object(l.useState)({}),B=Object(H.a)(F,2),G=B[0],Y=B[1],q=Object(l.useState)(""),K=Object(H.a)(q,2),J=K[0],X=K[1],Z=Object(l.useState)({}),$=Object(H.a)(Z,2),Q=$[0],ee=$[1];Object(l.useEffect)((function(){document.title="TalesFlow | "+_e}),[]);var ae=Object(l.useCallback)((function(){var e=Ir(t,n),a=function(e,a,t){var n={};for(var r in e){var l,i=e[r],o=Object(x.a)(i.choices);try{for(o.s();!(l=o.n()).done;){var c=l.value,s=a[c],u=t[i.id].x+75,m=t[i.id].y+53,d=t[s.next].x+75,f=t[s.next].y+-3,p=i.id+"---"+s.next;n[p]={id:p,cid:c,x1:u,y1:m,x2:d,y2:f}}}catch(b){o.e(b)}finally{o.f()}}return n}(t,n,e);h(e),S(a),Dr()}),[t,n]);Object(l.useEffect)((function(){return r||c(),ae(),function(){return s()}}),[c,r,ae,s]);var te=function(e,a){"OUT"===W.type&&"IN"===a&&ne(W.id,e),z({id:e,type:a})},ne=function(e,a){var t=e+"---"+a;Y({isOpen:!0,fromStID:e,toStID:a,type:O[t]?"Edit":"Create",text:O[t]?n[O[t].cid].text:""})},re=function(e,a){e.stopPropagation(),A(a),P({x:e.pageX,y:e.pageY})},le=function(e){e.stopPropagation(),A(""),P({x:0,y:0})},ie=function(e,a,t){if(e&&E[e]){var n={id:e,x:E[e].x+a,y:E[e].y+t};n.transformStyle=kr(n);var r=Object(y.a)(Object(y.a)({},E),{},Object(j.a)({},e,n));h(r),function(e){var a=Object(y.a)({},O);for(var t in a){var n=a[t],r=n.id.split("---"),l=r[0],i=r[1];e.id===l?((n=Object(y.a)({},n)).x1=e.x+75,n.y1=e.y+53,a=Object(y.a)(Object(y.a)({},a),{},Object(j.a)({},n.id,n))):e.id===i&&((n=Object(y.a)({},n)).x2=e.x+75,n.y2=e.y+-3,a=Object(y.a)(Object(y.a)({},a),{},Object(j.a)({},n.id,n)))}S(a)}(n)}},oe=Wn.a.throttle((function(e){if(L){var a=e.pageX-D.x,t=e.pageY-D.y;ie(L,a,t),P({x:e.pageX,y:e.pageY})}}),1e3),ce=function(e,a){"ST"===W.type&&ie(W.id,e,a)};return Object.keys(t).length!==Object.keys(E).length||Object.keys(n).length!==Object.keys(O).length?i.a.createElement(ra.a,null,"Updating ..."):i.a.createElement(ra.a,null,i.a.createElement(cr,{history:o,deleteComponent:function(){if(W.id&&"IN"!==W.type&&"OUT"!==W.type)if(W.id===r)_r("Start storylet can not be deleted. Please edit it to your choice.");else{var e="";"S"===W.id[0]?e="STORYLET":"C"===W.id[0]&&(e="CHOICE"),window.confirm("Are you sure you want to delete ".concat(e," ").concat(W.id,". Once deleted, it may not be recovered back."))&&("STORYLET"===e?u(W.id):"CHOICE"===e&&m(W.id))}else _r("Select a storylet or choice (connector) first. Then click on delete.")},paintFlowboard:ae,toggleJStick:function(){return N(!T)},openFSE:function(e){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EDIT";W.id&&"IN"!==W.type&&"OUT"!==W.type?("S"===W.id[0]?a=t[W.id]:"C"===W.id[0]&&(a=n[W.id]),ee({component:a,activeMode:r,isVisible:!0})):_r("Select a storylet or choice (connector) to "+r.toLowerCase())},openCreateComponent:function(){return X(Pr)}}),i.a.createElement("div",{className:a.outerContainer},i.a.createElement("div",{className:a.svgContainer,onClick:function(){return z({})}},i.a.createElement("svg",{className:a.mainSVG,onMouseUp:function(e){return le(e)}},Object.values(O).map((function(e){return i.a.createElement(Sr,{c:e,key:e.id,selectedObj:W,handleSelection:te})})),Object.values(E).map((function(e){var a=t[e.id];return i.a.createElement(vr,{stid:a.id,title:a.title,transformStyle:e.transformStyle,start:r,key:a.id,selectedObj:W,handleSelection:te,handleMouseDown:re,handleMouseUp:le,handleMouseMove:oe})})))),i.a.createElement("div",{className:Object(V.a)(a.joystick,!T&&"hide")},i.a.createElement(gr,{moveLeft:function(){return ce(-10,0)},moveRight:function(){return ce(10,0)},moveUp:function(){return ce(0,-10)},moveDown:function(){return ce(0,10)}}))),i.a.createElement(Cr,Object.assign({isOpen:G.isOpen},G,{handleClose:function(){return Y({})},handleSave:function(e,a,t,n){if("Create"===n)d(e,a,t);else if("Edit"===n){var r=O[e+"---"+a].cid;f(r,t)}else console.log("Could not understand the type in saveEditCreateChoice");Y({})}})),i.a.createElement(yn,{isOpen:Q.isVisible,activeMode:Q.activeMode,handleClose:function(){return ee({})},component:Q.component}),i.a.createElement(Nr,{isOpen:J===Pr,handleClose:function(){return X("")},storylets:t,openEditChoiceModal:ne,createNewChoice:d}))})),Wr=window.notify,zr=function(e){var a=Object(l.useState)([]),t=Object(H.a)(a,2),n=t[0],r=t[1],o=Object(l.useState)(""),c=Object(H.a)(o,2),s=c[0],u=c[1],m=e.history;Object(l.useEffect)((function(){!function(){var e=ga();r(Object.values(e))}()}),[]);var d=function(e){return m.push(e)};return i.a.createElement(ra.a,{py:3},i.a.createElement(Ta.a,{container:!0,spacing:2},n.length<=0&&i.a.createElement("h2",null,"Oops! Looks like you have not saved any tales in your local device"),n.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Ta.a,{item:!0,xs:12},i.a.createElement("form",{noValidate:!0,autoComplete:"off",className:"filter-form"},i.a.createElement(Z.a,{placeholder:"Type in to filter",fullWidth:!0,value:s,onChange:function(e){return u(e.target.value)}}))),n.filter((function(e){return Object.values(e.info).join(" ").toLocaleLowerCase().includes(s.toLocaleLowerCase())})).map((function(e){return i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:4,lg:3,key:e.id},i.a.createElement(ut,{info:e.info,expandable:!1,handleReadTale:function(){return a=e.id,d("/preview/".concat("__local__").concat(a));var a},handleEdit:function(){return a=e.id,d("/edit-tale/".concat("__local__").concat(a));var a},handleDelete:function(){return function(e){if(window.confirm("Are you sure you want to delete this local tale. It can not be recovered later (unless you have exported it and import it later)")){var a=va(e);r(Object.values(a)),Wr("Local tale deleted successfully")}}(e.id)}}))})))))},Fr=t(148),Br=t.n(Fr),Hr=window,Vr=Hr.notify,Gr=Hr.showLoader,Yr=Hr.hideLoader,qr=Object(p.b)((function(e){return{myOnlineTales:e.od.myTales}}),(function(e){return{cacheMyTales:function(a){return e({type:"ONLINE_DATA_SAVE_MY_TALES",payload:a})}}}))((function(e){var a=e.history,t=e.authorEmail,n=e.myOnlineTales,r=e.cacheMyTales,o=Object(l.useState)(""),c=Object(H.a)(o,2),s=c[0],u=c[1];Object(l.useEffect)((function(){n.length>0||t&&m()}),[t]);var m=function(){Gr(),He(fe).then((function(e){console.log(e.data);var a=e.data,t=a.status,n=a.tales,l=a.msg,i=a.bannerImgRoot;200===t?(n=n.map((function(e){return e.info.imgUrl&&(e.info.imgUrl=i+"/"+e.info.imgUrl),e})),r(n)):Vr(l)})).finally((function(){return Yr()}))},d=function(e){return t="/edit-tale/".concat(e),a.push(t);var t};return i.a.createElement(ra.a,{py:3},!t&&i.a.createElement("h2",null,"Please login to see your online tales ..."),t&&n.length<=0&&i.a.createElement("h2",null,"Sorry you do not have any tales saved online ..."),t&&n.length>0&&i.a.createElement(Ta.a,{container:!0,spacing:2},i.a.createElement(Ta.a,{item:!0,xs:12},i.a.createElement("form",{noValidate:!0,autoComplete:"off",className:"filter-form"},i.a.createElement(Z.a,{placeholder:"Type in to filter",fullWidth:!0,value:s,onChange:function(e){return u(e.target.value)}}))),i.a.createElement(Ta.a,{item:!0,xs:12,className:"text-right"},i.a.createElement(ua.a,{variant:"contained",color:"primary",size:"small",startIcon:i.a.createElement(Br.a,null),onClick:m},"Refresh")),n.filter((function(e){return Object.values(e.info).join(" ").toLocaleLowerCase().includes(s.toLocaleLowerCase())})).map((function(e){return i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:4,lg:3,key:e.info.storyUrl},i.a.createElement(ut,{id:e.info.storyUrl,info:e.info,expandable:!1,handleReadTale:function(){return a=e.info.storyUrl,void(window.location.href="//"+ce()+"/read/"+a);var a},handleEdit:function(){return d(e.info.storyUrl)},handleDelete:function(){return a=e.info.storyUrl,void(window.confirm("Are you sure you want to delete this tale? Once deleted, it may not be recovered back. (Better export and keep a copy before deleting ...)")&&(Gr(),Be(de,{storyUrl:a}).then((function(e){var a=e.data,t=a.status,n=a.msg;Vr(n),200!==t&&1500!==t||m()})).finally((function(){return Yr()}))));var a}}))}))))})),Kr=Object(p.b)((function(e){return{authorEmail:e.user.email}}))((function(e){var a=Object(l.useState)(0),t=Object(H.a)(a,2),n=t[0],r=t[1],o=e.history,c=e.authorEmail;return Object(l.useEffect)((function(){document.title="My Tales | "+_e,c&&r(1),window.hideLoader()}),[]),i.a.createElement(ra.a,{py:2},i.a.createElement(Na.a,{variant:"h4",component:"h1"},"My Tales"),i.a.createElement(ra.a,{mt:2,mb:4,className:"flex-space-between"},i.a.createElement(Na.a,{variant:"subtitle1"},"Here you will find all the tales created by you")),i.a.createElement(bt.a,{square:!0},i.a.createElement(Et.a,{value:n,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){r(a)},centered:!0,"aria-label":"tabs to create the story"},i.a.createElement(ht.a,{label:"Local"}),i.a.createElement(ht.a,{label:"Online"}))),i.a.createElement(ra.a,{className:0!==n?"hide":""},i.a.createElement(zr,{history:o})),i.a.createElement(ra.a,{className:1!==n?"hide":""},i.a.createElement(qr,{history:o,authorEmail:c})))})),Jr=t(149),Xr=t.n(Jr),Zr=Object(G.a)((function(e){return{bannerImg:{maxWidth:"100%",maxHeight:300,margin:"0 auto",display:"block",background:"#000",borderRadius:4},titleLine:{fontSize:25,margin:"0 0 10px 0"},genre:{borderTop:"1px solid #d5000040",paddingTop:10,marginTop:5},tags:{listStyle:"none",padding:"5px 0 0",margin:0,"& > li":{padding:"3px 8px",margin:"2px 3px",background:"rgba(213, 0, 0, 0.6)",color:"#fff",fontSize:12,borderRadius:8,display:"inline-flex",alignItems:"center"},"& > li > svg":{fontSize:15,marginRight:3}},descSec:{position:"relative",margin:"30px 0",borderTop:"1px solid #d5000040",borderBottom:"10px solid #ffcdd2","& .ico":{position:"absolute",top:25,right:0},"& .desc":{display:"none"},"&.open .desc":{display:"block"}}}})),$r=function(e){var a=Zr(),t=Object(l.useState)(!1),n=Object(H.a)(t,2),r=n[0],o=n[1],c=e.info,s=e.isCutomizable,u=e.onCustomize;return i.a.createElement("div",null,i.a.createElement(Ta.a,{container:!0,spacing:3},i.a.createElement(Ta.a,{item:!0,xs:12,md:7},i.a.createElement("img",{src:c.imgUrl?"/ups/banners/".concat(c.imgUrl):oe,className:a.bannerImg,alt:"Tale Banner Image"})),i.a.createElement(Ta.a,{item:!0,xs:12,md:5},i.a.createElement("h1",{className:a.titleLine},i.a.createElement("span",null,c.name)),i.a.createElement("div",null,i.a.createElement("div",null,c.authorDisplayName||"Reactale Author"),i.a.createElement("div",{className:a.genre},"Genre: ",c.genre),i.a.createElement("ul",{className:a.tags},(Array.isArray(c.tags)?c.tags:c.tags.split(",")).map((function(e){return i.a.createElement("li",{key:e},i.a.createElement(Xr.a,null),e)})))),i.a.createElement("div",null,s&&i.a.createElement(ua.a,{variant:"outlined",color:"primary",className:"mt-15",fullWidth:!0,size:"small",onClick:u},"Customize and Gift")))),i.a.createElement("div",{className:Object(V.a)(a.descSec,r&&"open")},i.a.createElement("h2",{onClick:function(){return o(!r)}},"Description"),i.a.createElement("span",{className:"ico"},r&&i.a.createElement(pr.a,{className:"up"}),!r&&i.a.createElement(Er.a,{className:"down"})),i.a.createElement("p",{className:"desc"},c.description)))},Qr=t(150),el=t.n(Qr),al=window.notify,tl=Object(G.a)((function(e){return{root:{position:"relative"},backBtn:{position:"absolute",top:18,left:2,width:32,height:34,borderRadius:"50%",background:e.palette.primary.main,color:"#fff"}}})),nl=function(e){var a=Object(l.useState)(null),t=Object(H.a)(a,2),n=t[0],r=t[1],o=e.match,c=e.history,s=tl(),u=Object(l.useState)({}),m=Object(H.a)(u,2),d=m[0],f=m[1],p=Object(l.useState)(!1),b=Object(H.a)(p,2),E=b[0],h=b[1],g=Object(l.useState)({}),v=Object(H.a)(g,2),O=v[0],S=v[1];Object(l.useEffect)((function(){document.title="Preview Tale | "+_e}),[]);var w=function(e){S(Object(y.a)(Object(y.a)({},O),{},Object(j.a)({},e.target.name,e.target.value)))},C=function(e){if(e.reactos&&e.reactos.vars){var a={},t={};Object.values(e.reactos.vars).forEach((function(e){a[e.name]=e.val,e.userCustomizable&&(t[e.name]=e)})),f(t),window.rto.setAllVars(a)}};Object(l.useEffect)((function(){var e=o.params.id;if(e.indexOf("__local__")>=0){e=e.trim().replace("__local__","");var a=ya(e);r(a),C(a),setTimeout((function(){document.title="Preview Tale | ".concat(a.info.name," | ")+_e,window.rto.createTimeline("timelineContainer",a),window.hideLoader()}),500)}else window.showLoader(),Ve(ue,[e]).then((function(e){var a=e.data,t=a.status,n=a.tale,l=a.msg;200===t?(r(n),C(n),setTimeout((function(){document.title="Preview Tale | ".concat(n.info.name," | ")+_e,window.rto.createTimeline("timelineContainer",n)}),500)):al(l)})).catch((function(e){console.log(e)})).finally((function(){return window.hideLoader()}))}),[o]);return n?i.a.createElement(ra.a,{py:2,mb:5,className:Object(V.a)(s.root,"dev-mode")},i.a.createElement($r,{info:n.info,isCutomizable:Object.values(d).length>0,onCustomize:function(){return h(!0)}}),i.a.createElement(el.a,{onClick:function(){return c.goBack()},className:s.backBtn}),i.a.createElement("h2",null,n.info.name),i.a.createElement("div",{id:"timelineContainer"}),i.a.createElement(ha,{isOpen:E,handleClose:function(){return h(!1)},title:"Gift-a-Tale"},Object.values(d).map((function(e,a){return i.a.createElement(_t,{title:"Custom Variable "+(a+1),className:"mt-5",key:e.name},i.a.createElement(ra.a,null,e.helptext),i.a.createElement(ra.a,{mt:1},"Current Value: ",e.val),i.a.createElement(ra.a,{mt:1},i.a.createElement("div",null,"New Value"),i.a.createElement(Z.a,{multiline:!0,name:e.name,rows:"2",variant:"outlined",fullWidth:!0,value:O[e.name],onChange:w})))})),i.a.createElement(Ta.a,{container:!0,spacing:1},i.a.createElement(Ta.a,{item:!0,xs:!0},i.a.createElement(ua.a,{variant:"contained",color:"primary",className:"mt-15",fullWidth:!0,size:"small",onClick:function(){window.rto.setAllVars(O),setTimeout((function(){window.rto.createTimeline("timelineContainer",n)}),500),al("Customization successfull ..."),h(!1)}},"Apply")),i.a.createElement(Ta.a,{item:!0,xs:!0},i.a.createElement(ua.a,{variant:"contained",color:"primary",className:"mt-15",fullWidth:!0,size:"small",onClick:function(){return al("Sorry, this feature is not available in Preview Mode")}},"Get URL"))))):i.a.createElement("div",null,"Loading tale ...")},rl=t(291),ll=t(152),il=t.n(ll),ol=t(153),cl=t.n(ol),sl=window,ul=sl.hideLoader,ml=sl.notify,dl=Object(G.a)((function(e){return{sectionHead:{fontSize:22,marginTop:40,borderBottom:"1px solid ".concat(e.palette.primary.main),position:"relative","& .title":{position:"absolute",left:0,top:-16,background:"#fff",paddingRight:9},"& .ico":{position:"absolute",right:0,top:-22,background:"#fff",color:e.palette.primary.main,padding:9,cursor:"pointer"}},usernameTextboxWrap:{position:"relative","& .ico-clear":{position:"absolute",top:6,right:6,padding:4,opacity:.6,cursor:"default"}}}})),fl=Object(p.b)((function(e){return{user:e.user}}),(function(e){return{updateUser:function(a){return e({type:"USER_UPDATE",payload:{user:a}})}}}))((function(e){var a,t=e.user,n=e.updateUser,r=Object(l.useState)({}),o=Object(H.a)(r,2),c=o[0],s=o[1],u=Object(l.useState)({}),m=Object(H.a)(u,2),d=m[0],f=m[1],p=dl();Object(l.useEffect)((function(){document.title="My Profile | "+_e,ul()}),[]),Object(l.useEffect)((function(){s(Object(y.a)({},t))}),[t]);var b=function(e){var a=e.target,t=a.name,n=a.value;"aboutme"===t&&n.length>500?n=n.substr(0,500):"dob"!==t||/^[0-9-]{0,10}$/.test(n)||(n=c[t]||""),s(Object(y.a)(Object(y.a)({},c),{},Object(j.a)({},t,n)))},E=function(e){f(Object(y.a)(Object(y.a)({},d),{},Object(j.a)({},e,!d[e])))};return i.a.createElement(ra.a,{py:2},i.a.createElement(Na.a,{variant:"h4",component:"h1"},"User Profile"),!c.email&&i.a.createElement(ra.a,null,"Please login to see this page"),c.email&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:p.sectionHead,onClick:function(){return E("acc0")}},i.a.createElement("span",{className:"title"},"Account"),i.a.createElement("span",{className:"ico"},!d.acc0&&i.a.createElement("i",{class:"fas fa-chevron-up"}),d.acc0&&i.a.createElement("i",{class:"fas fa-chevron-down"}))),d.acc0&&i.a.createElement(Ta.a,{container:!0,spacing:2,className:"mt-25"},i.a.createElement(Ta.a,{item:!0,xs:12},"Reactale ID",i.a.createElement(rl.a,{disableFocusListener:!0,title:"ReactaleID is your publicly visible ID (as displaying email publicly is not recommendable). It should be 6 to 20 characters long, can contain letters a to z, numbers 0 to 9, hyphen(-) and underscore(_). Since people will know you by this ID, it is advisable to change it only once and then stick to it forever."},i.a.createElement(K.a,{"aria-label":"info"},i.a.createElement(il.a,null)))),i.a.createElement(Ta.a,{item:!0,xs:8,className:p.usernameTextboxWrap},i.a.createElement(Z.a,{fullWidth:!0,variant:"outlined",value:c.username,label:"ReactaleID",name:"username",onChange:b,helperText:"@".concat(c.username),InputProps:c.username&&!/^[a-z0-9-]{6,20}$/.test(c.username)&&{endAdornment:i.a.createElement(Vt.a,{position:"end"},i.a.createElement(qt.a,null))}}),i.a.createElement(cl.a,{className:Object(V.a)("ico-clear",t.username===c.username&&"hidden"),onClick:function(){s(Object(y.a)(Object(y.a)({},c),{},{username:t.username}))}})),i.a.createElement(Ta.a,{item:!0,xs:4},i.a.createElement(ua.a,{variant:"contained",color:"primary",onClick:function(){var e=c.email,a=c.username;Be(we,{email:e,username:a}).then((function(e){var a=e.data,r=a.status,l=a.info,i=a.msg;ml(i),200===r&&l&&(s(Object(y.a)(Object(y.a)({},c),{},{username:l.newUsername})),n(Object(y.a)(Object(y.a)({},t),{},{username:l.newUsername})))})).catch((function(e){return ml(e)}))},fullWidth:!0,disabled:!/^[a-zA-Z0-9-_]{6,20}$/.test(c.username)},"Update"))),i.a.createElement("div",{className:p.sectionHead,onClick:function(){return E("acc1")}},i.a.createElement("span",{className:"title"},"Basics"),i.a.createElement("span",{className:"ico"},!d.acc1&&i.a.createElement("i",{class:"fas fa-chevron-up"}),d.acc1&&i.a.createElement("i",{class:"fas fa-chevron-down"}))),d.acc1&&i.a.createElement(Ta.a,{container:!0,spacing:2,className:"mt-25"},i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(Z.a,{fullWidth:!0,variant:"outlined",value:c.firstname,label:"First name",required:!0,name:"firstname",onChange:b,InputProps:c.firstname&&c.firstname.length<=0&&{endAdornment:i.a.createElement(Vt.a,{position:"end"},i.a.createElement(qt.a,null))}})),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(Z.a,{fullWidth:!0,variant:"outlined",value:c.lastname,label:"Last name",required:!0,name:"lastname",onChange:b,InputProps:c.lastname&&c.lastname.length<=0&&{endAdornment:i.a.createElement(Vt.a,{position:"end"},i.a.createElement(qt.a,null))}})),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(la.a,{variant:"outlined",fullWidth:!0},i.a.createElement(Gt.a,{required:!0},"Gender"),i.a.createElement(J.a,{value:c.gender,fullWidth:!0,onChange:b,name:"gender"},i.a.createElement(X.a,{value:"M"},"Male"),i.a.createElement(X.a,{value:"F"},"Female"),i.a.createElement(X.a,{value:"O"},"Other")))),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(la.a,{variant:"outlined",fullWidth:!0},i.a.createElement(Gt.a,{required:!0},"Country"),i.a.createElement(J.a,{value:c.country,fullWidth:!0,onChange:b,name:"country"},ke.map((function(e){return i.a.createElement(X.a,{value:e,key:e},e)}))))),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(la.a,{variant:"outlined",fullWidth:!0},i.a.createElement(Gt.a,null,"Language 1"),i.a.createElement(J.a,{value:c.lang1,fullWidth:!0,onChange:b,name:"lang1"},Le.map((function(e){return i.a.createElement(X.a,{value:e,key:e},e)}))))),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(la.a,{variant:"outlined",fullWidth:!0},i.a.createElement(Gt.a,null,"Language 2"),i.a.createElement(J.a,{value:c.lang2,fullWidth:!0,onChange:b,name:"lang2"},Le.map((function(e){return i.a.createElement(X.a,{value:e,key:e},e)}))))),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(la.a,{variant:"outlined",fullWidth:!0},i.a.createElement(Gt.a,null,"Language 3"),i.a.createElement(J.a,{value:c.lang3,fullWidth:!0,onChange:b,name:"lang3"},Le.map((function(e){return i.a.createElement(X.a,{value:e,key:e},e)}))))),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,md:3},i.a.createElement(Z.a,{fullWidth:!0,variant:"outlined",value:c.dob,label:"Date of Birth",name:"dob",onChange:b,helperText:"Only you can see it",placeholder:"DD-MM-YYYY"})),i.a.createElement(Ta.a,{item:!0,xs:12},i.a.createElement(Z.a,{fullWidth:!0,variant:"outlined",value:c.aboutme,label:"About me",name:"aboutme",onChange:b,multiline:!0,helperText:((null===(a=c.aboutme)||void 0===a?void 0:a.length)||0)+" / 500"}))),i.a.createElement("div",{className:p.sectionHead,onClick:function(){return E("acc2")}},i.a.createElement("span",{className:"title"},"Social"),i.a.createElement("span",{className:"ico"},!d.acc2&&i.a.createElement("i",{class:"fas fa-chevron-up"}),d.acc2&&i.a.createElement("i",{class:"fas fa-chevron-down"}))),d.acc2&&i.a.createElement(Ta.a,{container:!0,spacing:2,className:"mt-25"},i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,className:p.usernameTextboxWrap},i.a.createElement(Z.a,{fullWidth:!0,variant:"outlined",value:c.facebookID,label:"Facebook ID",name:"facebookID",onChange:b,helperText:"https://facebook.com/".concat(c.facebookID||"")})),i.a.createElement(Ta.a,{item:!0,xs:12,sm:6,className:p.usernameTextboxWrap},i.a.createElement(Z.a,{fullWidth:!0,variant:"outlined",value:c.twitterID,label:"Twitter ID",name:"twitterID",onChange:b,helperText:"https://twitter.com/".concat(c.twitterID||"")}))),i.a.createElement(ra.a,{mt:4,className:"text-right"},i.a.createElement(ua.a,{variant:"contained",color:"primary",onClick:function(){console.log("tempUser = ",c),Be(Ce,{user:c,email:c.email}).then((function(e){var a=e.data,r=a.status,l=a.updatedUserData,i=a.msg;ml(i),200===r&&n(Object(y.a)(Object(y.a)({},t),l))})).catch((function(e){return ml(e)}))}},"Save Profile"))))}));t(207),t(208),t(209);!function(e){e.SIMPLE="SIMPLE",e.ACTION="ACTION"}(Lr||(Lr={})),function(e){e.SOMEONE_FOLLOWED_YOU="SOMEONE_FOLLOWED_YOU",e.FAV_AUTHOR_PUBLISHED="FAV_AUTHOR_PUBLISHED",e.LINK_A_TALE_REQUEST="LINK_A_TALE_REQUEST"}(Ar||(Ar={}));var pl=window,bl=pl.showLoader,El=pl.hideLoader,hl=pl.notify,gl=Object(G.a)((function(e){return{headerSec:{display:"flex",alignItems:"center","& .page-title":{flex:1},"& button":{height:34}},notifBox:{marginTop:25,"& .inner":{padding:"10px 15px"},"& .title":{fontSize:20,display:"flex",alignItems:"center",justifyContent:"space-between","& .ico":{fontSize:16,border:"1px solid #ddd",height:30,width:30,display:"inline-flex",justifyContent:"center",alignItems:"center",marginRight:7,color:"#fff",background:"var(--primary-color)",borderRadius:4},"& .date":{color:"rgb(0 0 0 / 70%)",fontSize:16}},"& .body":{lineHeight:"24px","& a":{textDecoration:"none"},"& .detailed-list":{margin:"20px 0 20px 20px","& li":{marginTop:3,"& .label":{color:"rgba(0 0 0 / 50%)",fontWeight:"bold",marginRight:5}}}}}}})),yl=[{path:"/home",component:pt,exact:!0},{path:"/my-profile",component:fl,exact:!0},{path:"/create-tale",component:$n,exact:!0},{path:"/preview/:id",component:nl,exact:!0},{path:"/edit-tale/:id",component:er,exact:!0},{path:"/tales-flow",component:Mr,exact:!0},{path:"/my-tales",component:Kr,exact:!0},{path:"/notifications",component:Object(p.b)((function(e){return{user:e.user}}),(function(e){return{updateUser:function(a){return e({type:"USER_UPDATE",payload:{user:a}})}}}))((function(e){var a=gl(),t=Object(l.useState)([]),n=Object(H.a)(t,2),r=n[0],o=n[1],c=Object(l.useState)(!1),s=Object(H.a)(c,2),u=s[0],m=s[1],d=e.user,f=e.updateUser;Object(l.useEffect)((function(){document.title="Notifications | "+_e,El()}),[]),Object(l.useEffect)((function(){o(d.notifs||[])}),[d]);var p=function(e,a){var t=window.confirm("Are you sure to ".concat(a," ?")),n=e;t&&(bl(),Be(Te,{id:e,execCode:a}).then((function(e){var a=e.data,t=a.status,l=a.msg;a.id;200!==t&&2154!==t||(o(r.filter((function(e){return e.id!==n}))),f(Object(y.a)(Object(y.a)({},d),{},{notifs:r}))),hl(l)})).catch((function(e){return hl("Some error occurred ...")})).finally((function(){return El()})))};return i.a.createElement(ra.a,{py:2},i.a.createElement("div",{className:a.headerSec},i.a.createElement(Na.a,{variant:"h4",component:"h1",className:"page-title"},"Notifications"),i.a.createElement(ua.a,{variant:"contained",color:"primary",onClick:function(){u||(m(!0),Be(pe,{email:d.email}).then((function(e){var a=e.data,t=a.status,n=a.notifs,r=a.msg;200===t&&f(Object(y.a)(Object(y.a)({},d),{},{notifs:n})),hl(r)})).catch((function(e){return hl("Some error occurred ...")})).finally((function(){return m(!1)})))},endIcon:i.a.createElement("i",{className:Object(V.a)("fas fa-sync",u&&"rotating")}),size:"small"},"Refresh")),i.a.createElement(ra.a,{mt:2},"Currently you have ",r.length," notification(s)!"),i.a.createElement(ra.a,{mt:2},r.map((function(e){return i.a.createElement("div",{className:a.notifBox},i.a.createElement(bt.a,{className:"inner",elevation:3},i.a.createElement(Ta.a,{container:!0,spacing:1},i.a.createElement(Ta.a,{item:!0,xs:12,className:"title"},e.name===Ar.LINK_A_TALE_REQUEST&&i.a.createElement("span",null,i.a.createElement("i",{className:"fas fa-code-branch ico"}),i.a.createElement("span",null,"Link A Tale")),i.a.createElement("span",{className:"date"},function(e){var a=new Date(e);return"".concat(a.getDate().toString().padStart(2,"0"),"-").concat((a.getMonth()+1).toString().padStart(2,"0"),"-").concat(a.getFullYear())}(e.doC))),i.a.createElement(Ta.a,{item:!0,xs:12,className:"body"},e.name===Ar.LINK_A_TALE_REQUEST&&i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"Hey, you have got a link request !!!"),i.a.createElement("p",null,i.a.createElement("ul",{className:"detailed-list"},i.a.createElement("li",null,i.a.createElement("span",{className:"label"},"Sender: "),i.a.createElement("a",{href:"/user/".concat(e.requestorID)},e.requestorName)),i.a.createElement("li",null,i.a.createElement("span",{className:"label"},"From Story: "),i.a.createElement("span",null,e.fromStoryName)),i.a.createElement("li",null,i.a.createElement("span",{className:"label"},"From Storylet ID: "),i.a.createElement("span",null,e.fromStID)),i.a.createElement("li",null,i.a.createElement("span",{className:"label"},"Start point: "),i.a.createElement("a",{href:"".concat(e.fromUrl),target:"_blank"},"Click here to see")),i.a.createElement("li",null,i.a.createElement("span",{className:"label"},"Choice text: "),i.a.createElement("span",null,e.choiceTxt)),i.a.createElement("li",null,i.a.createElement("span",{className:"label"},"End point: "),i.a.createElement("a",{href:"".concat(e.toUrl),target:"_blank"},"Click here to see")))),i.a.createElement("div",{className:"text-right"},d.email!==e.requestorEmail?i.a.createElement(i.a.Fragment,null,i.a.createElement(ua.a,{variant:"contained",color:"primary",onClick:function(){return p(e.id,"APPROVE")}},"Approve"),i.a.createElement(ua.a,{variant:"outlined",color:"primary",className:"ml-5",onClick:function(){return p(e.id,"DENY")}},"Deny")):i.a.createElement(ua.a,{variant:"outlined",color:"primary",className:"ml-5",onClick:function(){return p(e.id,"DELETE")}},"Cancel Request")))))))}))))})),exact:!0}],vl=t(286),Ol=t(278),Sl=t(279),wl=function(){var e=Object(Ba.a)(Fa.a.mark((function e(a,t){var n;return Fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be(ge,{email:a,otp:t});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:"FAILED",msg:"Verification failed"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a,t){return e.apply(this,arguments)}}(),Cl=function(){var e=Object(Ba.a)(Fa.a.mark((function e(a,t){var n;return Fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be(Oe,{email:a,otpType:t});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:"FAILED",msg:"Some error occured. Please try again later"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a,t){return e.apply(this,arguments)}}(),xl=function(){var e=Object(Ba.a)(Fa.a.mark((function e(a,t,n){var r;return Fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be(Se,{email:a,pswdchangeotp:t,newpswd:n});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{status:"FAILED",msg:"Some error occured. Please try again later"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a,t,n){return e.apply(this,arguments)}}(),jl="SIGNUP_EMAIL_VERIFICATION",Tl="FORGOT_PASSWORD",Nl=window.notify,Il=Object(G.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},heading:{fontSize:e.typography.pxToRem(16),fontWeight:e.typography.fontWeightRegular,color:e.palette.primary.main}}})),kl=Object(p.b)((function(e){return{isOpen:e.ui.isLoginModalOpen,visibleTabIndex:e.ui.loginActiveTab,user:e.user}}),(function(e){return{handleClose:function(){return e({type:"UI_LOGIN_MODAL_CLOSE"})},changeTab:function(a){return e({type:"UI_LOGIN_SET_ACT_TAB",payload:{tabIndex:a}})},doLogin:function(a){return e(function(e){var a=e.email,t=e.pswd;return Hn(),function(e){Be(Ee,{email:a,pswd:t}).then((function(a){var t=a.data,n=t.status,r=t.user,l=t.tok,i=t.msg;200===n?(Me(r,l),e({type:"USER_UPDATE",payload:{user:r}}),e({type:"UI_LOGIN_MODAL_CLOSE"}),Bn(i)):Bn(i)})).catch((function(e){console.log(e),Bn("Sign in failed...")})).finally((function(){return Vn()}))}}(a))},doSignup:function(a){return e(function(e){var a=e.email,t=e.pswd,n=e.firstname,r=e.lastname;return Hn(),function(e){Be(he,{email:a,pswd:t,firstname:n,lastname:r}).then((function(e){var a=e.data,t=(a.status,a.msg);Bn(t)})).catch((function(e){console.log(e),Bn("Sign up failed...")})).finally((function(){return Vn()}))}}(a))}}}))((function(e){var a=Il(),t=e.isOpen,n=e.handleClose,r=e.visibleTabIndex,o=e.title,c=e.changeTab,s=e.user,u=e.doLogin,m=e.doSignup,d=Object(l.useState)(s||{}),f=Object(H.a)(d,2),p=f[0],b=f[1],E=Object(l.useState)(""),h=Object(H.a)(E,2),g=h[0];h[1];Object(l.useEffect)((function(){s&&b(s)}),[s]);var v=function(e,a){return e&&En(e)?!(!a||!function(e){return/^(?=.*[0-9])(?=.*[- ?!@#$%^&*\/\\])(?=.*[A-Z])(?=.*[a-z])[a-zA-Z0-9- ?!@#$%^&*\/\\]{8,20}$/.test(e)}(a))||Nl("Please enter a valid password of length between 8 to 20 and must have atleast 1 uppercase letter, 1 lowercase, 1 number and 1 special character."):(Nl("Please enter a valid email address"),!1)},O=function(e){e.preventDefault();var a=p.email,t=p.pswd;v(a,t)&&u({email:a,pswd:t})},S=function(e){e.preventDefault();var a=p.email,t=p.pswd,n=p.firstname,r=p.lastname;a&&t&&n&&r?v(a,t)&&m({email:a,pswd:t,firstname:n,lastname:r}):Nl("Enter Firstname, Lastname Email, Password to login...")},w=function(e){b(Object(y.a)(Object(y.a)({},p),{},Object(j.a)({},e.target.name,e.target.value)))};return i.a.createElement(ha,{isOpen:t,handleClose:n,title:o||"Hi There!"},i.a.createElement(bt.a,{square:!0},i.a.createElement(Et.a,{value:r,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){return c(a)},centered:!0,"aria-label":"tabs to create the story"},i.a.createElement(ht.a,{label:"Sign in"}),i.a.createElement(ht.a,{label:"Sign up"}),i.a.createElement(ht.a,{label:"Manage"}))),i.a.createElement(ra.a,{className:0!==r?"hide":""},i.a.createElement("form",{onSubmit:O},i.a.createElement(Z.a,{label:"Email",name:"email",value:p.email,onChange:w,variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(Z.a,{label:"Password",name:"pswd",value:p.pswd,onChange:w,type:"password",variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(ua.a,{type:"submit",variant:"outlined",color:"primary",className:"mt-15",fullWidth:!0,onClick:O},"Sign in"))),i.a.createElement(ra.a,{className:1!==r?"hide":""},i.a.createElement("form",{onSubmit:S},i.a.createElement(Z.a,{label:"First name",name:"firstname",value:p.firstname,onChange:w,variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(Z.a,{label:"Last name",name:"lastname",value:p.lastname,onChange:w,variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(Z.a,{label:"Email",name:"email",value:p.email,onChange:w,variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(Z.a,{label:"Password",name:"pswd",value:p.pswd,onChange:w,type:"password",variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(ua.a,{type:"submit",variant:"outlined",color:"primary",className:"mt-15",fullWidth:!0,onClick:S},"Sign up"))),i.a.createElement(ra.a,{className:2!==r?"hide":""},i.a.createElement(vl.a,{className:"mui-accordion-override-1 mt-15"},i.a.createElement(Ol.a,{expandIcon:i.a.createElement(rt.a,null)},i.a.createElement(Na.a,{className:a.heading},"Email Verification")),i.a.createElement(Sl.a,null,i.a.createElement(ra.a,{className:"width-100",pt:1},i.a.createElement(Z.a,{label:"Email to Verify",name:"email",value:p.email,onChange:w,variant:"outlined",size:"small",fullWidth:!0}),i.a.createElement("div",{className:"mt-15 flex"},i.a.createElement(Z.a,{label:"OTP",name:"emailverifyotp",value:p.emailverifyotp,onChange:w,variant:"outlined",size:"small"}),i.a.createElement(ua.a,{variant:"contained",className:"ml-5",color:"primary",onClick:function(){return p.email&&p.emailverifyotp?isNaN(p.emailverifyotp)?Nl("OTP must be numeric"):En(p.email)?(window.showLoader(),void wl(p.email,p.emailverifyotp).then((function(e){return Nl(e.msg)})).catch((function(e){return Nl("Some error occured. Please try again later ...")})).finally((function(e){window.hideLoader()}))):Nl("Enter a valid email address"):Nl("Both email and otp are mandatory ...")}},"Verify")),i.a.createElement("div",{className:"mt-15"},"Did not receive OTP? ",i.a.createElement("span",{onClick:function(e){if(!p.email||!En(p.email))return Nl("Please enter your email address and try again.");window.showLoader(),Cl(p.email,jl).then((function(e){return Nl(e.msg)})).catch((function(e){return Nl("Some error occured ...")})).finally((function(){return window.hideLoader()}))}},i.a.createElement("u",null,"Click here"))," to resend."),g&&i.a.createElement("div",null,g)))),i.a.createElement(vl.a,{className:"mui-accordion-override-1"},i.a.createElement(Ol.a,{expandIcon:i.a.createElement(rt.a,null)},i.a.createElement(Na.a,{className:a.heading},"Password Recovery")),i.a.createElement(Sl.a,null,i.a.createElement(ra.a,{className:"width-100"},i.a.createElement(Z.a,{label:"Signup Email",name:"email",value:p.email,onChange:w,variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(ua.a,{variant:"outlined",className:"mt-15",color:"primary",fullWidth:!0,onClick:function(e){if(!p.email||!En(p.email))return Nl("Please enter your email address and try again.");window.showLoader(),Cl(p.email,Tl).then((function(e){return Nl(e.msg)})).catch((function(e){return Nl("Some error occured ...")})).finally((function(){return window.hideLoader()}))}},"Send OTP"),i.a.createElement(ra.a,{className:"width-100"},i.a.createElement(Z.a,{label:"Enter OTP",name:"pswdchangeotp",value:p.pswdchangeotp,onChange:w,variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(Z.a,{label:"Type New Password",name:"newpswd",value:p.newpswd,onChange:w,type:"password",variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(Z.a,{label:"Retype New Password",name:"newpswd1",value:p.newpswd1,onChange:w,type:"password",variant:"outlined",size:"small",fullWidth:!0,className:"mt-15"}),i.a.createElement(ua.a,{variant:"contained",className:"mt-15",color:"primary",fullWidth:!0,onClick:function(e){if(!p.email||!p.pswdchangeotp||!p.newpswd||!p.newpswd1)return Nl("Email, OTP, Password and Re-password - all 4 fields are Mandatory to change password.");if(v(p.email,p.newpswd)){if(isNaN(p.pswdchangeotp))return Nl("OTP must be numeric.");if(p.newpswd!==p.newpswd1)return Nl("Password and Re-password is not matching. Please type again.");window.showLoader(),xl(p.email,p.pswdchangeotp,p.newpswd).then((function(e){return Nl(e.msg)})).catch((function(e){return Nl("Some error occured ...")})).finally((function(){return window.hideLoader()}))}}},"Change Password")))))))})),Ll=function(){return W.purge()},Al=function(){return i.a.createElement(s.a,{theme:B},i.a.createElement(p.a,{store:M},i.a.createElement(f.a,{loading:null,persistor:W},i.a.createElement(Wa,null,i.a.createElement(m.a,{basename:"/r"},i.a.createElement("header",null,i.a.createElement(qe,null)),i.a.createElement("nav",null,i.a.createElement(ja,{purgePersistedData:Ll})),i.a.createElement(kl,null),i.a.createElement(u.a,{maxWidth:"lg",className:"appbody"},i.a.createElement(d.d,null,yl.map((function(e){return i.a.createElement(d.b,Object.assign({},e,{key:e.path}))})),i.a.createElement(d.b,{path:"*"},i.a.createElement(d.a,{to:"/home"})))),i.a.createElement("footer",null,i.a.createElement(Ma,null)))))))};c.a.render(i.a.createElement(Al,null),document.getElementById("root"))}},[[173,1,2]]]);
//# sourceMappingURL=main.32c86d4a.chunk.js.map