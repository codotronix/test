<!--
    This is the root html in the bucket of webapp.reactale.com
    It will check if this is loaded from an iframe,
    if yes, then the root domain need the login info
    else, redirect to /r
-->
<!-- For login between / and webapp/ -->
<a href="https://reactale.com">Click here for Reactale</a>
<script>
    // if this(webapp.reactale.com) is loaded inside an iFrame of main site (reactale.com)
    // then share the session with the parent
    const allowedHosts = ['reactale.com', 'reactale.site']
    // const hostIndex = allowedHosts.indexOf(window.parent.location.host)
    // if (window.parent != window.top) {
        // We're deeper than one down
        const msg = window.sessionStorage.getItem('RTLSESSION');
        let mainUrl = window.location.origin;
        // console.log('1. window.location.origin = ', window.location.origin)
        mainUrl = mainUrl.replace('webapp.', '')
        window.parent.postMessage(msg, mainUrl);
    // }
    // else {
        // console.log('2. window.location.origin = ', window.location.origin)
        // window.location.href = window.location.origin + '/r'
    // }
</script>